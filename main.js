/*! For license information please see main.js.LICENSE.txt */
(self.webpackChunkwordcraft=self.webpackChunkwordcraft||[]).push([[792],{870:(e,t)=>{"use strict";const r=["user","model","function"];var i,n,o,s,a,c,d;t.HarmCategory=void 0,(i=t.HarmCategory||(t.HarmCategory={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HarmBlockThreshold=void 0,(n=t.HarmBlockThreshold||(t.HarmBlockThreshold={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",t.HarmProbability=void 0,(o=t.HarmProbability||(t.HarmProbability={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH",t.BlockReason=void 0,(s=t.BlockReason||(t.BlockReason={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",t.FinishReason=void 0,(a=t.FinishReason||(t.FinishReason={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.OTHER="OTHER",t.TaskType=void 0,(c=t.TaskType||(t.TaskType={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",c.RETRIEVAL_QUERY="RETRIEVAL_QUERY",c.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",c.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",c.CLASSIFICATION="CLASSIFICATION",c.CLUSTERING="CLUSTERING",t.FunctionDeclarationSchemaType=void 0,(d=t.FunctionDeclarationSchemaType||(t.FunctionDeclarationSchemaType={})).STRING="STRING",d.NUMBER="NUMBER",d.INTEGER="INTEGER",d.BOOLEAN="BOOLEAN",d.ARRAY="ARRAY",d.OBJECT="OBJECT";class l extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class h extends l{constructor(e,t){super(e),this.response=t}}const u="0.3.1",p="genai-js";var m;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(m||(m={}));class f{constructor(e,t,r,i,n){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=n}toString(){var e;let t=`https://generativelanguage.googleapis.com/${(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1"}/${this.model}:${this.task}`;return this.stream&&(t+="?alt=sse"),t}}async function g(e,t,r){let i;try{if(i=await fetch(e.toString(),Object.assign(Object.assign({},function(e){const t={};if((null==e?void 0:e.timeout)>=0){const r=new AbortController,i=r.signal;setTimeout((()=>r.abort()),e.timeout),t.signal=i}return t}(r)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":`${p}/${u}`,"x-goog-api-key":e.apiKey},body:t})),!i.ok){let e="";try{const t=await i.json();e=t.error.message,t.error.details&&(e+=` ${JSON.stringify(t.error.details)}`)}catch(e){}throw new Error(`[${i.status} ${i.statusText}] ${e}`)}}catch(t){const r=new l(`Error fetching from ${e.toString()}: ${t.message}`);throw r.stack=t.stack,r}return i}function b(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),y(e.candidates[0]))throw new h(`${_(e)}`,e);return function(e){var t,r,i,n;return(null===(n=null===(i=null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i[0])||void 0===n?void 0:n.text)?e.candidates[0].content.parts.map((({text:e})=>e)).join(""):""}(e)}if(e.promptFeedback)throw new h(`Text not available. ${_(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function call from the first candidate only. Access response.candidates directly to use the other candidates.`),y(e.candidates[0]))throw new h(`${_(e)}`,e);return function(e){var t,r,i,n;return null===(n=null===(i=null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)||void 0===i?void 0:i[0])||void 0===n?void 0:n.functionCall}(e)}if(e.promptFeedback)throw new h(`Function call not available. ${_(e)}`,e)},e}const v=[t.FinishReason.RECITATION,t.FinishReason.SAFETY];function y(e){return!!e.finishReason&&v.includes(e.finishReason)}function _(e){var t,r,i;let n="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(i=e.candidates)||void 0===i?void 0:i[0]){const t=e.candidates[0];y(t)&&(n+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(n+=`: ${t.finishMessage}`))}}else n+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(n+=` due to ${e.promptFeedback.blockReason}`),(null===(r=e.promptFeedback)||void 0===r?void 0:r.blockReasonMessage)&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);return n}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function k(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){n[e]&&(i[e]=function(t){return new Promise((function(r,i){o.push([e,t,r,i])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof x?Promise.resolve(r.value.v).then(c,d):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function c(e){a("next",e)}function d(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}"function"==typeof SuppressedError&&SuppressedError;const w=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function S(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let r="";return i();function i(){return t.read().then((({value:t,done:n})=>{if(n)return r.trim()?void e.error(new l("Failed to parse stream")):void e.close();r+=t;let o,s=r.match(w);for(;s;){try{o=JSON.parse(s[1])}catch(t){return void e.error(new l(`Error parsing JSON response: "${s[1]}"`))}e.enqueue(o),r=r.substring(s[0].length),s=r.match(w)}return i()}))}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[r,i]=t.tee();return{stream:C(r),response:E(i)}}async function E(e){const t=[],r=e.getReader();for(;;){const{done:e,value:i}=await r.read();if(e)return b(T(t));t.push(i)}}function C(e){return k(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:r}=yield x(t.read());if(r)break;yield yield x(b(e))}}))}function T(e){const t=e[e.length-1],r={promptFeedback:null==t?void 0:t.promptFeedback};for(const t of e)if(t.candidates)for(const e of t.candidates){const t=e.index;if(r.candidates||(r.candidates=[]),r.candidates[t]||(r.candidates[t]={index:e.index}),r.candidates[t].citationMetadata=e.citationMetadata,r.candidates[t].finishReason=e.finishReason,r.candidates[t].finishMessage=e.finishMessage,r.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){r.candidates[t].content||(r.candidates[t].content={role:e.content.role||"user",parts:[]});const i={};for(const n of e.content.parts)n.text&&(i.text=n.text),n.functionCall&&(i.functionCall=n.functionCall),0===Object.keys(i).length&&(i.text=""),r.candidates[t].content.parts.push(i)}}return r}async function A(e,t,r,i){const n=new f(t,m.STREAM_GENERATE_CONTENT,e,!0,i);return S(await g(n,JSON.stringify(r),i))}async function R(e,t,r,i){const n=new f(t,m.GENERATE_CONTENT,e,!1,i),o=await g(n,JSON.stringify(r),i);return{response:b(await o.json())}}function O(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const r of e)"string"==typeof r?t.push({text:r}):t.push(r);return function(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,n=!1;for(const o of e)"functionResponse"in o?(r.parts.push(o),n=!0):(t.parts.push(o),i=!0);if(i&&n)throw new l("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!n)throw new l("No content is provided for sending chat message.");if(i)return t;return r}(t)}function I(e){if(e.contents)return e;return{contents:[O(e)]}}const N=["text","inlineData","functionCall","functionResponse"],M={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"]},P={user:["model"],function:["model"],model:["user","function"]};const L="SILENT_ERROR";class D{constructor(e,t,i,n){this.model=t,this.params=i,this.requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==i?void 0:i.history)&&(!function(e){let t;for(const i of e){const{role:e,parts:n}=i;if(!t&&"user"!==e)throw new l(`First content should be with role 'user', got ${e}`);if(!r.includes(e))throw new l(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(r)}`);if(!Array.isArray(n))throw new l("Content should have 'parts' property with an array of Parts");if(0===n.length)throw new l("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0};for(const e of n)for(const t of N)t in e&&(o[t]+=1);const s=M[e];for(const t of N)if(!s.includes(t)&&o[t]>0)throw new l(`Content with role '${e}' can't contain '${t}' part`);if(t&&!P[e].includes(t.role))throw new l(`Content with role '${e}' can't follow '${t.role}'. Valid previous roles: ${JSON.stringify(P)}`);t=i}}(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,r,i;await this._sendPromise;const n=O(e),o={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,contents:[...this._history,n]};let s;return this._sendPromise=this._sendPromise.then((()=>R(this._apiKey,this.model,o,this.requestOptions))).then((e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(n);const r=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(r)}else{const t=_(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}s=e})),await this._sendPromise,s}async sendMessageStream(e){var t,r,i;await this._sendPromise;const n=O(e),o={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,contents:[...this._history,n]},s=A(this._apiKey,this.model,o,this.requestOptions);return this._sendPromise=this._sendPromise.then((()=>s)).catch((e=>{throw new Error(L)})).then((e=>e.response)).then((e=>{if(e.candidates&&e.candidates.length>0){this._history.push(n);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=_(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==L&&console.error(e)})),s}}class ${constructor(e,t,r){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.requestOptions=r||{}}async generateContent(e){const t=I(e);return R(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools},t),this.requestOptions)}async generateContentStream(e){const t=I(e);return A(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools},t),this.requestOptions)}startChat(e){return new D(this.apiKey,this.model,Object.assign({tools:this.tools},e),this.requestOptions)}async countTokens(e){const t=I(e);return async function(e,t,r,i){const n=new f(t,m.COUNT_TOKENS,e,!1,{});return(await g(n,JSON.stringify(Object.assign(Object.assign({},r),{model:t})),i)).json()}(this.apiKey,this.model,t)}async embedContent(e){const t=function(e){if("string"==typeof e||Array.isArray(e))return{content:O(e)};return e}(e);return async function(e,t,r,i){const n=new f(t,m.EMBED_CONTENT,e,!1,{});return(await g(n,JSON.stringify(r),i)).json()}(this.apiKey,this.model,t)}async batchEmbedContents(e){return async function(e,t,r,i){const n=new f(t,m.BATCH_EMBED_CONTENTS,e,!1,{}),o=r.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await g(n,JSON.stringify({requests:o}),i)).json()}(this.apiKey,this.model,e,this.requestOptions)}}t.ChatSession=D,t.GenerativeModel=$,t.GoogleGenerativeAI=class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new l("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new $(this.apiKey,e,t)}},t.POSSIBLE_ROLES=r},567:()=>{(()=>{var e,t,r;const i=Symbol(),n=Symbol(),o=Symbol(),s=Symbol(),a=Symbol(),c=Symbol(),d=Symbol(),l=Symbol(),h=Symbol(),u=Symbol(),p=Symbol(),m=Symbol(),f=Symbol();class g{constructor(){this[e]=[],this[t]=[],this[r]=new Set}destructor(){this[h](this[o]);const e=this;e[i]=null,e[o]=null,e[n]=null}get top(){const e=this[i];return e[e.length-1]||null}push(e){e&&e!==this.top&&(this.remove(e),this[c](e),this[i].push(e))}remove(e){const t=this[i].indexOf(e);return-1!==t&&(this[i].splice(t,1),t===this[i].length&&this[c](this.top),!0)}pop(){const e=this.top;return e&&this.remove(e),e}has(e){return-1!==this[i].indexOf(e)}[(e=i,t=o,r=n,c)](e){const t=this[n],r=this[o];if(!e)return this[h](r),t.clear(),void(this[o]=[]);const i=this[u](e);if(i[i.length-1].parentNode!==document.body)throw Error("Non-connected element cannot be a blocking element");this[o]=i;const s=this[p](e);if(!r.length)return void this[l](i,s,t);let a=r.length-1,c=i.length-1;for(;a>0&&c>0&&r[a]===i[c];)a--,c--;r[a]!==i[c]&&this[d](r[a],i[c]),a>0&&this[h](r.slice(0,a)),c>0&&this[l](i.slice(0,c),s,null)}[d](e,t){const r=e[s];this[m](e)&&!e.inert&&(e.inert=!0,r.add(e)),r.has(t)&&(t.inert=!1,r.delete(t)),t[a]=e[a],t[s]=r,e[a]=void 0,e[s]=void 0}[h](e){for(const t of e){t[a].disconnect(),t[a]=void 0;const e=t[s];for(const t of e)t.inert=!1;t[s]=void 0}}[l](e,t,r){for(const i of e){const e=i.parentNode,n=e.children,o=new Set;for(let e=0;e<n.length;e++){const s=n[e];s===i||!this[m](s)||t&&t.has(s)||(r&&s.inert?r.add(s):(s.inert=!0,o.add(s)))}i[s]=o;const c=new MutationObserver(this[f].bind(this));i[a]=c;let d=e;const l=d;l.__shady&&l.host&&(d=l.host),c.observe(d,{childList:!0})}}[f](e){const t=this[o],r=this[n];for(const i of e){const e=i.target.host||i.target,n=e===document.body?t.length:t.indexOf(e),o=t[n-1],a=o[s];for(let e=0;e<i.removedNodes.length;e++){const t=i.removedNodes[e];if(t===o)return console.info("Detected removal of the top Blocking Element."),void this.pop();a.has(t)&&(t.inert=!1,a.delete(t))}for(let e=0;e<i.addedNodes.length;e++){const t=i.addedNodes[e];this[m](t)&&(r&&t.inert?r.add(t):(t.inert=!0,a.add(t)))}}}[m](e){return!1===/^(style|template|script)$/.test(e.localName)}[u](e){const t=[];let r=e;for(;r&&r!==document.body;)if(r.nodeType===Node.ELEMENT_NODE&&t.push(r),r.assignedSlot){for(;r=r.assignedSlot;)t.push(r);r=t.pop()}else r=r.parentNode||r.host;return t}[p](e){const t=e.shadowRoot;if(!t)return null;const r=new Set;let i,n,o;const s=t.querySelectorAll("slot");if(s.length&&s[0].assignedNodes)for(i=0;i<s.length;i++)for(o=s[i].assignedNodes({flatten:!0}),n=0;n<o.length;n++)o[n].nodeType===Node.ELEMENT_NODE&&r.add(o[n]);return r}}document.$blockingElements=new g})()},74:(e,t,r)=>{"use strict";var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function s(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}Object.create;function a(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}Object.create;"function"==typeof SuppressedError&&SuppressedError;const d=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:i}=t;return{kind:r,elements:i,finisher(t){customElements.define(e,t)}}})(e,t),l=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(r){r.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}},h=(e,t,r)=>{t.constructor.createProperty(r,e)};function u(e){return(t,r)=>void 0!==r?h(e,t,r):l(e,t)}function p(e){return u({...e,state:!0})}const m=({finisher:e,descriptor:t})=>(r,i)=>{var n;if(void 0===i){const i=null!==(n=r.originalKey)&&void 0!==n?n:r.key,o=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(r.key)}:{...r,key:i};return null!=e&&(o.finisher=function(t){e(t,i)}),o}{const n=r.constructor;void 0!==t&&Object.defineProperty(r,i,t(i)),null==e||e(n,i)}};function f(e){return m({finisher:(t,r)=>{Object.assign(t.prototype[r],e)}})}function g(e,t){return m({descriptor:r=>{const i={get(){var t,r;return null!==(r=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==r?r:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof r?Symbol():"__"+r;i.get=function(){var r,i;return void 0===this[t]&&(this[t]=null!==(i=null===(r=this.renderRoot)||void 0===r?void 0:r.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}function b(e){return m({descriptor:t=>({async get(){var t;return await this.updateComplete,null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e)},enumerable:!0,configurable:!0})})}var v;null===(v=window.HTMLSlotElement)||void 0===v||v.prototype.assignedElements;function y(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}const _=window,x=_.ShadowRoot&&(void 0===_.ShadyCSS||_.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,k=Symbol(),w=new WeakMap;class S{constructor(e,t,r){if(this._$cssResult$=!0,r!==k)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(x&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=w.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&w.set(t,e))}return e}toString(){return this.cssText}}const E=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1]),e[0]);return new S(r,e,k)},C=x?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new S("string"==typeof e?e:e+"",void 0,k))(t)})(e):e;var T;const A=window,R=A.trustedTypes,O=R?R.emptyScript:"",I=A.reactiveElementPolyfillSupport,N={toAttribute(e,t){switch(t){case Boolean:e=e?O:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},M=(e,t)=>t!==e&&(t==t||e==e),P={attribute:!0,type:String,converter:N,reflect:!1,hasChanged:M},L="finalized";class D extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,r)=>{const i=this._$Ep(r,t);void 0!==i&&(this._$Ev.set(i,r),e.push(i))})),e}static createProperty(e,t=P){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const r="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(i){const n=this[e];this[t]=i,this.requestUpdate(e,n,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||P}static finalize(){if(this.hasOwnProperty(L))return!1;this[L]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of t)this.createProperty(r,e[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(C(e))}else void 0!==e&&t.push(C(e));return t}static _$Ep(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,r;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(r=e.hostConnected)||void 0===r||r.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{x?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const r=document.createElement("style"),i=_.litNonce;void 0!==i&&r.setAttribute("nonce",i),r.textContent=t.cssText,e.appendChild(r)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EO(e,t,r=P){var i;const n=this.constructor._$Ep(e,r);if(void 0!==n&&!0===r.reflect){const o=(void 0!==(null===(i=r.converter)||void 0===i?void 0:i.toAttribute)?r.converter:N).toAttribute(t,r.type);this._$El=e,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$El=null}}_$AK(e,t){var r;const i=this.constructor,n=i._$Ev.get(e);if(void 0!==n&&this._$El!==n){const e=i.getPropertyOptions(n),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(r=e.converter)||void 0===r?void 0:r.fromAttribute)?e.converter:N;this._$El=n,this[n]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,r){let i=!0;void 0!==e&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||M)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(r)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var $;D[L]=!0,D.elementProperties=new Map,D.elementStyles=[],D.shadowRootOptions={mode:"open"},null==I||I({ReactiveElement:D}),(null!==(T=A.reactiveElementVersions)&&void 0!==T?T:A.reactiveElementVersions=[]).push("1.6.3");const H=window,F=H.trustedTypes,B=F?F.createPolicy("lit-html",{createHTML:e=>e}):void 0,j="$lit$",z=`lit$${(Math.random()+"").slice(9)}$`,U="?"+z,K=`<${U}>`,W=document,V=()=>W.createComment(""),G=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Z=Array.isArray,q=e=>Z(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),Y="[ \t\n\f\r]",J=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,X=/-->/g,Q=/>/g,ee=RegExp(`>|${Y}(?:([^\\s"'>=/]+)(${Y}*=${Y}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),te=/'/g,re=/"/g,ie=/^(?:script|style|textarea|title)$/i,ne=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),oe=ne(1),se=(ne(2),Symbol.for("lit-noChange")),ae=Symbol.for("lit-nothing"),ce=new WeakMap,de=W.createTreeWalker(W,129,null,!1);function le(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==B?B.createHTML(t):t}const he=(e,t)=>{const r=e.length-1,i=[];let n,o=2===t?"<svg>":"",s=J;for(let t=0;t<r;t++){const r=e[t];let a,c,d=-1,l=0;for(;l<r.length&&(s.lastIndex=l,c=s.exec(r),null!==c);)l=s.lastIndex,s===J?"!--"===c[1]?s=X:void 0!==c[1]?s=Q:void 0!==c[2]?(ie.test(c[2])&&(n=RegExp("</"+c[2],"g")),s=ee):void 0!==c[3]&&(s=ee):s===ee?">"===c[0]?(s=null!=n?n:J,d=-1):void 0===c[1]?d=-2:(d=s.lastIndex-c[2].length,a=c[1],s=void 0===c[3]?ee:'"'===c[3]?re:te):s===re||s===te?s=ee:s===X||s===Q?s=J:(s=ee,n=void 0);const h=s===ee&&e[t+1].startsWith("/>")?" ":"";o+=s===J?r+K:d>=0?(i.push(a),r.slice(0,d)+j+r.slice(d)+z+h):r+z+(-2===d?(i.push(void 0),t):h)}return[le(e,o+(e[r]||"<?>")+(2===t?"</svg>":"")),i]};class ue{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let n=0,o=0;const s=e.length-1,a=this.parts,[c,d]=he(e,t);if(this.el=ue.createElement(c,r),de.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=de.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(j)||t.startsWith(z)){const r=d[o++];if(e.push(t),void 0!==r){const e=i.getAttribute(r.toLowerCase()+j).split(z),t=/([.?@])?(.*)/.exec(r);a.push({type:1,index:n,name:t[2],strings:e,ctor:"."===t[1]?be:"?"===t[1]?ye:"@"===t[1]?_e:ge})}else a.push({type:6,index:n})}for(const t of e)i.removeAttribute(t)}if(ie.test(i.tagName)){const e=i.textContent.split(z),t=e.length-1;if(t>0){i.textContent=F?F.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],V()),de.nextNode(),a.push({type:2,index:++n});i.append(e[t],V())}}}else if(8===i.nodeType)if(i.data===U)a.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(z,e+1));)a.push({type:7,index:n}),e+=z.length-1}n++}}static createElement(e,t){const r=W.createElement("template");return r.innerHTML=e,r}}function pe(e,t,r=e,i){var n,o,s,a;if(t===se)return t;let c=void 0!==i?null===(n=r._$Co)||void 0===n?void 0:n[i]:r._$Cl;const d=G(t)?void 0:t._$litDirective$;return(null==c?void 0:c.constructor)!==d&&(null===(o=null==c?void 0:c._$AO)||void 0===o||o.call(c,!1),void 0===d?c=void 0:(c=new d(e),c._$AT(e,r,i)),void 0!==i?(null!==(s=(a=r)._$Co)&&void 0!==s?s:a._$Co=[])[i]=c:r._$Cl=c),void 0!==c&&(t=pe(e,c._$AS(e,t.values),c,i)),t}class me{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:r},parts:i}=this._$AD,n=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:W).importNode(r,!0);de.currentNode=n;let o=de.nextNode(),s=0,a=0,c=i[0];for(;void 0!==c;){if(s===c.index){let t;2===c.type?t=new fe(o,o.nextSibling,this,e):1===c.type?t=new c.ctor(o,c.name,c.strings,this,e):6===c.type&&(t=new xe(o,this,e)),this._$AV.push(t),c=i[++a]}s!==(null==c?void 0:c.index)&&(o=de.nextNode(),s++)}return de.currentNode=W,n}v(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class fe{constructor(e,t,r,i){var n;this.type=2,this._$AH=ae,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cp=null===(n=null==i?void 0:i.isConnected)||void 0===n||n}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=pe(this,e,t),G(e)?e===ae||null==e||""===e?(this._$AH!==ae&&this._$AR(),this._$AH=ae):e!==this._$AH&&e!==se&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):q(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ae&&G(this._$AH)?this._$AA.nextSibling.data=e:this.$(W.createTextNode(e)),this._$AH=e}g(e){var t;const{values:r,_$litType$:i}=e,n="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=ue.createElement(le(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===n)this._$AH.v(r);else{const e=new me(n,this),t=e.u(this.options);e.v(r),this.$(t),this._$AH=e}}_$AC(e){let t=ce.get(e.strings);return void 0===t&&ce.set(e.strings,t=new ue(e)),t}T(e){Z(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,i=0;for(const n of e)i===t.length?t.push(r=new fe(this.k(V()),this.k(V()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class ge{constructor(e,t,r,i,n){this.type=1,this._$AH=ae,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ae}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,r,i){const n=this.strings;let o=!1;if(void 0===n)e=pe(this,e,t,0),o=!G(e)||e!==this._$AH&&e!==se,o&&(this._$AH=e);else{const i=e;let s,a;for(e=n[0],s=0;s<n.length-1;s++)a=pe(this,i[r+s],t,s),a===se&&(a=this._$AH[s]),o||(o=!G(a)||a!==this._$AH[s]),a===ae?e=ae:e!==ae&&(e+=(null!=a?a:"")+n[s+1]),this._$AH[s]=a}o&&!i&&this.j(e)}j(e){e===ae?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class be extends ge{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ae?void 0:e}}const ve=F?F.emptyScript:"";class ye extends ge{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ae?this.element.setAttribute(this.name,ve):this.element.removeAttribute(this.name)}}class _e extends ge{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){var r;if((e=null!==(r=pe(this,e,t,0))&&void 0!==r?r:ae)===se)return;const i=this._$AH,n=e===ae&&i!==ae||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==ae&&(i===ae||n);n&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==r?r:this.element,e):this._$AH.handleEvent(e)}}class xe{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){pe(this,e)}}const ke={O:j,P:z,A:U,C:1,M:he,L:me,R:q,D:pe,I:fe,V:ge,H:ye,N:_e,U:be,F:xe},we=H.litHtmlPolyfillSupport;null==we||we(ue,fe),(null!==($=H.litHtmlVersions)&&void 0!==$?$:H.litHtmlVersions=[]).push("2.8.0");const Se=(e,t,r)=>{var i,n;const o=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:t;let s=o._$litPart$;if(void 0===s){const e=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:null;o._$litPart$=s=new fe(t.insertBefore(V(),e),e,void 0,null!=r?r:{})}return s._$AI(e),s};var Ee,Ce;class Te extends D{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const r=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=r.firstChild),r}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Se(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return se}}Te.finalized=!0,Te._$litElement$=!0,null===(Ee=globalThis.litElementHydrateSupport)||void 0===Ee||Ee.call(globalThis,{LitElement:Te});const Ae=globalThis.litElementPolyfillSupport;null==Ae||Ae({LitElement:Te});(null!==(Ce=globalThis.litElementVersions)&&void 0!==Ce?Ce:globalThis.litElementVersions=[]).push("3.3.3");function Re(e){return{addClass:t=>{e.classList.add(t)},removeClass:t=>{e.classList.remove(t)},hasClass:t=>e.classList.contains(t)}}let Oe=!1;const Ie=()=>{},Ne={get passive(){return Oe=!0,!1}};document.addEventListener("x",Ie,Ne),document.removeEventListener("x",Ie);class Me extends Te{click(){if(this.mdcRoot)return this.mdcRoot.focus(),void this.mdcRoot.click();super.click()}createFoundation(){void 0!==this.mdcFoundation&&this.mdcFoundation.destroy(),this.mdcFoundationClass&&(this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init())}firstUpdated(){this.createFoundation()}}var Pe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();var Le={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},De={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},$e={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var He=["touchstart","pointerdown","mousedown","keydown"],Fe=["touchend","pointerup","mouseup","contextmenu"],Be=[],je=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(e){i.activateImpl(e)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Le},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return De},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return $e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,r=this.supportsPressRipple();if(this.registerRootHandlers(r),r){var i=t.cssClasses,n=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(n),e.adapter.isUnbounded()&&(e.adapter.addClass(o),e.layoutInternal())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var r=t.cssClasses,i=r.ROOT,n=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(i),e.adapter.removeClass(n),e.removeCssVars()}))}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(e){this.activateImpl(e)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var e=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame((function(){e.layoutInternal(),e.layoutFrame=0}))},t.prototype.setUnbounded=function(e){var r=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(r):this.adapter.removeClass(r)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(e){var t,r;if(e){try{for(var i=a(He),n=i.next();!n.done;n=i.next()){var o=n.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(e){var t,r;if("keydown"===e.type)this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var i=a(Fe),n=i.next();!n.done;n=i.next()){var o=n.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.deregisterRootHandlers=function(){var e,t;try{for(var r=a(He),i=r.next();!i.done;i=r.next()){var n=i.value;this.adapter.deregisterInteractionHandler(n,this.activateHandler)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var e,t;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var r=a(Fe),i=r.next();!i.done;i=r.next()){var n=i.value;this.adapter.deregisterDocumentInteractionHandler(n,this.deactivateHandler)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.removeCssVars=function(){var e=this,r=t.strings;Object.keys(r).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(r[t],null)}))},t.prototype.activateImpl=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var r=this.activationState;if(!r.isActivated){var i=this.previousActivationEvent;if(!(i&&void 0!==e&&i.type!==e.type))r.isActivated=!0,r.isProgrammatic=void 0===e,r.activationEvent=e,r.wasActivatedByPointer=!r.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&Be.length>0&&Be.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState():(void 0!==e&&(Be.push(e.target),this.registerDeactivationHandlers(e)),r.wasElementMadeActive=this.checkElementMadeActive(e),r.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame((function(){Be=[],r.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(r.wasElementMadeActive=t.checkElementMadeActive(e),r.wasElementMadeActive&&t.animateActivation()),r.wasElementMadeActive||(t.activationState=t.defaultActivationState())})))}}},t.prototype.checkElementMadeActive=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation=function(){var e=this,r=t.strings,i=r.VAR_FG_TRANSLATE_START,n=r.VAR_FG_TRANSLATE_END,o=t.cssClasses,s=o.FG_DEACTIVATION,a=o.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var d="",l="";if(!this.adapter.isUnbounded()){var h=this.getFgTranslationCoordinates(),u=h.startPoint,p=h.endPoint;d=u.x+"px, "+u.y+"px",l=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(i,d),this.adapter.updateCssVariable(n,l),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(s),this.adapter.computeBoundingRect(),this.adapter.addClass(a),this.activationTimer=setTimeout((function(){e.activationTimerCallback()}),c)},t.prototype.getFgTranslationCoordinates=function(){var e,t=this.activationState,r=t.activationEvent;return e=t.wasActivatedByPointer?function(e,t,r){if(!e)return{x:0,y:0};var i,n,o=t.x,s=t.y,a=o+r.left,c=s+r.top;if("touchstart"===e.type){var d=e;i=d.changedTouches[0].pageX-a,n=d.changedTouches[0].pageY-c}else{var l=e;i=l.pageX-a,n=l.pageY-c}return{x:i,y:n}}(r,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame.width/2,y:this.frame.height/2},{startPoint:e={x:e.x-this.initialSize/2,y:e.y-this.initialSize/2},endPoint:{x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2}}},t.prototype.runDeactivationUXLogicIfReady=function(){var e=this,r=t.cssClasses.FG_DEACTIVATION,i=this.activationState,n=i.hasDeactivationUXRun,o=i.isActivated;(n||!o)&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(r),this.fgDeactivationRemovalTimer=setTimeout((function(){e.adapter.removeClass(r)}),$e.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var e=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout((function(){return e.previousActivationEvent=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var e=this,t=this.activationState;if(t.isActivated){var r=o({},t);t.isProgrammatic?(requestAnimationFrame((function(){e.animateDeactivation(r)})),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame((function(){e.activationState.hasDeactivationUXRun=!0,e.animateDeactivation(r),e.resetActivationState()})))}},t.prototype.animateDeactivation=function(e){var t=e.wasActivatedByPointer,r=e.wasElementMadeActive;(t||r)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var e=this;this.frame=this.adapter.computeBoundingRect();var r=Math.max(this.frame.height,this.frame.width);this.maxRadius=this.adapter.isUnbounded()?r:Math.sqrt(Math.pow(e.frame.width,2)+Math.pow(e.frame.height,2))+t.numbers.PADDING;var i=Math.floor(r*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&i%2!=0?this.initialSize=i-1:this.initialSize=i,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var e=t.strings,r=e.VAR_FG_SIZE,i=e.VAR_LEFT,n=e.VAR_TOP,o=e.VAR_FG_SCALE;this.adapter.updateCssVariable(r,this.initialSize+"px"),this.adapter.updateCssVariable(o,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(i,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(n,this.unboundedCoords.top+"px"))},t}(Pe);const ze=je,Ue=1,Ke=2,We=e=>(...t)=>({_$litDirective$:e,values:t});class Ve{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const Ge=We(class extends Ve{constructor(e){var t;if(super(e),e.type!==Ue||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var r,i;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(r=this.nt)||void 0===r?void 0:r.has(e))&&this.it.add(e);return this.render(t)}const n=e.element.classList;this.it.forEach((e=>{e in t||(n.remove(e),this.it.delete(e))}));for(const e in t){const r=!!t[e];r===this.it.has(e)||(null===(i=this.nt)||void 0===i?void 0:i.has(e))||(r?(n.add(e),this.it.add(e)):(n.remove(e),this.it.delete(e)))}return se}}),Ze="important",qe=" !"+Ze,Ye=We(class extends Ve{constructor(e){var t;if(super(e),e.type!==Ue||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{const i=e[r];return null==i?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:r}=e.element;if(void 0===this.ht){this.ht=new Set;for(const e in t)this.ht.add(e);return this.render(t)}this.ht.forEach((e=>{null==t[e]&&(this.ht.delete(e),e.includes("-")?r.removeProperty(e):r[e]="")}));for(const e in t){const i=t[e];if(null!=i){this.ht.add(e);const t="string"==typeof i&&i.endsWith(qe);e.includes("-")||t?r.setProperty(e,t?i.slice(0,-11):i,t?Ze:""):r[e]=i}}return se}});class Je extends Me{constructor(){super(...arguments),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.activated=!1,this.selected=!1,this.internalUseStateLayerCustomProperties=!1,this.hovering=!1,this.bgFocused=!1,this.fgActivation=!1,this.fgDeactivation=!1,this.fgScale="",this.fgSize="",this.translateStart="",this.translateEnd="",this.leftPos="",this.topPos="",this.mdcFoundationClass=ze}get isActive(){return y(this.parentElement||this,":active")}createAdapter(){return{browserSupportsCssVars:()=>!0,isUnbounded:()=>this.unbounded,isSurfaceActive:()=>this.isActive,isSurfaceDisabled:()=>this.disabled,addClass:e=>{switch(e){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!0;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!0;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!0}},removeClass:e=>{switch(e){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!1;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!1;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!1}},containsEventTarget:()=>!0,registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:(e,t)=>{switch(e){case"--mdc-ripple-fg-scale":this.fgScale=t;break;case"--mdc-ripple-fg-size":this.fgSize=t;break;case"--mdc-ripple-fg-translate-end":this.translateEnd=t;break;case"--mdc-ripple-fg-translate-start":this.translateStart=t;break;case"--mdc-ripple-left":this.leftPos=t;break;case"--mdc-ripple-top":this.topPos=t}},computeBoundingRect:()=>(this.parentElement||this).getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}startPress(e){this.waitForFoundation((()=>{this.mdcFoundation.activate(e)}))}endPress(){this.waitForFoundation((()=>{this.mdcFoundation.deactivate()}))}startFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleFocus()}))}endFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleBlur()}))}startHover(){this.hovering=!0}endHover(){this.hovering=!1}waitForFoundation(e){this.mdcFoundation?e():this.updateComplete.then(e)}update(e){e.has("disabled")&&this.disabled&&this.endHover(),super.update(e)}render(){const e=this.activated&&(this.primary||!this.accent),t=this.selected&&(this.primary||!this.accent),r={"mdc-ripple-surface--accent":this.accent,"mdc-ripple-surface--primary--activated":e,"mdc-ripple-surface--accent--activated":this.accent&&this.activated,"mdc-ripple-surface--primary--selected":t,"mdc-ripple-surface--accent--selected":this.accent&&this.selected,"mdc-ripple-surface--disabled":this.disabled,"mdc-ripple-surface--hover":this.hovering,"mdc-ripple-surface--primary":this.primary,"mdc-ripple-surface--selected":this.selected,"mdc-ripple-upgraded--background-focused":this.bgFocused,"mdc-ripple-upgraded--foreground-activation":this.fgActivation,"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation,"mdc-ripple-upgraded--unbounded":this.unbounded,"mdc-ripple-surface--internal-use-state-layer-custom-properties":this.internalUseStateLayerCustomProperties};return oe`
        <div class="mdc-ripple-surface mdc-ripple-upgraded ${Ge(r)}"
          style="${Ye({"--mdc-ripple-fg-scale":this.fgScale,"--mdc-ripple-fg-size":this.fgSize,"--mdc-ripple-fg-translate-end":this.translateEnd,"--mdc-ripple-fg-translate-start":this.translateStart,"--mdc-ripple-left":this.leftPos,"--mdc-ripple-top":this.topPos})}"></div>`}}s([g(".mdc-ripple-surface")],Je.prototype,"mdcRoot",void 0),s([u({type:Boolean})],Je.prototype,"primary",void 0),s([u({type:Boolean})],Je.prototype,"accent",void 0),s([u({type:Boolean})],Je.prototype,"unbounded",void 0),s([u({type:Boolean})],Je.prototype,"disabled",void 0),s([u({type:Boolean})],Je.prototype,"activated",void 0),s([u({type:Boolean})],Je.prototype,"selected",void 0),s([u({type:Boolean})],Je.prototype,"internalUseStateLayerCustomProperties",void 0),s([p()],Je.prototype,"hovering",void 0),s([p()],Je.prototype,"bgFocused",void 0),s([p()],Je.prototype,"fgActivation",void 0),s([p()],Je.prototype,"fgDeactivation",void 0),s([p()],Je.prototype,"fgScale",void 0),s([p()],Je.prototype,"fgSize",void 0),s([p()],Je.prototype,"translateStart",void 0),s([p()],Je.prototype,"translateEnd",void 0),s([p()],Je.prototype,"leftPos",void 0),s([p()],Je.prototype,"topPos",void 0);const Xe=E`.mdc-ripple-surface{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity;position:relative;outline:none;overflow:hidden}.mdc-ripple-surface::before,.mdc-ripple-surface::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-ripple-surface::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-ripple-surface::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-ripple-surface.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-ripple-surface.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface::before,.mdc-ripple-surface::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-ripple-surface.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded],.mdc-ripple-upgraded--unbounded{overflow:visible}.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::after,.mdc-ripple-upgraded--unbounded::before,.mdc-ripple-upgraded--unbounded::after{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::before,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{top:var(--mdc-ripple-top, calc(50% - 50%));left:var(--mdc-ripple-left, calc(50% - 50%));width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface::before,.mdc-ripple-surface::after{background-color:#000;background-color:var(--mdc-ripple-color, #000)}.mdc-ripple-surface:hover::before,.mdc-ripple-surface.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:block}:host .mdc-ripple-surface{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;will-change:unset}.mdc-ripple-surface--primary::before,.mdc-ripple-surface--primary::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary:hover::before,.mdc-ripple-surface--primary.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--primary.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before,.mdc-ripple-surface--primary--activated::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--activated:hover::before,.mdc-ripple-surface--primary--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--primary--selected::before,.mdc-ripple-surface--primary--selected::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--selected:hover::before,.mdc-ripple-surface--primary--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent::before,.mdc-ripple-surface--accent::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent:hover::before,.mdc-ripple-surface--accent.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--accent.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before,.mdc-ripple-surface--accent--activated::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--activated:hover::before,.mdc-ripple-surface--accent--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--accent--selected::before,.mdc-ripple-surface--accent--selected::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--selected:hover::before,.mdc-ripple-surface--accent--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--disabled{opacity:0}.mdc-ripple-surface--internal-use-state-layer-custom-properties::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties::after{background-color:#000;background-color:var(--mdc-ripple-hover-state-layer-color, #000)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:hover::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-state-layer-opacity, 0.04)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}`;let Qe=class extends Je{};function et(e,t,r){if(void 0!==t)return function(e,t,r){const i=e.constructor;if(!r){const e=`__${t}`;if(!(r=i.getPropertyDescriptor(t,e)))throw new Error("@ariaProperty must be used after a @property decorator")}const n=r;let o="";if(!n.set)throw new Error(`@ariaProperty requires a setter for ${t}`);if(e.dispatchWizEvent)return r;const s={configurable:!0,enumerable:!0,set(e){if(""===o){const e=i.getPropertyOptions(t);o="string"==typeof e.attribute?e.attribute:t}this.hasAttribute(o)&&this.removeAttribute(o),n.set.call(this,e)}};return n.get&&(s.get=function(){return n.get.call(this)}),s}(e,t,r);throw new Error("@ariaProperty only supports TypeScript Decorators")}Qe.styles=[Xe],Qe=s([d("mwc-ripple")],Qe);class tt{constructor(e){this.startPress=t=>{e().then((e=>{e&&e.startPress(t)}))},this.endPress=()=>{e().then((e=>{e&&e.endPress()}))},this.startFocus=()=>{e().then((e=>{e&&e.startFocus()}))},this.endFocus=()=>{e().then((e=>{e&&e.endFocus()}))},this.startHover=()=>{e().then((e=>{e&&e.startHover()}))},this.endHover=()=>{e().then((e=>{e&&e.endHover()}))}}}const rt=e=>null!=e?e:ae;class it extends Te{constructor(){super(...arguments),this.disabled=!1,this.icon="",this.shouldRenderRipple=!1,this.rippleHandlers=new tt((()=>(this.shouldRenderRipple=!0,this.ripple)))}renderRipple(){return this.shouldRenderRipple?oe`
            <mwc-ripple
                .disabled="${this.disabled}"
                unbounded>
            </mwc-ripple>`:""}focus(){const e=this.buttonElement;e&&(this.rippleHandlers.startFocus(),e.focus())}blur(){const e=this.buttonElement;e&&(this.rippleHandlers.endFocus(),e.blur())}render(){return oe`<button
        class="mdc-icon-button mdc-icon-button--display-flex"
        aria-label="${this.ariaLabel||this.icon}"
        aria-haspopup="${rt(this.ariaHasPopup)}"
        ?disabled="${this.disabled}"
        @focus="${this.handleRippleFocus}"
        @blur="${this.handleRippleBlur}"
        @mousedown="${this.handleRippleMouseDown}"
        @mouseenter="${this.handleRippleMouseEnter}"
        @mouseleave="${this.handleRippleMouseLeave}"
        @touchstart="${this.handleRippleTouchStart}"
        @touchend="${this.handleRippleDeactivate}"
        @touchcancel="${this.handleRippleDeactivate}"
    >${this.renderRipple()}
    ${this.icon?oe`<i class="material-icons">${this.icon}</i>`:""}
    <span
      ><slot></slot
    ></span>
  </button>`}handleRippleMouseDown(e){const t=()=>{window.removeEventListener("mouseup",t),this.handleRippleDeactivate()};window.addEventListener("mouseup",t),this.rippleHandlers.startPress(e)}handleRippleTouchStart(e){this.rippleHandlers.startPress(e)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}s([u({type:Boolean,reflect:!0})],it.prototype,"disabled",void 0),s([u({type:String})],it.prototype,"icon",void 0),s([et,u({type:String,attribute:"aria-label"})],it.prototype,"ariaLabel",void 0),s([et,u({type:String,attribute:"aria-haspopup"})],it.prototype,"ariaHasPopup",void 0),s([g("button")],it.prototype,"buttonElement",void 0),s([b("mwc-ripple")],it.prototype,"ripple",void 0),s([p()],it.prototype,"shouldRenderRipple",void 0),s([f({passive:!0})],it.prototype,"handleRippleMouseDown",null),s([f({passive:!0})],it.prototype,"handleRippleTouchStart",null);const nt=E`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{display:none}.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block;max-height:48px;max-width:48px}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}}@media screen and (forced-colors: active)and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring::after,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring::after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}}@media screen and (forced-colors: active)and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring::after,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button.mdc-icon-button--reduced-size:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button:disabled{color:rgba(0, 0, 0, 0.38);color:var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38))}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:transparent;fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:transparent;fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}:host{display:inline-block;outline:none}:host([disabled]){pointer-events:none}.mdc-icon-button i,.mdc-icon-button svg,.mdc-icon-button img,.mdc-icon-button ::slotted(*){display:block}:host{--mdc-ripple-color: currentcolor;-webkit-tap-highlight-color:transparent}:host,.mdc-icon-button{vertical-align:top}.mdc-icon-button{width:var(--mdc-icon-button-size, 48px);height:var(--mdc-icon-button-size, 48px);padding:calc( (var(--mdc-icon-button-size, 48px) - var(--mdc-icon-size, 24px)) / 2 )}.mdc-icon-button i,.mdc-icon-button svg,.mdc-icon-button img,.mdc-icon-button ::slotted(*){display:block;width:var(--mdc-icon-size, 24px);height:var(--mdc-icon-size, 24px)}`;let ot=class extends it{};ot.styles=[nt],ot=s([d("mwc-icon-button")],ot);const st=Symbol("LitMobxRenderReaction"),at=Symbol("LitMobxRequestUpdate");var ct=function(e,t){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ct(e,t)};var dt=function(){return dt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},dt.apply(this,arguments)};function lt(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function ht(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function ut(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ht(arguments[t]));return e}var pt="An invariant failed, however the error is obfuscated because this is a production build.",mt=[];Object.freeze(mt);var ft={};function gt(){return++Pr.mobxGuid}function bt(e){throw vt(!1,e),"X"}function vt(e,t){if(!e)throw new Error("[mobx] "+(t||pt))}Object.freeze(ft);function yt(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var _t=function(){};function xt(e){return null!==e&&"object"==typeof e}function kt(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function wt(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function St(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return xt(e)&&!0===e[r]}}function Et(e){return e instanceof Map}function Ct(e){return e instanceof Set}function Tt(e){var t=new Set;for(var r in e)t.add(r);return Object.getOwnPropertySymbols(e).forEach((function(r){Object.getOwnPropertyDescriptor(e,r).enumerable&&t.add(r)})),Array.from(t)}function At(e){return e&&e.toString?e.toString():new String(e).toString()}function Rt(e){return null===e?null:"object"==typeof e?""+e:e}var Ot=Symbol("mobx administration"),It=function(){function e(e){void 0===e&&(e="Atom@"+gt()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=er.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.reportObserved=function(){return Br(this)},e.prototype.reportChanged=function(){Hr(),function(e){if(e.lowestObserverState===er.STALE)return;e.lowestObserverState=er.STALE,e.observers.forEach((function(t){t.dependenciesState===er.UP_TO_DATE&&(t.isTracing!==tr.NONE&&jr(t,e),t.onBecomeStale()),t.dependenciesState=er.STALE}))}(this),Fr()},e.prototype.toString=function(){return this.name},e}(),Nt=St("Atom",It);function Mt(e,t,r){void 0===t&&(t=_t),void 0===r&&(r=_t);var i,n=new It(e);return t!==_t&&ni("onBecomeObserved",n,t,i),r!==_t&&ii(n,r),n}var Pt={identity:function(e,t){return e===t},structural:function(e,t){return Xi(e,t)},default:function(e,t){return Object.is(e,t)},shallow:function(e,t){return Xi(e,t,1)}},Lt=Symbol("mobx did run lazy initializers"),Dt=Symbol("mobx pending decorators"),$t={},Ht={};function Ft(e){var t,r;if(!0!==e[Lt]){var i=e[Dt];if(i){wt(e,Lt,!0);var n=ut(Object.getOwnPropertySymbols(i),Object.keys(i));try{for(var o=lt(n),s=o.next();!s.done;s=o.next()){var a=i[s.value];a.propertyCreator(e,a.prop,a.descriptor,a.decoratorTarget,a.decoratorArguments)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}}}function Bt(e,t){return function(){var r,i,n=function(i,n,o,s){if(!0===s)return t(i,n,o,i,r),null;if(!Object.prototype.hasOwnProperty.call(i,Dt)){var a=i[Dt];wt(i,Dt,dt({},a))}return i[Dt][n]={prop:n,propertyCreator:t,descriptor:o,decoratorTarget:i,decoratorArguments:r},function(e,t){var r=t?$t:Ht;return r[e]||(r[e]={configurable:!0,enumerable:t,get:function(){return Ft(this),this[e]},set:function(t){Ft(this),this[e]=t}})}(n,e)};return(2===(i=arguments).length||3===i.length)&&("string"==typeof i[1]||"symbol"==typeof i[1])||4===i.length&&!0===i[3]?(r=mt,n.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),n)}}function jt(e,t,r){return ui(e)?e:Array.isArray(e)?Xt.array(e,{name:r}):kt(e)?Xt.object(e,void 0,{name:r}):Et(e)?Xt.map(e,{name:r}):Ct(e)?Xt.set(e,{name:r}):e}function zt(e){return e}function Ut(e){vt(e);var t=Bt(!0,(function(t,r,i,n,o){var s=i?i.initializer?i.initializer.call(t):i.value:void 0;Ui(t).addObservableProp(r,s,e)}));return t.enhancer=e,t}var Kt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Wt(e){return null==e?Kt:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(Kt);var Vt=Ut(jt),Gt=Ut((function(e,t,r){return null==e||Zi(e)||Pi(e)||Hi(e)||ji(e)?e:Array.isArray(e)?Xt.array(e,{name:r,deep:!1}):kt(e)?Xt.object(e,void 0,{name:r,deep:!1}):Et(e)?Xt.map(e,{name:r,deep:!1}):Ct(e)?Xt.set(e,{name:r,deep:!1}):bt(!1)})),Zt=Ut(zt),qt=Ut((function(e,t,r){return Xi(e,t)?t:e}));function Yt(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?zt:jt}var Jt={box:function(e,t){arguments.length>2&&Qt("box");var r=Wt(t);return new Sr(e,Yt(r),r.name,!0,r.equals)},array:function(e,t){arguments.length>2&&Qt("array");var r=Wt(t);return function(e,t,r,i){void 0===r&&(r="ObservableArray@"+gt());void 0===i&&(i=!1);var n=new Oi(r,t,i);o=n.values,s=Ot,a=n,Object.defineProperty(o,s,{enumerable:!1,writable:!1,configurable:!0,value:a});var o,s,a;var c=new Proxy(n.values,Ri);if(n.proxy=c,e&&e.length){var d=kr(!0);n.spliceWithArray(0,0,e),wr(d)}return c}(e,Yt(r),r.name)},map:function(e,t){arguments.length>2&&Qt("map");var r=Wt(t);return new $i(e,Yt(r),r.name)},set:function(e,t){arguments.length>2&&Qt("set");var r=Wt(t);return new Bi(e,Yt(r),r.name)},object:function(e,t,r){"string"==typeof arguments[1]&&Qt("object");var i=Wt(r);if(!1===i.proxy)return si({},e,t,i);var n=ai(i),o=function(e){var t=new Proxy(e,ki);return e[Ot].proxy=t,t}(si({},void 0,void 0,i));return ci(o,e,t,n),o},ref:Zt,shallow:Gt,deep:Vt,struct:qt},Xt=function(e,t,r){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return Vt.apply(null,arguments);if(ui(e))return e;var i=kt(e)?Xt.object(e,t,r):Array.isArray(e)?Xt.array(e,t):Et(e)?Xt.map(e,t):Ct(e)?Xt.set(e,t):e;if(i!==e)return i;bt(!1)};function Qt(e){bt("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(Jt).forEach((function(e){return Xt[e]=Jt[e]}));var er,tr,rr=Bt(!1,(function(e,t,r,i,n){var o=r.get,s=r.set,a=n[0]||{};Ui(e).addComputedProp(e,t,dt({get:o,set:s,context:e},a))})),ir=rr({equals:Pt.structural}),nr=function(e,t,r){if("string"==typeof t)return rr.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return rr.apply(null,arguments);var i="object"==typeof t?t:{};return i.get=e,i.set="function"==typeof t?t:i.set,i.name=i.name||e.name||"",new Cr(i)};nr.struct=ir,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(er||(er={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(tr||(tr={}));var or=function(e){this.cause=e};function sr(e){return e instanceof or}function ar(e){switch(e.dependenciesState){case er.UP_TO_DATE:return!1;case er.NOT_TRACKING:case er.STALE:return!0;case er.POSSIBLY_STALE:for(var t=mr(!0),r=ur(),i=e.observing,n=i.length,o=0;o<n;o++){var s=i[o];if(Tr(s)){if(Pr.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return pr(r),fr(t),!0}if(e.dependenciesState===er.STALE)return pr(r),fr(t),!0}}return gr(e),pr(r),fr(t),!1}}function cr(e){var t=e.observers.size>0;Pr.computationDepth>0&&t&&bt(!1),Pr.allowStateChanges||!t&&"strict"!==Pr.enforceActions||bt(!1)}function dr(e,t,r){var i=mr(!0);gr(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Pr.runId;var n,o=Pr.trackingDerivation;if(Pr.trackingDerivation=e,!0===Pr.disableErrorBoundaries)n=t.call(r);else try{n=t.call(r)}catch(e){n=new or(e)}return Pr.trackingDerivation=o,function(e){for(var t=e.observing,r=e.observing=e.newObserving,i=er.UP_TO_DATE,n=0,o=e.unboundDepsCount,s=0;s<o;s++){0===(a=r[s]).diffValue&&(a.diffValue=1,n!==s&&(r[n]=a),n++),a.dependenciesState>i&&(i=a.dependenciesState)}r.length=n,e.newObserving=null,o=t.length;for(;o--;){0===(a=t[o]).diffValue&&Dr(a,e),a.diffValue=0}for(;n--;){var a;1===(a=r[n]).diffValue&&(a.diffValue=0,Lr(a,e))}i!==er.UP_TO_DATE&&(e.dependenciesState=i,e.onBecomeStale())}(e),fr(i),n}function lr(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)Dr(t[r],e);e.dependenciesState=er.NOT_TRACKING}function hr(e){var t=ur();try{return e()}finally{pr(t)}}function ur(){var e=Pr.trackingDerivation;return Pr.trackingDerivation=null,e}function pr(e){Pr.trackingDerivation=e}function mr(e){var t=Pr.allowStateReads;return Pr.allowStateReads=e,t}function fr(e){Pr.allowStateReads=e}function gr(e){if(e.dependenciesState!==er.UP_TO_DATE){e.dependenciesState=er.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=er.UP_TO_DATE}}var br=0,vr=1,yr=Object.getOwnPropertyDescriptor((function(){}),"name");yr&&yr.configurable;function _r(e,t,r){var i=function(){return xr(e,t,r||this,arguments)};return i.isMobxAction=!0,i}function xr(e,t,r,i){var n=function(e,t,r){var i=!1,n=0;0;var o=ur();Hr();var s=kr(!0),a=mr(!0),c={prevDerivation:o,prevAllowStateChanges:s,prevAllowStateReads:a,notifySpy:i,startTime:n,actionId:vr++,parentActionId:br};return br=c.actionId,c}();try{return t.apply(r,i)}catch(e){throw n.error=e,e}finally{!function(e){br!==e.actionId&&bt("invalid action stack. did you forget to finish an action?");br=e.parentActionId,void 0!==e.error&&(Pr.suppressReactionErrors=!0);wr(e.prevAllowStateChanges),fr(e.prevAllowStateReads),Fr(),pr(e.prevDerivation),e.notifySpy;Pr.suppressReactionErrors=!1}(n)}}function kr(e){var t=Pr.allowStateChanges;return Pr.allowStateChanges=e,t}function wr(e){Pr.allowStateChanges=e}var Sr=function(e){function t(t,r,i,n,o){void 0===i&&(i="ObservableValue@"+gt()),void 0===n&&(n=!0),void 0===o&&(o=Pt.default);var s=e.call(this,i)||this;return s.enhancer=r,s.name=i,s.equals=o,s.hasUnreportedChange=!1,s.value=r(t,void 0,i),s}return function(e,t){function r(){this.constructor=e}ct(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==Pr.UNCHANGED){false,this.setNewValue(e)}},t.prototype.prepareNewValue=function(e){if(cr(this),wi(this)){var t=Ei(this,{object:this,type:"update",newValue:e});if(!t)return Pr.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Pr.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),Ci(this)&&Ai(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return Si(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ti(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return Rt(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(It),Er=St("ObservableValue",Sr),Cr=function(){function e(e){this.dependenciesState=er.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=er.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+gt(),this.value=new or(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=tr.NONE,vt(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+gt(),e.set&&(this.setter=_r(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Pt.structural:Pt.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==er.UP_TO_DATE)return;e.lowestObserverState=er.POSSIBLY_STALE,e.observers.forEach((function(t){t.dependenciesState===er.UP_TO_DATE&&(t.dependenciesState=er.POSSIBLY_STALE,t.isTracing!==tr.NONE&&jr(t,e),t.onBecomeStale())}))}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.get=function(){this.isComputing&&bt("Cycle detected in computation "+this.name+": "+this.derivation),0!==Pr.inBatch||0!==this.observers.size||this.keepAlive?(Br(this),ar(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===er.STALE)return;e.lowestObserverState=er.STALE,e.observers.forEach((function(t){t.dependenciesState===er.POSSIBLY_STALE?t.dependenciesState=er.STALE:t.dependenciesState===er.UP_TO_DATE&&(e.lowestObserverState=er.UP_TO_DATE)}))}(this)):ar(this)&&(this.warnAboutUntrackedRead(),Hr(),this.value=this.computeValue(!1),Fr());var e=this.value;if(sr(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(sr(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){vt(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else vt(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===er.NOT_TRACKING,r=this.computeValue(!0),i=t||sr(e)||sr(r)||!this.equals(e,r);return i&&(this.value=r),i},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Pr.computationDepth++,e)t=dr(this,this.derivation,this.scope);else if(!0===Pr.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new or(e)}return Pr.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(lr(this),this.value=void 0)},e.prototype.observe=function(e,t){var r=this,i=!0,n=void 0;return Qr((function(){var o=r.get();if(!i||t){var s=ur();e({type:"update",object:r,newValue:o,oldValue:n}),pr(s)}i=!1,n=o}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return Rt(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),Tr=St("ComputedValue",Cr),Ar=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Rr={};function Or(){return"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:Rr}var Ir,Nr=!0,Mr=!1,Pr=((Ir=Or()).__mobxInstanceCount>0&&!Ir.__mobxGlobals&&(Nr=!1),Ir.__mobxGlobals&&Ir.__mobxGlobals.version!==(new Ar).version&&(Nr=!1),Nr?Ir.__mobxGlobals?(Ir.__mobxInstanceCount+=1,Ir.__mobxGlobals.UNCHANGED||(Ir.__mobxGlobals.UNCHANGED={}),Ir.__mobxGlobals):(Ir.__mobxInstanceCount=1,Ir.__mobxGlobals=new Ar):(setTimeout((function(){Mr||bt("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ar));function Lr(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Dr(e,t){e.observers.delete(t),0===e.observers.size&&$r(e)}function $r(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Pr.pendingUnobservations.push(e))}function Hr(){Pr.inBatch++}function Fr(){if(0==--Pr.inBatch){Vr();for(var e=Pr.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof Cr&&r.suspend())}Pr.pendingUnobservations=[]}}function Br(e){var t=Pr.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&Pr.inBatch>0&&$r(e),!1)}function jr(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===tr.BREAK){var r=[];zr(di(qi(e,i)),r,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof Cr?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}var i}function zr(e,t,r){t.length>=1e3?t.push("(and many more)"):(t.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return zr(e,t,r+1)})))}var Ur=function(){function e(e,t,r,i){void 0===e&&(e="Reaction@"+gt()),void 0===i&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=er.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+gt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=tr.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pr.pendingReactions.push(this),Vr())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Hr(),this._isScheduled=!1,ar(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(e){this.reportExceptionInDerivation(e)}}Fr()}},e.prototype.track=function(e){if(!this.isDisposed){Hr();false,this._isRunning=!0;var t=dr(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&lr(this),sr(t)&&this.reportExceptionInDerivation(t.cause),Fr()}},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Pr.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Pr.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),Pr.globalReactionErrorHandlers.forEach((function(r){return r(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Hr(),lr(this),Fr()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[Ot]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var i=function(e){switch(e.length){case 0:return Pr.trackingDerivation;case 1:return qi(e[0]);case 2:return qi(e[0],e[1])}}(e);if(!i)return bt(!1);i.isTracing===tr.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled");i.isTracing=r?tr.BREAK:tr.LOG}(this,e)},e}();var Kr=100,Wr=function(e){return e()};function Vr(){Pr.inBatch>0||Pr.isRunningReactions||Wr(Gr)}function Gr(){Pr.isRunningReactions=!0;for(var e=Pr.pendingReactions,t=0;e.length>0;){++t===Kr&&(console.error("Reaction doesn't converge to a stable state after "+Kr+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),i=0,n=r.length;i<n;i++)r[i].runReaction()}Pr.isRunningReactions=!1}var Zr=St("Reaction",Ur);function qr(){bt(!1)}function Yr(e){return function(t,r,i){if(i){if(i.value)return{value:_r(e,i.value),enumerable:!1,configurable:!0,writable:!0};var n=i.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return _r(e,n.call(this))}}}return function(e){return function(t,r,i){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){},set:function(t){wt(this,r,Jr(e,t))}})}}(e).apply(this,arguments)}}var Jr=function(e,t,r,i){return 1===arguments.length&&"function"==typeof e?_r(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?_r(e,t):1===arguments.length&&"string"==typeof e?Yr(e):!0!==i?Yr(t).apply(null,arguments):void wt(e,t,_r(e.name||t,r.value,this))};function Xr(e,t,r){wt(e,t,_r(t,r.bind(e)))}function Qr(e,t){void 0===t&&(t=ft);var r,i=t&&t.name||e.name||"Autorun@"+gt();if(!t.scheduler&&!t.delay)r=new Ur(i,(function(){this.track(s)}),t.onError,t.requiresObservable);else{var n=ti(t),o=!1;r=new Ur(i,(function(){o||(o=!0,n((function(){o=!1,r.isDisposed||r.track(s)})))}),t.onError,t.requiresObservable)}function s(){e(r)}return r.schedule(),r.getDisposer()}Jr.bound=function(e,t,r,i){return!0===i?(Xr(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return Xr(this,t,r.value||r.initializer.call(this)),this[t]},set:qr}:{enumerable:!1,configurable:!0,set:function(e){Xr(this,t,e)},get:function(){}}};var ei=function(e){return e()};function ti(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ei}function ri(e,t,r){void 0===r&&(r=ft);var i,n,o,s=r.name||"Reaction@"+gt(),a=Jr(s,r.onError?(i=r.onError,n=t,function(){try{return n.apply(this,arguments)}catch(e){i.call(this,e)}}):t),c=!r.scheduler&&!r.delay,d=ti(r),l=!0,h=!1,u=r.compareStructural?Pt.structural:r.equals||Pt.default,p=new Ur(s,(function(){l||c?m():h||(h=!0,d(m))}),r.onError,r.requiresObservable);function m(){if(h=!1,!p.isDisposed){var t=!1;p.track((function(){var r=e(p);t=l||!u(o,r),o=r})),l&&r.fireImmediately&&a(o,p),l||!0!==t||a(o,p),l&&(l=!1)}}return p.schedule(),p.getDisposer()}function ii(e,t,r){return ni("onBecomeUnobserved",e,t,r)}function ni(e,t,r,i){var n="function"==typeof i?qi(t,r):qi(t),o="function"==typeof i?i:r,s=e+"Listeners";return n[s]?n[s].add(o):n[s]=new Set([o]),"function"!=typeof n[e]?bt(!1):function(){var e=n[s];e&&(e.delete(o),0===e.size&&delete n[s])}}function oi(e,t){var r="function"==typeof e?e.prototype:e,i=function(e){var i=t[e];Array.isArray(i)||(i=[i]);var n=Object.getOwnPropertyDescriptor(r,e),o=i.reduce((function(t,i){return i(r,e,t)}),n);o&&Object.defineProperty(r,e,o)};for(var n in t)i(n);return e}function si(e,t,r,i){var n=ai(i=Wt(i));return Ft(e),Ui(e,i.name,n.enhancer),t&&ci(e,t,r,n),e}function ai(e){return e.defaultDecorator||(!1===e.deep?Zt:Vt)}function ci(e,t,r,i){var n,o;Hr();try{var s=Tt(t);try{for(var a=lt(s),c=a.next();!c.done;c=a.next()){var d=c.value,l=Object.getOwnPropertyDescriptor(t,d);0;var h=(r&&d in r?r[d]:l.get?rr:i)(e,d,l,!0);h&&Object.defineProperty(e,d,h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}finally{Fr()}}function di(e){var t,r,i={name:e.name};return e.observing&&e.observing.length>0&&(i.dependencies=(t=e.observing,r=[],t.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r).map(di)),i}function li(){this.message="FLOW_CANCELLED"}function hi(e,t){return null!=e&&(void 0!==t?!!Zi(e)&&e[Ot].values.has(t):Zi(e)||!!e[Ot]||Nt(e)||Zr(e)||Tr(e))}function ui(e){return 1!==arguments.length&&bt(!1),hi(e)}function pi(e){return Zi(e)?e[Ot].getKeys():Hi(e)||ji(e)?Array.from(e.keys()):Pi(e)?e.map((function(e,t){return t})):bt(!1)}function mi(e,t,r){if(2!==arguments.length||ji(e))if(Zi(e)){var i=e[Ot];i.values.get(t)?i.write(t,r):i.addObservableProp(t,r,i.defaultEnhancer)}else if(Hi(e))e.set(t,r);else if(ji(e))e.add(t);else{if(!Pi(e))return bt(!1);"number"!=typeof t&&(t=parseInt(t,10)),vt(t>=0,"Not a valid index: '"+t+"'"),Hr(),t>=e.length&&(e.length=t+1),e[t]=r,Fr()}else{Hr();var n=t;try{for(var o in n)mi(e,o,n[o])}finally{Fr()}}}li.prototype=Object.create(Error.prototype);var fi={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function gi(e,t,r,i){return i.detectCycles&&e.set(t,r),r}function bi(e,t,r){if(!t.recurseEverything&&!ui(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(Er(e))return bi(e.get(),t,r);if(ui(e)&&pi(e),!0===t.detectCycles&&null!==e&&r.has(e))return r.get(e);if(Pi(e)||Array.isArray(e)){var i=gi(r,e,[],t),n=e.map((function(e){return bi(e,t,r)}));i.length=n.length;for(var o=0,s=n.length;o<s;o++)i[o]=n[o];return i}if(ji(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===t.exportMapsAsObjects){var a=gi(r,e,new Set,t);return e.forEach((function(e){a.add(bi(e,t,r))})),a}var c=gi(r,e,[],t);return e.forEach((function(e){c.push(bi(e,t,r))})),c}if(Hi(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===t.exportMapsAsObjects){var d=gi(r,e,new Map,t);return e.forEach((function(e,i){d.set(i,bi(e,t,r))})),d}var l=gi(r,e,{},t);return e.forEach((function(e,i){l[i]=bi(e,t,r)})),l}var h=gi(r,e,{},t);return Tt(e).forEach((function(i){h[i]=bi(e[i],t,r)})),h}function vi(e,t){var r;return"boolean"==typeof t&&(t={detectCycles:t}),t||(t=fi),t.detectCycles=void 0===t.detectCycles?!0===t.recurseEverything:!0===t.detectCycles,t.detectCycles&&(r=new Map),bi(e,t,r)}function yi(e,t){void 0===t&&(t=void 0),Hr();try{return e.apply(t)}finally{Fr()}}function _i(e){return e[Ot]}function xi(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e}var ki={has:function(e,t){if(t===Ot||"constructor"===t||t===Lt)return!0;var r=_i(e);return xi(t)?r.has(t):t in e},get:function(e,t){if(t===Ot||"constructor"===t||t===Lt)return e[t];var r=_i(e),i=r.values.get(t);if(i instanceof It){var n=i.get();return void 0===n&&r.has(t),n}return xi(t)&&r.has(t),e[t]},set:function(e,t,r){return!!xi(t)&&(mi(e,t,r),!0)},deleteProperty:function(e,t){return!!xi(t)&&(_i(e).remove(t),!0)},ownKeys:function(e){return _i(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return bt("Dynamic observable objects cannot be frozen"),!1}};function wi(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Si(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),yt((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function Ei(e,t){var r=ur();try{for(var i=ut(e.interceptors||[]),n=0,o=i.length;n<o&&(vt(!(t=i[n](t))||t.type,"Intercept handlers should return nothing or a change object"),t);n++);return t}finally{pr(r)}}function Ci(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Ti(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),yt((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function Ai(e,t){var r=ur(),i=e.changeListeners;if(i){for(var n=0,o=(i=i.slice()).length;n<o;n++)i[n](t);pr(r)}}var Ri={get:function(e,t){return t===Ot?e[Ot]:"length"===t?e[Ot].getArrayLength():"number"==typeof t?Ii.get.call(e,t):"string"!=typeof t||isNaN(t)?Ii.hasOwnProperty(t)?Ii[t]:e[t]:Ii.get.call(e,parseInt(t))},set:function(e,t,r){return"length"===t&&e[Ot].setArrayLength(r),"number"==typeof t&&Ii.set.call(e,t,r),"symbol"==typeof t||isNaN(t)?e[t]=r:Ii.set.call(e,parseInt(t),r),!0},preventExtensions:function(e){return bt("Observable arrays cannot be frozen"),!1}};var Oi=function(){function e(e,t,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new It(e||"ObservableArray@"+gt()),this.enhancer=function(r,i){return t(r,i,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Si(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ti(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var r=new Array(e-t),i=0;i<e-t;i++)r[i]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,r){var i=this;cr(this.atom);var n=this.values.length;if(void 0===e?e=0:e>n?e=n:e<0&&(e=Math.max(0,n+e)),t=1===arguments.length?n-e:null==t?0:Math.max(0,Math.min(t,n-e)),void 0===r&&(r=mt),wi(this)){var o=Ei(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:r});if(!o)return mt;t=o.removedCount,r=o.added}r=0===r.length?r:r.map((function(e){return i.enhancer(e,void 0)}));var s=this.spliceItemsIntoValues(e,t,r);return 0===t&&0===r.length||this.notifyArraySplice(e,r,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,r){var i;if(r.length<1e4)return(i=this.values).splice.apply(i,ut([e,t],r));var n=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),n},e.prototype.notifyArrayChildUpdate=function(e,t,r){var i=!this.owned&&!1,n=Ci(this),o=n||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:r}:null;this.atom.reportChanged(),n&&Ai(this,o)},e.prototype.notifyArraySplice=function(e,t,r){var i=!this.owned&&!1,n=Ci(this),o=n||i?{object:this.proxy,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom.reportChanged(),n&&Ai(this,o)},e}(),Ii={intercept:function(e){return this[Ot].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[Ot].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[Ot];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=this[Ot];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray(e);case 2:return n.spliceWithArray(e,t)}return n.spliceWithArray(e,t,r)},spliceWithArray:function(e,t,r){return this[Ot].spliceWithArray(e,t,r)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[Ot];return r.spliceWithArray(r.values.length,0,e),r.values.length},pop:function(){return this.splice(Math.max(this[Ot].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[Ot];return r.spliceWithArray(0,0,e),r.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[Ot],r=t.dehanceValues(t.values).indexOf(e);return r>-1&&(this.splice(r,1),!0)},get:function(e){var t=this[Ot];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var r=this[Ot],i=r.values;if(e<i.length){cr(r.atom);var n=i[e];if(wi(r)){var o=Ei(r,{type:"update",object:r.proxy,index:e,newValue:t});if(!o)return;t=o.newValue}(t=r.enhancer(t,n))!==n&&(i[e]=t,r.notifyArrayChildUpdate(e,t,n))}else{if(e!==i.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+i.length);r.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){Ii[e]=function(){var t=this[Ot];t.atom.reportObserved();var r=t.dehanceValues(t.values);return r[e].apply(r,arguments)}}));var Ni,Mi=St("ObservableArrayAdministration",Oi);function Pi(e){return xt(e)&&Mi(e[Ot])}var Li,Di={},$i=function(){function e(e,t,r){if(void 0===t&&(t=jt),void 0===r&&(r="ObservableMap@"+gt()),this.enhancer=t,this.name=r,this[Ni]=Di,this._keysAtom=Mt(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Pr.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var i=r=new Sr(this._has(e),zt,this.name+"."+At(e)+"?",!1);this._hasMap.set(e,i),ii(i,(function(){return t._hasMap.delete(e)}))}return r.get()},e.prototype.set=function(e,t){var r=this._has(e);if(wi(this)){var i=Ei(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(wi(this)&&!(i=Ei(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var r=Ci(this),i=r?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return yi((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&Ai(this,i),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var r=this._hasMap.get(e);r&&r.setNewValue(t)},e.prototype._updateValue=function(e,t){var r=this._data.get(e);if((t=r.prepareNewValue(t))!==Pr.UNCHANGED){var i=!1,n=Ci(this),o=n?{type:"update",object:this,oldValue:r.value,name:e,newValue:t}:null;i,r.setNewValue(t),n&&Ai(this,o)}},e.prototype._addValue=function(e,t){var r=this;cr(this._keysAtom),yi((function(){var i=new Sr(t,r.enhancer,r.name+"."+At(e),!1);r._data.set(e,i),t=i.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()}));var i=!1,n=Ci(this);n&&Ai(this,n?{type:"add",object:this,name:e,newValue:t}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,r=Array.from(this.keys());return rn({next:function(){return t<r.length?{value:e.get(r[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,t=0,r=Array.from(this.keys());return rn({next:function(){if(t<r.length){var i=r[t++];return{value:[i,e.get(i)],done:!1}}return{done:!0}}})},e.prototype[(Ni=Ot,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var r,i;try{for(var n=lt(this),o=n.next();!o.done;o=n.next()){var s=ht(o.value,2),a=s[0],c=s[1];e.call(t,c,a,this)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},e.prototype.merge=function(e){var t=this;return Hi(e)&&(e=e.toJS()),yi((function(){kt(e)?Tt(e).forEach((function(r){return t.set(r,e[r])})):Array.isArray(e)?e.forEach((function(e){var r=ht(e,2),i=r[0],n=r[1];return t.set(i,n)})):Et(e)?(e.constructor!==Map&&bt("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach((function(e,r){return t.set(r,e)}))):null!=e&&bt("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;yi((function(){hr((function(){var t,r;try{for(var i=lt(e.keys()),n=i.next();!n.done;n=i.next()){var o=n.value;e.delete(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}))}))},e.prototype.replace=function(e){var t=this;return yi((function(){var r,i=kt(r=e)?Object.keys(r):Array.isArray(r)?r.map((function(e){return ht(e,1)[0]})):Et(r)||Hi(r)?Array.from(r.keys()):bt("Cannot get keys from '"+r+"'"),n=Array.from(t.keys()).filter((function(e){return-1===i.indexOf(e)}));n.forEach((function(e){return t.delete(e)})),t.merge(e)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,r={};try{for(var i=lt(this),n=i.next();!n.done;n=i.next()){var o=ht(n.value,2),s=o[0],a=o[1];r["symbol"==typeof s?s:At(s)]=a}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map((function(t){return At(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return Ti(this,e)},e.prototype.intercept=function(e){return Si(this,e)},e}(),Hi=St("ObservableMap",$i),Fi={},Bi=function(){function e(e,t,r){if(void 0===t&&(t=jt),void 0===r&&(r="ObservableSet@"+gt()),this.name=r,this[Li]=Fi,this._data=new Set,this._atom=Mt(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,i){return t(e,i,r)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;yi((function(){hr((function(){var t,r;try{for(var i=lt(e._data.values()),n=i.next();!n.done;n=i.next()){var o=n.value;e.delete(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}))}))},e.prototype.forEach=function(e,t){var r,i;try{for(var n=lt(this),o=n.next();!o.done;o=n.next()){var s=o.value;e.call(t,s,s,this)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((cr(this._atom),wi(this))&&!(n=Ei(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){yi((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var r=!1,i=Ci(this),n=i?{type:"add",object:this,newValue:e}:null;r,i&&Ai(this,n)}return this},e.prototype.delete=function(e){var t=this;if(wi(this)&&!(i=Ei(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var r=Ci(this),i=r?{type:"delete",object:this,oldValue:e}:null;return yi((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&Ai(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=Array.from(this.keys()),r=Array.from(this.values());return rn({next:function(){var i=e;return e+=1,i<r.length?{value:[t[i],r[i]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,r=Array.from(this._data.values());return rn({next:function(){return t<r.length?{value:e.dehanceValue(r[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return ji(e)&&(e=e.toJS()),yi((function(){Array.isArray(e)||Ct(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&bt("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return Ti(this,e)},e.prototype.intercept=function(e){return Si(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[(Li=Ot,Symbol.iterator)]=function(){return this.values()},e}(),ji=St("ObservableSet",Bi),zi=function(){function e(e,t,r,i){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=r,this.defaultEnhancer=i,this.keysAtom=new It(r+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var r=this.target,i=this.values.get(e);if(i instanceof Cr)i.set(t);else{if(wi(this)){if(!(s=Ei(this,{type:"update",object:this.proxy||r,name:e,newValue:t})))return;t=s.newValue}if((t=i.prepareNewValue(t))!==Pr.UNCHANGED){var n=Ci(this),o=!1,s=n?{type:"update",object:this.proxy||r,oldValue:i.value,name:e,newValue:t}:null;o,i.setNewValue(t),n&&Ai(this,s)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),r=t.get(e);if(r)return r.get();var i=!!this.values.get(e);return r=new Sr(i,zt,this.name+"."+At(e)+"?",!1),t.set(e,r),r.get()},e.prototype.addObservableProp=function(e,t,r){void 0===r&&(r=this.defaultEnhancer);var i=this.target;if(wi(this)){var n=Ei(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!n)return;t=n.newValue}var o=new Sr(t,r,this.name+"."+At(e),!1);this.values.set(e,o),t=o.value,Object.defineProperty(i,e,function(e){return Ki[e]||(Ki[e]={configurable:!0,enumerable:!0,get:function(){return this[Ot].read(e)},set:function(t){this[Ot].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,r){var i,n,o,s=this.target;r.name=r.name||this.name+"."+At(t),this.values.set(t,new Cr(r)),(e===s||(i=e,n=t,!(o=Object.getOwnPropertyDescriptor(i,n))||!1!==o.configurable&&!1!==o.writable))&&Object.defineProperty(e,t,function(e){return Wi[e]||(Wi[e]={configurable:Pr.computedConfigurable,enumerable:!1,get:function(){return Vi(this).read(e)},set:function(t){Vi(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(wi(this))if(!(a=Ei(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Hr();var r=Ci(this),i=!1,n=this.values.get(e),o=n&&n.get();if(n&&n.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var s=this.pendingKeys.get(e);s&&s.set(!1)}delete this.target[e];var a=r?{type:"remove",object:this.proxy||t,oldValue:o,name:e}:null;i,r&&Ai(this,a)}finally{Fr()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return Ti(this,e)},e.prototype.intercept=function(e){return Si(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var r=Ci(this),i=r?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(r&&Ai(this,i),this.pendingKeys){var n=this.pendingKeys.get(e);n&&n.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var r=[];try{for(var i=lt(this.values),n=i.next();!n.done;n=i.next()){var o=ht(n.value,2),s=o[0];o[1]instanceof Sr&&r.push(s)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e}();function Ui(e,t,r){if(void 0===t&&(t=""),void 0===r&&(r=jt),Object.prototype.hasOwnProperty.call(e,Ot))return e[Ot];kt(e)||(t=(e.constructor.name||"ObservableObject")+"@"+gt()),t||(t="ObservableObject@"+gt());var i=new zi(e,new Map,At(t),r);return wt(e,Ot,i),i}var Ki=Object.create(null),Wi=Object.create(null);function Vi(e){var t=e[Ot];return t||(Ft(e),e[Ot])}var Gi=St("ObservableObjectAdministration",zi);function Zi(e){return!!xt(e)&&(Ft(e),Gi(e[Ot]))}function qi(e,t){if("object"==typeof e&&null!==e){if(Pi(e))return void 0!==t&&bt(!1),e[Ot].atom;if(ji(e))return e[Ot];if(Hi(e)){var r=e;return void 0===t?r._keysAtom:((i=r._data.get(t)||r._hasMap.get(t))||bt(!1),i)}var i;if(Ft(e),t&&!e[Ot]&&e[t],Zi(e))return t?((i=e[Ot].values.get(t))||bt(!1),i):bt(!1);if(Nt(e)||Tr(e)||Zr(e))return e}else if("function"==typeof e&&Zr(e[Ot]))return e[Ot];return bt(!1)}function Yi(e,t){return e||bt("Expecting some object"),void 0!==t?Yi(qi(e,t)):Nt(e)||Tr(e)||Zr(e)||Hi(e)||ji(e)?e:(Ft(e),e[Ot]?e[Ot]:void bt(!1))}var Ji=Object.prototype.toString;function Xi(e,t,r){return void 0===r&&(r=-1),Qi(e,t,r)}function Qi(e,t,r,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Ji.call(e);if(s!==Ji.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++}e=en(e),t=en(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,d=t.constructor;if(c!==d&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Qi(e[l],t[l],r-1,i,n))return!1}else{var h=Object.keys(e),u=void 0;if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!tn(t,u=h[l])||!Qi(e[u],t[u],r-1,i,n))return!1}return i.pop(),n.pop(),!0}function en(e){return Pi(e)?e.slice():Et(e)||Hi(e)||Ct(e)||ji(e)?Array.from(e.entries()):e}function tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rn(e){return e[Symbol.iterator]=nn,e}function nn(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");function on(e){return function(e,t){var r,i;return i=class extends e{constructor(){super(...arguments),this[r]=()=>{this.requestUpdate()}}connectedCallback(){super.connectedCallback();const e=this.constructor.name||this.nodeName;this[st]=new t(`${e}.update()`,this[at]),this.hasUpdated&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this[st]&&(this[st].dispose(),this[st]=void 0)}update(e){this[st]?this[st].track(super.update.bind(this,e)):super.update(e)}},r=at,i}(e,Ur)}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:function(e,t){return(void 0!==t?qi(e,t):Zi(e)||Hi(e)||ji(e)?Yi(e):qi(e)).name}},$mobx:Ot});class sn extends(on(Te)){}const an=["Reticulating splines","Defragmenting disks","Making the sun rise and set","Initializing reality engine","Re-assembling subspace","Creating new universe","Generating witty dialog","Swapping time and space","Spinning violently around the y-axis","Tokenizing real life","Bending the spoon","Filtering morale","Resampling quantum foam","Creating a new universe","Calculating escape velocity","Copying from the Internet","Inputting user's life story","Singing the alphabet","Achieving sentience","Checking for updates","Calculating probability","Compressing a few centuries worth of data","Checking Google.exe","Calculating trajectory","Downloading more RAM","Computing the meaning of life","Writing witty loading messages","Re-establishing quantum entanglement","Making another cup of coffee","Recompiling morality database","Initializing the universe","Setting gravity to 0","Running to Wikipedia","Reconstructing your neural network","Waiting for the hamsters to turn the wheel","Preparing to calculate pi to the last digit","Compiling coffee","Defragmenting memory","Installing Java","Copying the laws of physics","Exercising the mouse","Downloading sarcasm module","Transcending the fourth wall"],cn=()=>{const e=Math.floor(Math.random()*an.length);return an[e]},dn=E`.loading-wrapper {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  width: 100vw;
  height: 100vh;
}

.loading-message {
  color: var(--white);
  padding: 3px 12px;
  border-radius: 6px;
  background: var(--gradient);
  background-size: 400% 400%;
  animation: gradient 5s ease infinite;
}
`,ln=E`button {
  color: var(--blue);
  padding: 0.25rem 1rem 0.4rem;
  font-weight: 500;
  border: 2px solid var(--blue);
  border-radius: 0.25rem;
  background-color: transparent;
  cursor: pointer;
  font-size: 100%;
  line-height: 1.4;
  margin: 0;
  user-select: none;
  transition: background-color 0.05s;
}

button:hover {
  background-color: var(--blue);
  color: var(--white);
}

button:disabled {
  background-color: var(--white);
  color: var(--dark-gray);
  border-color: var(--dark-gray);
  pointer-events: none;
}

.text-editor-font-styles {
  line-height: 2rem;
  font-size: 16px;
  font-family: var(--editor-font-family);
  font-weight: 300;
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.link-button {
  font-size: 14px;
  line-height: 1.5;
  letter-spacing: 0.2px;
  display: inline-block;
  text-decoration: underline;
  cursor: pointer;
}

.link-button.disabled {
  text-decoration: none;
  cursor: default;
  pointer-events: none;
}

.text-editor-font-styles {
  line-height: 2rem;
  font-size: 16px;
  font-family: var(--editor-font-family);
  font-weight: 300;
}
`;var hn=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let un=class extends sn{constructor(){super(...arguments),this.currentMessage=cn(),this.nPeriods=3,this.messageTimeout=-1}static get styles(){return[ln,dn]}get loadingMessage(){const e=[...new Array(this.nPeriods)].map((()=>".")).join("");return`${this.currentMessage}${e}`}firstUpdated(){this.updateMessage()}disconnectedCallback(){clearTimeout(this.messageTimeout)}updateMessage(){const e=2e3*Math.random()+500;this.messageTimeout=window.setTimeout((()=>{this.currentMessage=cn(),this.updateMessage()}),e)}render(){return oe`
      <div class="loading-wrapper">
        <div class="loading-message">${this.loadingMessage}</div>
      </div>
    `}};un=hn([d("wordcraft-loading-screen")],un),oi(un,{currentMessage:Xt,loadingMessage:nr});Object.create;Object.create;const pn=E`:host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}`;let mn=class extends Te{render(){return oe`<span><slot></slot></span>`}};mn.styles=[pn],mn=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([d("mwc-icon")],mn);var fn=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let gn=class extends sn{constructor(){super(...arguments),this.onClose=()=>{},this.getMessage=()=>oe``}static get styles(){return E`
      .error {
        display: flex;
        flex-direction: row;
        align-items: center;
        margin-top: 20px;
        color: red;
        background-color: #fdd;
        font-size: var(--mdc-typography-body2-font-size, 0.875rem);
        -webkit-font-smoothing: antialiased;
        line-height: var(--mdc-typography-body2-line-height, 1.25rem);
        padding: 14px 8px 14px 16px;
        width: 100%;
        flex-grow: 1;
        box-sizing: border-box;
        justify-content: space-between;
        border-radius: var(--mdc-shape-small, 4px);
        box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),
          0px 6px 10px 0px rgba(0, 0, 0, 0.14),
          0px 1px 18px 0px rgba(0, 0, 0, 0.12);
      }

      mwc-icon {
        cursor: pointer;
      }
    `}render(){return oe`
      <div class="error">
        <span> ${this.getMessage()} </span>
        <mwc-icon
          @click=${()=>{this.onClose()}}
          >close</mwc-icon
        >
      </div>
    `}};fn([u({type:Object})],gn.prototype,"onClose",void 0),fn([u({type:Object})],gn.prototype,"getMessage",void 0),gn=fn([d("wordcraft-error-message")],gn);const bn=new class{constructor(){this.services=new Map,this.initialize=e=>{console.log("🚀","initialize");const t=e(this),r={get(e,r){if(t.hasOwnProperty(r))return e[r];throw new Error(`ServiceProvider in WordcraftCore has not been built with ${r}.`)}},i=new Proxy(t,r);this.serviceProvider=i},this.serviceProvider={}}getService(e){return this.buildService(e)}buildService(e){let t=this.services.get(e);return void 0===t&&(t=new e(this.serviceProvider),this.services.set(e,t)),t}};function vn(e){const t=[...e];for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*e),i=t[e];t[e]=t[r],t[r]=i}return t}function yn(e){return e.split("").reverse().join("")}function _n(e){return e.split(" ").filter((e=>e)).join(" ")}function xn(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function kn(e){return t=>{t.preventDefault(),t.stopImmediatePropagation(),e(t)}}class wn{}var Sn=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class En extends wn{constructor(e){super(),this.serviceProvider=e,this.isReady=!1,this.lifeCycleState="ONBOARDING",this.activeSidebarTabIndex=0}initialize(){console.log("initialize app!"),this.isReady=!0}get operationsService(){return this.serviceProvider.operationsService}get areSidebarTabsDisabled(){return this.operationsService.isInOperation}goToEditor(){this.lifeCycleState="EDITING"}initializeEditor(){return Sn(this,void 0,void 0,(function*(){this.lifeCycleState="INITIALIZING";const e=3e3*Math.random()+1e3;yield xn(e),this.lifeCycleState="EDITING"}))}getDefaultText(){return"An elderly man was sitting alone on a dark path. "}}oi(En,{activeSidebarTabIndex:Xt,isReady:Xt,lifeCycleState:Xt});var Cn=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Tn extends wn{constructor(e){super(),this.serviceProvider=e,this.autoSaveIntervalId=0,this.lastSavedText="",this.isDeleting=!1,this.isLoading=!1,this.isSaving=!1,this.documentId=null,this.userDocuments=[]}get appService(){return this.serviceProvider.appService}get dialogService(){return this.serviceProvider.dialogService}get localStorageService(){return this.serviceProvider.localStorageService}get starredResultsService(){return this.serviceProvider.starredResultsService}get textEditorService(){return this.serviceProvider.textEditorService}setDocumentId(e){this.documentId=e}loadUserDocuments(){return Cn(this,void 0,void 0,(function*(){return this.wrapIsLoading((()=>Cn(this,void 0,void 0,(function*(){let e=this.localStorageService.loadDocuments().map((e=>Object.assign({history:[],authorship:[],conversations:[]},e)));return e=e.filter((e=>e.text&&e.text.length>0)),this.userDocuments=e,this.userDocuments}))))}))}storeAPIKeyInput(e){this.localStorageService.setLastAPIKey(e)}loadSavedDocument(e){return Cn(this,void 0,void 0,(function*(){let t=null;try{t=JSON.parse(e.stateSnapshotJson)}catch(e){}this.textEditorService.initializeFromLocalStorage(t),this.documentId=e.id,this.lastSavedText=e.text,this.localStorageService.setDocumentId(e.id),this.starredResultsService.initializeFromLocalStorage(e.starred||[]),this.appService.goToEditor()}))}loadAllDocuments(){return Cn(this,void 0,void 0,(function*(){return this.wrapIsLoading((()=>Cn(this,void 0,void 0,(function*(){return this.localStorageService.loadDocuments()}))))}))}deleteCurrentDocument(){return Cn(this,void 0,void 0,(function*(){if(this.documentId)return this.deleteDocument(this.documentId)}))}deleteDocument(e){return Cn(this,void 0,void 0,(function*(){if(this.isDeleting)return;(yield this.dialogService.openConfirmDialog("Are you sure you want to delete this story? This can't be undone."))&&(this.isDeleting=!0,this.userDocuments=this.userDocuments.filter((t=>t.id!==e)),this.localStorageService.deleteDocument(e),this.isDeleting=!1)}))}wrapIsLoading(e){return Cn(this,void 0,void 0,(function*(){this.isLoading=!0;const t=yield e();return this.isLoading=!1,t}))}createDocumentToSave(){const e=this.textEditorService.getPlainText(),t=this.starredResultsService.starredResults;return{stateSnapshotJson:JSON.stringify(this.textEditorService.getStateSnapshot()),text:e,timestamp:Date.now(),starred:t}}saveDocument(){return Cn(this,void 0,void 0,(function*(){const e=this.createDocumentToSave();if(this.lastSavedText=e.text,""===e.text)return;this.isSaving=!0,yield xn(500*Math.random());const t=this.localStorageService.saveDocument(e,this.documentId);this.documentId=t,this.localStorageService.setDocumentId(this.documentId),this.isSaving=!1}))}startAutoSave(){this.autoSaveIntervalId=window.setInterval((()=>{this.textEditorService.getPlainText()!==this.lastSavedText&&this.saveDocument()}),1e4)}endAutoSave(){clearInterval(this.autoSaveIntervalId)}}oi(Tn,{isDeleting:Xt,isLoading:Xt,isSaving:Xt,userDocuments:Xt});const An=E`.onboarding-wrapper {
  margin-left: 80px;
}

.links {
  position: fixed;
  right: 25px;
  top: 20px;
}

a {
  color: var(--blue);
}

.links a {
  text-decoration: underline;
  text-transform: lowercase;
  color: #222;
  margin-left: 15px;
}

.wordcraft-description {
  font-size: 18px;
}

h1 {
  margin-top: 60px;
  font-size: 60px;
  margin-bottom: 20px;
}

h1 > .text {
  margin-top: 0;
  background: var(--loop-gradient);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: MOVE-BG 10s linear infinite;
}

@keyframes MOVE-BG {
  0% {
    background-position: 0% 35%;
  }
  100% {
    background-position: 200% 65%;
  }
}

.get-started {
  margin-top: 40px;
}

.user-stories-container {
  margin-top: 40px;
}

.user-stories-header {
  font-size: 18px;
  margin-bottom: 10px;
}

.user-stories-list {
  display: flex;
  flex-wrap: wrap;
}

.story-preview {
  box-sizing: border-box;
  width: 200px;
  height: 295px;
  margin: 0 20px 20px 0;
  font-size: 12px;
  line-height: 1.75;
  font-family: var(--editor-font-family);
  border: 1px solid var(--light-gray);
  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
  background: white;
  padding: 15px;
  cursor: pointer;
  position: relative;
  display: -webkit-box;
  -webkit-line-clamp: 13;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.delete-icon {
  position: absolute;
  bottom: 5px;
  right: 5px;
  cursor: pointer;
  color: var(--medium-gray);
  transition: color 50ms linear;
}

.delete-icon:hover {
  color: var(--black);
}
`;var Rn,On,In,Nn,Mn,Pn,Ln;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(Rn||(Rn={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(On||(On={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(In||(In={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(Nn||(Nn={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"}(Mn||(Mn={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(Pn||(Pn={})),function(e){e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"}(Ln||(Ln={}));Error;var Dn;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(Dn||(Dn={}));Mn.RECITATION,Mn.SAFETY;"function"==typeof SuppressedError&&SuppressedError;var $n=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const{GoogleGenerativeAI:Hn}=r(870);let Fn=new Hn("MISSING_ENV_VAR".API_KEY);function Bn(e){Fn=new Hn(e)}const jn=[{category:Rn.HARM_CATEGORY_HARASSMENT,threshold:On.BLOCK_NONE},{category:Rn.HARM_CATEGORY_HATE_SPEECH,threshold:On.BLOCK_NONE},{category:Rn.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:On.BLOCK_NONE},{category:Rn.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:On.BLOCK_NONE}],zn={generationConfig:{temperature:.8,topK:40,topP:.95,candidateCount:8}};var Un=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Kn=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let Wn=class extends sn{constructor(){super(...arguments),this.appService=bn.getService(En),this.documentStoreService=bn.getService(Tn)}static get styles(){return[ln,An]}firstUpdated(){this.documentStoreService.loadUserDocuments()}render(){return oe`
      <div class="onboarding-wrapper">
        <h1><span class="text">Wordcraft</span> ✨✍️</h1>
        ${this.renderDescription()} ${this.renderGetStarted()}
        ${this.renderUserStories()}
      </div>
    `}renderDescription(){return oe`
      <div class="wordcraft-description">
        Wordcraft is an AI-assisted text editor for writing stories.
      </div>
    `}renderGetStarted(){const e=e=>{Bn(e),this.documentStoreService.storeAPIKeyInput(e),this.appService.initializeEditor()};return oe`
      <div class="get-started">
        <input type="text" id="api-key-input" placeholder="Enter your API key" />
        <button @click=${()=>{const t=this.shadowRoot.getElementById("api-key-input");if(t){const r=t.value;e(r)}}}>Submit</button>
        <button @click=${()=>{this.appService.initializeEditor()}}>Start a New Story</button>
      </div>
    `}renderUserStories(){const{isLoading:e,userDocuments:t}=this.documentStoreService;let r=oe``;return e&&(r=oe`
        <mwc-circular-progress-four-color density=${3} indeterminate>
        </mwc-circular-progress-four-color>
      `),t.length&&(r=oe`
        <div class="user-stories-header">Or load an existing story...</div>
        <div class="user-stories-list">
          ${t.map((e=>oe`
              <div @click=${()=>{this.documentStoreService.loadSavedDocument(e)}} class="story-preview">
                ${e.text.split("\n").map((e=>oe`<p>${e}</p>`))}
                <mwc-icon
                  class="delete-icon"
                  @click=${t=>Kn(this,void 0,void 0,(function*(){t.preventDefault(),t.stopPropagation(),yield this.documentStoreService.deleteDocument(e.id)}))}
                >
                  clear
                </mwc-icon>
              </div>
            `))}
        </div>
      `),oe` <div class="user-stories-container">${r}</div> `}};Wn=Un([d("wordcraft-onboarding")],Wn);var Vn={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},Gn={CONTENT_SELECTOR:".mdc-tab-indicator__content"},Zn=function(e){function t(r){return e.call(this,o(o({},t.defaultAdapter),r))||this}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Vn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.computeContentClientRect=function(){return this.adapter.computeContentClientRect()},t}(Pe);const qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.activate=function(){this.adapter.addClass(Zn.cssClasses.ACTIVE)},t.prototype.deactivate=function(){this.adapter.removeClass(Zn.cssClasses.ACTIVE)},t}(Zn);const Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.activate=function(e){if(e){var t=this.computeContentClientRect(),r=e.width/t.width,i=e.left-t.left;this.adapter.addClass(Zn.cssClasses.NO_TRANSITION),this.adapter.setContentStyleProperty("transform","translateX("+i+"px) scaleX("+r+")"),this.computeContentClientRect(),this.adapter.removeClass(Zn.cssClasses.NO_TRANSITION),this.adapter.addClass(Zn.cssClasses.ACTIVE),this.adapter.setContentStyleProperty("transform","")}else this.adapter.addClass(Zn.cssClasses.ACTIVE)},t.prototype.deactivate=function(){this.adapter.removeClass(Zn.cssClasses.ACTIVE)},t}(Zn);class Jn extends Me{constructor(){super(...arguments),this.icon="",this.fade=!1}get mdcFoundationClass(){return this.fade?qn:Yn}render(){const e={"mdc-tab-indicator__content--icon":this.icon,"material-icons":this.icon,"mdc-tab-indicator__content--underline":!this.icon};return oe`
      <span class="mdc-tab-indicator ${Ge({"mdc-tab-indicator--fade":this.fade})}">
        <span class="mdc-tab-indicator__content ${Ge(e)}">${this.icon}</span>
      </span>
      `}updated(e){e.has("fade")&&this.createFoundation()}createAdapter(){return Object.assign(Object.assign({},Re(this.mdcRoot)),{computeContentClientRect:()=>this.contentElement.getBoundingClientRect(),setContentStyleProperty:(e,t)=>this.contentElement.style.setProperty(e,t)})}computeContentClientRect(){return this.mdcFoundation.computeContentClientRect()}activate(e){this.mdcFoundation.activate(e)}deactivate(){this.mdcFoundation.deactivate()}}s([g(".mdc-tab-indicator")],Jn.prototype,"mdcRoot",void 0),s([g(".mdc-tab-indicator__content")],Jn.prototype,"contentElement",void 0),s([u()],Jn.prototype,"icon",void 0),s([u({type:Boolean})],Jn.prototype,"fade",void 0);const Xn=E`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-tab-indicator .mdc-tab-indicator__content--underline{border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-tab-indicator .mdc-tab-indicator__content--icon{color:#018786;color:var(--mdc-theme-secondary, #018786)}.mdc-tab-indicator .mdc-tab-indicator__content--underline{border-top-width:2px}.mdc-tab-indicator .mdc-tab-indicator__content--icon{height:34px;font-size:34px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}`;let Qn=class extends Jn{};Qn.styles=[Xn],Qn=s([d("mwc-tab-indicator")],Qn);const eo=e=>(t,r)=>{if(t.constructor._observers){if(!t.constructor.hasOwnProperty("_observers")){const e=t.constructor._observers;t.constructor._observers=new Map,e.forEach(((e,r)=>t.constructor._observers.set(r,e)))}}else{t.constructor._observers=new Map;const e=t.updated;t.updated=function(t){e.call(this,t),t.forEach(((e,t)=>{const r=this.constructor._observers.get(t);void 0!==r&&r.call(this,this[t],e)}))}}t.constructor._observers.set(r,e)};var to={ACTIVE:"mdc-tab--active"},ro={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"};const io=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.focusOnActivate=!0,i}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return to},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ro},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!1,configurable:!0}),t.prototype.handleClick=function(){this.adapter.notifyInteracted()},t.prototype.isActive=function(){return this.adapter.hasClass(to.ACTIVE)},t.prototype.setFocusOnActivate=function(e){this.focusOnActivate=e},t.prototype.activate=function(e){this.adapter.addClass(to.ACTIVE),this.adapter.setAttr(ro.ARIA_SELECTED,"true"),this.adapter.setAttr(ro.TABINDEX,"0"),this.adapter.activateIndicator(e),this.focusOnActivate&&this.adapter.focus()},t.prototype.deactivate=function(){this.isActive()&&(this.adapter.removeClass(to.ACTIVE),this.adapter.setAttr(ro.ARIA_SELECTED,"false"),this.adapter.setAttr(ro.TABINDEX,"-1"),this.adapter.deactivateIndicator())},t.prototype.computeDimensions=function(){var e=this.adapter.getOffsetWidth(),t=this.adapter.getOffsetLeft(),r=this.adapter.getContentOffsetWidth(),i=this.adapter.getContentOffsetLeft();return{contentLeft:t+i,contentRight:t+i+r,rootLeft:t,rootRight:t+e}},t}(Pe);let no=0;class oo extends Me{constructor(){super(...arguments),this.mdcFoundationClass=io,this.label="",this.icon="",this.hasImageIcon=!1,this.isFadingIndicator=!1,this.minWidth=!1,this.isMinWidthIndicator=!1,this.indicatorIcon="",this.stacked=!1,this.focusOnActivate=!0,this._active=!1,this.initFocus=!1,this.shouldRenderRipple=!1,this.useStateLayerCustomProperties=!1,this.rippleElement=null,this.rippleHandlers=new tt((()=>(this.shouldRenderRipple=!0,this.ripple.then((e=>this.rippleElement=e)),this.ripple)))}get active(){return this._active}connectedCallback(){this.dir=document.dir,super.connectedCallback()}firstUpdated(){super.firstUpdated(),this.id=this.id||"mdc-tab-"+ ++no}render(){const e={"mdc-tab--min-width":this.minWidth,"mdc-tab--stacked":this.stacked};let t=oe``;(this.hasImageIcon||this.icon)&&(t=oe`
        <span class="mdc-tab__icon material-icons"><slot name="icon">${this.icon}</slot></span>`);let r=oe``;return this.label&&(r=oe`
        <span class="mdc-tab__text-label">${this.label}</span>`),oe`
      <button
        @click="${this.handleClick}"
        class="mdc-tab ${Ge(e)}"
        role="tab"
        aria-selected="false"
        tabindex="-1"
        @focus="${this.focus}"
        @blur="${this.handleBlur}"
        @mousedown="${this.handleRippleMouseDown}"
        @mouseenter="${this.handleRippleMouseEnter}"
        @mouseleave="${this.handleRippleMouseLeave}"
        @touchstart="${this.handleRippleTouchStart}"
        @touchend="${this.handleRippleDeactivate}"
        @touchcancel="${this.handleRippleDeactivate}">
        <span class="mdc-tab__content">
          ${t}
          ${r}
          ${this.isMinWidthIndicator?this.renderIndicator():""}
        </span>
        ${this.isMinWidthIndicator?"":this.renderIndicator()}
        ${this.renderRipple()}
      </button>`}renderIndicator(){return oe`<mwc-tab-indicator
        .icon="${this.indicatorIcon}"
        .fade="${this.isFadingIndicator}"></mwc-tab-indicator>`}renderRipple(){return this.shouldRenderRipple?oe`<mwc-ripple primary
        .internalUseStateLayerCustomProperties="${this.useStateLayerCustomProperties}"></mwc-ripple>`:""}createAdapter(){return Object.assign(Object.assign({},Re(this.mdcRoot)),{setAttr:(e,t)=>this.mdcRoot.setAttribute(e,t),activateIndicator:async e=>{await this.tabIndicator.updateComplete,this.tabIndicator.activate(e)},deactivateIndicator:async()=>{await this.tabIndicator.updateComplete,this.tabIndicator.deactivate()},notifyInteracted:()=>this.dispatchEvent(new CustomEvent(io.strings.INTERACTED_EVENT,{detail:{tabId:this.id},bubbles:!0,composed:!0,cancelable:!0})),getOffsetLeft:()=>this.offsetLeft,getOffsetWidth:()=>this.mdcRoot.offsetWidth,getContentOffsetLeft:()=>this._contentElement.offsetLeft,getContentOffsetWidth:()=>this._contentElement.offsetWidth,focus:()=>{this.initFocus?this.initFocus=!1:this.mdcRoot.focus()}})}activate(e){e||(this.initFocus=!0),this.mdcFoundation?(this.mdcFoundation.activate(e),this.setActive(this.mdcFoundation.isActive())):this.updateComplete.then((()=>{this.mdcFoundation.activate(e),this.setActive(this.mdcFoundation.isActive())}))}deactivate(){this.mdcFoundation.deactivate(),this.setActive(this.mdcFoundation.isActive())}setActive(e){const t=this.active;t!==e&&(this._active=e,this.requestUpdate("active",t))}computeDimensions(){return this.mdcFoundation.computeDimensions()}computeIndicatorClientRect(){return this.tabIndicator.computeContentClientRect()}focus(){this.mdcRoot.focus(),this.handleFocus()}handleClick(){this.handleFocus(),this.mdcFoundation.handleClick()}handleFocus(){this.handleRippleFocus()}handleBlur(){this.handleRippleBlur()}handleRippleMouseDown(e){const t=()=>{window.removeEventListener("mouseup",t),this.handleRippleDeactivate()};window.addEventListener("mouseup",t),this.rippleHandlers.startPress(e)}handleRippleTouchStart(e){this.rippleHandlers.startPress(e)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}get isRippleActive(){var e;return(null===(e=this.rippleElement)||void 0===e?void 0:e.isActive)||!1}}oo.shadowRootOptions={mode:"open",delegatesFocus:!0},s([g(".mdc-tab")],oo.prototype,"mdcRoot",void 0),s([g("mwc-tab-indicator")],oo.prototype,"tabIndicator",void 0),s([u()],oo.prototype,"label",void 0),s([u()],oo.prototype,"icon",void 0),s([u({type:Boolean})],oo.prototype,"hasImageIcon",void 0),s([u({type:Boolean})],oo.prototype,"isFadingIndicator",void 0),s([u({type:Boolean})],oo.prototype,"minWidth",void 0),s([u({type:Boolean})],oo.prototype,"isMinWidthIndicator",void 0),s([u({type:Boolean,reflect:!0,attribute:"active"})],oo.prototype,"active",null),s([u()],oo.prototype,"indicatorIcon",void 0),s([u({type:Boolean})],oo.prototype,"stacked",void 0),s([eo((async function(e){await this.updateComplete,this.mdcFoundation.setFocusOnActivate(e)})),u({type:Boolean})],oo.prototype,"focusOnActivate",void 0),s([g(".mdc-tab__content")],oo.prototype,"_contentElement",void 0),s([p()],oo.prototype,"shouldRenderRipple",void 0),s([p()],oo.prototype,"useStateLayerCustomProperties",void 0),s([b("mwc-ripple")],oo.prototype,"ripple",void 0),s([f({passive:!0})],oo.prototype,"handleRippleTouchStart",null);const so=E`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-tab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);position:relative}.mdc-tab .mdc-tab__text-label{color:rgba(0, 0, 0, 0.6)}.mdc-tab .mdc-tab__icon{color:rgba(0, 0, 0, 0.54);fill:currentColor}.mdc-tab.mdc-ripple-upgraded--background-focused.mdc-tab--active .mdc-tab__focus-ring,.mdc-tab:not(.mdc-ripple-upgraded):focus.mdc-tab--active .mdc-tab__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:8px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc( 100% + -12px );width:calc( 100% + -8px );margin-top:-2px;z-index:2}@media screen and (forced-colors: active){.mdc-tab.mdc-ripple-upgraded--background-focused.mdc-tab--active .mdc-tab__focus-ring,.mdc-tab:not(.mdc-ripple-upgraded):focus.mdc-tab--active .mdc-tab__focus-ring{border-color:CanvasText}}.mdc-tab.mdc-ripple-upgraded--background-focused.mdc-tab--active .mdc-tab__focus-ring::after,.mdc-tab:not(.mdc-ripple-upgraded):focus.mdc-tab--active .mdc-tab__focus-ring::after{content:"";border:2px solid transparent;border-radius:10px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-tab.mdc-ripple-upgraded--background-focused.mdc-tab--active .mdc-tab__focus-ring::after,.mdc-tab:not(.mdc-ripple-upgraded):focus.mdc-tab--active .mdc-tab__focus-ring::after{border-color:CanvasText}}.mdc-tab.mdc-ripple-upgraded--background-focused .mdc-tab__focus-ring,.mdc-tab:not(.mdc-ripple-upgraded):focus .mdc-tab__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:8px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc( 100% + -8px );width:calc( 100% + -8px );z-index:2}@media screen and (forced-colors: active){.mdc-tab.mdc-ripple-upgraded--background-focused .mdc-tab__focus-ring,.mdc-tab:not(.mdc-ripple-upgraded):focus .mdc-tab__focus-ring{border-color:CanvasText}}.mdc-tab.mdc-ripple-upgraded--background-focused .mdc-tab__focus-ring::after,.mdc-tab:not(.mdc-ripple-upgraded):focus .mdc-tab__focus-ring::after{content:"";border:2px solid transparent;border-radius:10px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-tab.mdc-ripple-upgraded--background-focused .mdc-tab__focus-ring::after,.mdc-tab:not(.mdc-ripple-upgraded):focus .mdc-tab__focus-ring::after{border-color:CanvasText}}.mdc-tab__content{position:relative}.mdc-tab__icon{width:24px;height:24px;font-size:24px}.mdc-tab--active .mdc-tab__text-label{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-tab--active .mdc-tab__icon{color:#6200ee;color:var(--mdc-theme-primary, #6200ee);fill:currentColor}.mdc-tab{background:none}.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-tab{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-tab .mdc-tab__ripple::before,.mdc-tab .mdc-tab__ripple::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-tab .mdc-tab__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-tab .mdc-tab__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-tab.mdc-ripple-upgraded .mdc-tab__ripple::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-tab.mdc-ripple-upgraded .mdc-tab__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-tab.mdc-ripple-upgraded--unbounded .mdc-tab__ripple::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-tab.mdc-ripple-upgraded--foreground-activation .mdc-tab__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-tab.mdc-ripple-upgraded--foreground-deactivation .mdc-tab__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-tab .mdc-tab__ripple::before,.mdc-tab .mdc-tab__ripple::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-tab.mdc-ripple-upgraded .mdc-tab__ripple::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-tab .mdc-tab__ripple::before,.mdc-tab .mdc-tab__ripple::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-tab:hover .mdc-tab__ripple::before,.mdc-tab.mdc-ripple-surface--hover .mdc-tab__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-tab.mdc-ripple-upgraded--background-focused .mdc-tab__ripple::before,.mdc-tab:not(.mdc-ripple-upgraded):focus .mdc-tab__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-tab:not(.mdc-ripple-upgraded) .mdc-tab__ripple::after{transition:opacity 150ms linear}.mdc-tab:not(.mdc-ripple-upgraded):active .mdc-tab__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-tab.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-tab__ripple{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;will-change:transform,opacity}:host{outline:none;flex:1 0 auto;display:flex;justify-content:center;-webkit-tap-highlight-color:transparent}.mdc-tab{height:var(--mdc-tab-height, 48px);margin-left:0;margin-right:0;padding-right:var(--mdc-tab-horizontal-padding, 24px);padding-left:var(--mdc-tab-horizontal-padding, 24px)}.mdc-tab--stacked{height:var(--mdc-tab-stacked-height, 72px)}.mdc-tab::-moz-focus-inner{border:0}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mdc-tab-text-label-color-default, rgba(0, 0, 0, 0.6))}.mdc-tab:not(.mdc-tab--active) .mdc-tab__icon{color:var(--mdc-tab-color-default, rgba(0, 0, 0, 0.54))}`;let ao=class extends oo{};ao.styles=[so],ao=s([d("mwc-tab")],ao);var co={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},lo={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"},ho=function(e){this.adapter=e};var uo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getScrollPositionRTL=function(){var e=this.adapter.getScrollAreaScrollLeft(),t=this.calculateScrollEdges().right;return Math.round(t-e)},t.prototype.scrollToRTL=function(e){var t=this.calculateScrollEdges(),r=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue(t.right-e);return{finalScrollPosition:i,scrollDelta:i-r}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft(),r=this.clampScrollValue(t-e);return{finalScrollPosition:r,scrollDelta:r-t}},t.prototype.getAnimatingScrollPosition=function(e){return e},t.prototype.calculateScrollEdges=function(){return{left:0,right:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth()}},t.prototype.clampScrollValue=function(e){var t=this.calculateScrollEdges();return Math.min(Math.max(t.left,e),t.right)},t}(ho);var po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getScrollPositionRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft();return Math.round(e-t)},t.prototype.scrollToRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft(),r=this.clampScrollValue(-e);return{finalScrollPosition:r,scrollDelta:r-t}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft(),r=this.clampScrollValue(t-e);return{finalScrollPosition:r,scrollDelta:r-t}},t.prototype.getAnimatingScrollPosition=function(e,t){return e-t},t.prototype.calculateScrollEdges=function(){var e=this.adapter.getScrollContentOffsetWidth();return{left:this.adapter.getScrollAreaOffsetWidth()-e,right:0}},t.prototype.clampScrollValue=function(e){var t=this.calculateScrollEdges();return Math.max(Math.min(t.right,e),t.left)},t}(ho);var mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getScrollPositionRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft();return Math.round(t-e)},t.prototype.scrollToRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft(),r=this.clampScrollValue(e);return{finalScrollPosition:r,scrollDelta:t-r}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter.getScrollAreaScrollLeft(),r=this.clampScrollValue(t+e);return{finalScrollPosition:r,scrollDelta:t-r}},t.prototype.getAnimatingScrollPosition=function(e,t){return e+t},t.prototype.calculateScrollEdges=function(){return{left:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth(),right:0}},t.prototype.clampScrollValue=function(e){var t=this.calculateScrollEdges();return Math.min(Math.max(t.right,e),t.left)},t}(ho);var fo=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.isAnimating=!1,i}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return co},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return lo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this.adapter.computeHorizontalScrollbarHeight();this.adapter.setScrollAreaStyleProperty("margin-bottom",-e+"px"),this.adapter.addScrollAreaClass(t.cssClasses.SCROLL_AREA_SCROLL)},t.prototype.getScrollPosition=function(){if(this.isRTL())return this.computeCurrentScrollPositionRTL();var e=this.calculateCurrentTranslateX();return this.adapter.getScrollAreaScrollLeft()-e},t.prototype.handleInteraction=function(){this.isAnimating&&this.stopScrollAnimation()},t.prototype.handleTransitionEnd=function(e){var r=e.target;this.isAnimating&&this.adapter.eventTargetMatchesSelector(r,t.strings.CONTENT_SELECTOR)&&(this.isAnimating=!1,this.adapter.removeClass(t.cssClasses.ANIMATING))},t.prototype.incrementScroll=function(e){0!==e&&this.animate(this.getIncrementScrollOperation(e))},t.prototype.incrementScrollImmediate=function(e){if(0!==e){var t=this.getIncrementScrollOperation(e);0!==t.scrollDelta&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(t.finalScrollPosition))}},t.prototype.scrollTo=function(e){this.isRTL()?this.scrollToImplRTL(e):this.scrollToImpl(e)},t.prototype.getRTLScroller=function(){return this.rtlScrollerInstance||(this.rtlScrollerInstance=this.rtlScrollerFactory()),this.rtlScrollerInstance},t.prototype.calculateCurrentTranslateX=function(){var e=this.adapter.getScrollContentStyleValue("transform");if("none"===e)return 0;var t=/\((.+?)\)/.exec(e);if(!t)return 0;var r=c(t[1].split(","),6),i=(r[0],r[1],r[2],r[3],r[4]);r[5];return parseFloat(i)},t.prototype.clampScrollValue=function(e){var t=this.calculateScrollEdges();return Math.min(Math.max(t.left,e),t.right)},t.prototype.computeCurrentScrollPositionRTL=function(){var e=this.calculateCurrentTranslateX();return this.getRTLScroller().getScrollPositionRTL(e)},t.prototype.calculateScrollEdges=function(){return{left:0,right:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth()}},t.prototype.scrollToImpl=function(e){var t=this.getScrollPosition(),r=this.clampScrollValue(e),i=r-t;this.animate({finalScrollPosition:r,scrollDelta:i})},t.prototype.scrollToImplRTL=function(e){var t=this.getRTLScroller().scrollToRTL(e);this.animate(t)},t.prototype.getIncrementScrollOperation=function(e){if(this.isRTL())return this.getRTLScroller().incrementScrollRTL(e);var t=this.getScrollPosition(),r=e+t,i=this.clampScrollValue(r);return{finalScrollPosition:i,scrollDelta:i-t}},t.prototype.animate=function(e){var r=this;0!==e.scrollDelta&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(e.finalScrollPosition),this.adapter.setScrollContentStyleProperty("transform","translateX("+e.scrollDelta+"px)"),this.adapter.computeScrollAreaClientRect(),requestAnimationFrame((function(){r.adapter.addClass(t.cssClasses.ANIMATING),r.adapter.setScrollContentStyleProperty("transform","none")})),this.isAnimating=!0)},t.prototype.stopScrollAnimation=function(){this.isAnimating=!1;var e=this.getAnimatingScrollPosition();this.adapter.removeClass(t.cssClasses.ANIMATING),this.adapter.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter.setScrollAreaScrollLeft(e)},t.prototype.getAnimatingScrollPosition=function(){var e=this.calculateCurrentTranslateX(),t=this.adapter.getScrollAreaScrollLeft();return this.isRTL()?this.getRTLScroller().getAnimatingScrollPosition(t,e):t-e},t.prototype.rtlScrollerFactory=function(){var e=this.adapter.getScrollAreaScrollLeft();this.adapter.setScrollAreaScrollLeft(e-1);var t=this.adapter.getScrollAreaScrollLeft();if(t<0)return this.adapter.setScrollAreaScrollLeft(e),new po(this.adapter);var r=this.adapter.computeScrollAreaClientRect(),i=this.adapter.computeScrollContentClientRect(),n=Math.round(i.right-r.right);return this.adapter.setScrollAreaScrollLeft(e),n===t?new mo(this.adapter):new uo(this.adapter)},t.prototype.isRTL=function(){return"rtl"===this.adapter.getScrollContentStyleValue("direction")},t}(Pe);const go=fo;class bo extends Me{constructor(){super(...arguments),this.mdcFoundationClass=go,this._scrollbarHeight=-1}_handleInteraction(){this.mdcFoundation.handleInteraction()}_handleTransitionEnd(e){this.mdcFoundation.handleTransitionEnd(e)}render(){return oe`
      <div class="mdc-tab-scroller">
        <div class="mdc-tab-scroller__scroll-area"
            @wheel="${this._handleInteraction}"
            @touchstart="${this._handleInteraction}"
            @pointerdown="${this._handleInteraction}"
            @mousedown="${this._handleInteraction}"
            @keydown="${this._handleInteraction}"
            @transitionend="${this._handleTransitionEnd}">
          <div class="mdc-tab-scroller__scroll-content"><slot></slot></div>
        </div>
      </div>
      `}createAdapter(){return Object.assign(Object.assign({},Re(this.mdcRoot)),{eventTargetMatchesSelector:(e,t)=>y(e,t),addScrollAreaClass:e=>this.scrollAreaElement.classList.add(e),setScrollAreaStyleProperty:(e,t)=>this.scrollAreaElement.style.setProperty(e,t),setScrollContentStyleProperty:(e,t)=>this.scrollContentElement.style.setProperty(e,t),getScrollContentStyleValue:e=>window.getComputedStyle(this.scrollContentElement).getPropertyValue(e),setScrollAreaScrollLeft:e=>this.scrollAreaElement.scrollLeft=e,getScrollAreaScrollLeft:()=>this.scrollAreaElement.scrollLeft,getScrollContentOffsetWidth:()=>this.scrollContentElement.offsetWidth,getScrollAreaOffsetWidth:()=>this.scrollAreaElement.offsetWidth,computeScrollAreaClientRect:()=>this.scrollAreaElement.getBoundingClientRect(),computeScrollContentClientRect:()=>this.scrollContentElement.getBoundingClientRect(),computeHorizontalScrollbarHeight:()=>(-1===this._scrollbarHeight&&(this.scrollAreaElement.style.overflowX="scroll",this._scrollbarHeight=this.scrollAreaElement.offsetHeight-this.scrollAreaElement.clientHeight,this.scrollAreaElement.style.overflowX=""),this._scrollbarHeight)})}getScrollPosition(){return this.mdcFoundation.getScrollPosition()}getScrollContentWidth(){return this.scrollContentElement.offsetWidth}incrementScrollPosition(e){this.mdcFoundation.incrementScroll(e)}scrollToPosition(e){this.mdcFoundation.scrollTo(e)}}s([g(".mdc-tab-scroller")],bo.prototype,"mdcRoot",void 0),s([g(".mdc-tab-scroller__scroll-area")],bo.prototype,"scrollAreaElement",void 0),s([g(".mdc-tab-scroller__scroll-content")],bo.prototype,"scrollContentElement",void 0),s([f({passive:!0})],bo.prototype,"_handleInteraction",null);const vo=E`.mdc-tab-scroller{overflow-y:hidden}.mdc-tab-scroller.mdc-tab-scroller--animating .mdc-tab-scroller__scroll-content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-scroller__test{position:absolute;top:-9999px;width:100px;height:100px;overflow-x:scroll}.mdc-tab-scroller__scroll-area{-webkit-overflow-scrolling:touch;display:flex;overflow-x:hidden}.mdc-tab-scroller__scroll-area::-webkit-scrollbar,.mdc-tab-scroller__test::-webkit-scrollbar{display:none}.mdc-tab-scroller__scroll-area--scroll{overflow-x:scroll}.mdc-tab-scroller__scroll-content{position:relative;display:flex;flex:1 0 auto;transform:none;will-change:transform}.mdc-tab-scroller--align-start .mdc-tab-scroller__scroll-content{justify-content:flex-start}.mdc-tab-scroller--align-end .mdc-tab-scroller__scroll-content{justify-content:flex-end}.mdc-tab-scroller--align-center .mdc-tab-scroller__scroll-content{justify-content:center}.mdc-tab-scroller--animating .mdc-tab-scroller__scroll-area{-webkit-overflow-scrolling:auto}:host{display:flex}.mdc-tab-scroller{flex:1}`;let yo=class extends bo{};yo.styles=[vo],yo=s([d("mwc-tab-scroller")],yo);var _o={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},xo={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32},ko=new Set;ko.add(_o.ARROW_LEFT_KEY),ko.add(_o.ARROW_RIGHT_KEY),ko.add(_o.END_KEY),ko.add(_o.HOME_KEY),ko.add(_o.ENTER_KEY),ko.add(_o.SPACE_KEY);var wo=new Map;wo.set(xo.ARROW_LEFT_KEYCODE,_o.ARROW_LEFT_KEY),wo.set(xo.ARROW_RIGHT_KEYCODE,_o.ARROW_RIGHT_KEY),wo.set(xo.END_KEYCODE,_o.END_KEY),wo.set(xo.HOME_KEYCODE,_o.HOME_KEY),wo.set(xo.ENTER_KEYCODE,_o.ENTER_KEY),wo.set(xo.SPACE_KEYCODE,_o.SPACE_KEY);const So=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.useAutomaticActivation=!1,i}return n(t,e),Object.defineProperty(t,"strings",{get:function(){return _o},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return xo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!1,configurable:!0}),t.prototype.setUseAutomaticActivation=function(e){this.useAutomaticActivation=e},t.prototype.activateTab=function(e){var t,r=this.adapter.getPreviousActiveTabIndex();this.indexIsInRange(e)&&e!==r&&(-1!==r&&(this.adapter.deactivateTabAtIndex(r),t=this.adapter.getTabIndicatorClientRectAtIndex(r)),this.adapter.activateTabAtIndex(e,t),this.scrollIntoView(e),this.adapter.notifyTabActivated(e))},t.prototype.handleKeyDown=function(e){var t=this.getKeyFromEvent(e);if(void 0!==t)if(this.isActivationKey(t)||e.preventDefault(),this.useAutomaticActivation){if(this.isActivationKey(t))return;var r=this.determineTargetFromKey(this.adapter.getPreviousActiveTabIndex(),t);this.adapter.setActiveTab(r),this.scrollIntoView(r)}else{var i=this.adapter.getFocusedTabIndex();if(this.isActivationKey(t))this.adapter.setActiveTab(i);else{r=this.determineTargetFromKey(i,t);this.adapter.focusTabAtIndex(r),this.scrollIntoView(r)}}},t.prototype.handleTabInteraction=function(e){this.adapter.setActiveTab(this.adapter.getIndexOfTabById(e.detail.tabId))},t.prototype.scrollIntoView=function(e){this.indexIsInRange(e)&&(0!==e?e!==this.adapter.getTabListLength()-1?this.isRTL()?this.scrollIntoViewImplRTL(e):this.scrollIntoViewImpl(e):this.adapter.scrollTo(this.adapter.getScrollContentWidth()):this.adapter.scrollTo(0))},t.prototype.determineTargetFromKey=function(e,t){var r=this.isRTL(),i=this.adapter.getTabListLength()-1,n=e;return t===_o.END_KEY?n=i:t===_o.ARROW_LEFT_KEY&&!r||t===_o.ARROW_RIGHT_KEY&&r?n-=1:t===_o.ARROW_RIGHT_KEY&&!r||t===_o.ARROW_LEFT_KEY&&r?n+=1:n=0,n<0?n=i:n>i&&(n=0),n},t.prototype.calculateScrollIncrement=function(e,t,r,i){var n=this.adapter.getTabDimensionsAtIndex(t),o=n.contentLeft-r-i,s=n.contentRight-r-xo.EXTRA_SCROLL_AMOUNT,a=o+xo.EXTRA_SCROLL_AMOUNT;return t<e?Math.min(s,0):Math.max(a,0)},t.prototype.calculateScrollIncrementRTL=function(e,t,r,i,n){var o=this.adapter.getTabDimensionsAtIndex(t),s=n-o.contentLeft-r,a=n-o.contentRight-r-i+xo.EXTRA_SCROLL_AMOUNT,c=s-xo.EXTRA_SCROLL_AMOUNT;return t>e?Math.max(a,0):Math.min(c,0)},t.prototype.findAdjacentTabIndexClosestToEdge=function(e,t,r,i){var n=t.rootLeft-r,o=t.rootRight-r-i,s=n+o;return n<0||s<0?e-1:o>0||s>0?e+1:-1},t.prototype.findAdjacentTabIndexClosestToEdgeRTL=function(e,t,r,i,n){var o=n-t.rootLeft-i-r,s=n-t.rootRight-r,a=o+s;return o>0||a>0?e+1:s<0||a<0?e-1:-1},t.prototype.getKeyFromEvent=function(e){return ko.has(e.key)?e.key:wo.get(e.keyCode)},t.prototype.isActivationKey=function(e){return e===_o.SPACE_KEY||e===_o.ENTER_KEY},t.prototype.indexIsInRange=function(e){return e>=0&&e<this.adapter.getTabListLength()},t.prototype.isRTL=function(){return this.adapter.isRTL()},t.prototype.scrollIntoViewImpl=function(e){var t=this.adapter.getScrollPosition(),r=this.adapter.getOffsetWidth(),i=this.adapter.getTabDimensionsAtIndex(e),n=this.findAdjacentTabIndexClosestToEdge(e,i,t,r);if(this.indexIsInRange(n)){var o=this.calculateScrollIncrement(e,n,t,r);this.adapter.incrementScroll(o)}},t.prototype.scrollIntoViewImplRTL=function(e){var t=this.adapter.getScrollPosition(),r=this.adapter.getOffsetWidth(),i=this.adapter.getTabDimensionsAtIndex(e),n=this.adapter.getScrollContentWidth(),o=this.findAdjacentTabIndexClosestToEdgeRTL(e,i,t,r,n);if(this.indexIsInRange(o)){var s=this.calculateScrollIncrementRTL(e,o,t,r,n);this.adapter.incrementScroll(s)}},t}(Pe);class Eo extends Me{constructor(){super(...arguments),this.mdcFoundationClass=So,this.activeIndex=0,this._previousActiveIndex=-1}_handleTabInteraction(e){this.mdcFoundation.handleTabInteraction(e)}_handleKeydown(e){this.mdcFoundation.handleKeyDown(e)}render(){return oe`
      <div class="mdc-tab-bar" role="tablist"
          @MDCTab:interacted="${this._handleTabInteraction}"
          @keydown="${this._handleKeydown}">
        <mwc-tab-scroller><slot></slot></mwc-tab-scroller>
      </div>
      `}_getTabs(){return this.tabsSlot.assignedNodes({flatten:!0}).filter((e=>e instanceof oo))}_getTab(e){return this._getTabs()[e]}createAdapter(){return{scrollTo:e=>this.scrollerElement.scrollToPosition(e),incrementScroll:e=>this.scrollerElement.incrementScrollPosition(e),getScrollPosition:()=>this.scrollerElement.getScrollPosition(),getScrollContentWidth:()=>this.scrollerElement.getScrollContentWidth(),getOffsetWidth:()=>this.mdcRoot.offsetWidth,isRTL:()=>"rtl"===window.getComputedStyle(this.mdcRoot).getPropertyValue("direction"),setActiveTab:e=>this.mdcFoundation.activateTab(e),activateTabAtIndex:(e,t)=>{const r=this._getTab(e);void 0!==r&&r.activate(t),this._previousActiveIndex=e},deactivateTabAtIndex:e=>{const t=this._getTab(e);void 0!==t&&t.deactivate()},focusTabAtIndex:e=>{const t=this._getTab(e);void 0!==t&&t.focus()},getTabIndicatorClientRectAtIndex:e=>{const t=this._getTab(e);return void 0!==t?t.computeIndicatorClientRect():new DOMRect},getTabDimensionsAtIndex:e=>{const t=this._getTab(e);return void 0!==t?t.computeDimensions():{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:()=>this._previousActiveIndex,getFocusedTabIndex:()=>{const e=this._getTabs(),t=this.getRootNode().activeElement;return e.indexOf(t)},getIndexOfTabById:e=>{const t=this._getTabs();for(let r=0;r<t.length;r++)if(t[r].id===e)return r;return-1},getTabListLength:()=>this._getTabs().length,notifyTabActivated:e=>{this.activeIndex=e,this.dispatchEvent(new CustomEvent(So.strings.TAB_ACTIVATED_EVENT,{detail:{index:e},bubbles:!0,cancelable:!0}))}}}firstUpdated(){}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.scrollerElement.updateComplete,void 0===this.mdcFoundation&&this.createFoundation(),e}scrollIndexIntoView(e){this.mdcFoundation.scrollIntoView(e)}}s([g(".mdc-tab-bar")],Eo.prototype,"mdcRoot",void 0),s([g("mwc-tab-scroller")],Eo.prototype,"scrollerElement",void 0),s([g("slot")],Eo.prototype,"tabsSlot",void 0),s([eo((async function(){await this.updateComplete,this.activeIndex!==this._previousActiveIndex&&this.mdcFoundation.activateTab(this.activeIndex)})),u({type:Number})],Eo.prototype,"activeIndex",void 0);const Co=E`.mdc-tab-bar{width:100%}.mdc-tab{height:48px}.mdc-tab--stacked{height:72px}:host{display:block}.mdc-tab-bar{flex:1}mwc-tab{--mdc-tab-height: 48px;--mdc-tab-stacked-height: 72px}`;let To=class extends Eo{};To.styles=[Co],To=s([d("mwc-tab-bar")],To);class Ao{constructor(e,t=!1,r=!1,i=!1){this.key=e,this.metaKey=t,this.shiftKey=r,this.altKey=i}toHash(){const{key:e,metaKey:t,shiftKey:r,altKey:i}=this;return`${e}:${t?1:0}:${r?1:0}:${i?1:0}`}static keyboardEventToHash(e){const{key:t,metaKey:r,shiftKey:i,altKey:n}=e;return`${t}:${r?1:0}:${i?1:0}:${n?1:0}`}static stringToHash(e){return new Ao(e).toHash()}}function Ro(){return"mac"===(-1!==navigator.appVersion.indexOf("Win")?"windows":-1!==navigator.appVersion.indexOf("Linux")?"linux":-1!==navigator.appVersion.indexOf("Mac")?"mac":"windows")?"cmd":"ctrl"}class Oo extends wn{constructor(){super(),this.keyHandlers=new Map,document.addEventListener("keydown",(e=>{this.handleKeyDown(e)}))}getKeyHandlers(e){return this.keyHandlers.has(e)||this.keyHandlers.set(e,[]),this.keyHandlers.get(e)||[]}registerKeyHandler(e,t){const r=e instanceof Ao?e.toHash():Ao.stringToHash(e);return this.getKeyHandlers(r).push(t),()=>{const e=this.getKeyHandlers(r).filter((e=>e!==t));this.keyHandlers.set(r,e)}}unregisterAllKeyHandlers(){for(const e of this.keyHandlers.keys())this.keyHandlers.set(e,[])}handleKeyDown(e){const t=Ao.keyboardEventToHash(e),r=this.getKeyHandlers(t),i=r[r.length-1];return!!i&&(i(),e.stopPropagation(),e.preventDefault(),!0)}makeHelper(e){return new Io(e,this)}}class Io{constructor(e,t){this.namespace=e,this.keyboardService=t,this.unregisterCallbacks=[]}registerKeyHandler(e,t){const r=this.keyboardService.registerKeyHandler(e,t);this.unregisterCallbacks.push(r)}unregisterKeyHandlers(){for(const e of this.unregisterCallbacks)e();this.unregisterCallbacks=[]}}const No=E`.input-control {
  margin: 0;
  padding: 2px;
}

input,
textarea {
  font-family: inherit;
  font-size: inherit;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 2px;
  padding: 0.4em;
}

.text-input-control[type='text'] {
  padding: 6px;
}

.input-control[type='text']::placeholder {
  color: var(--medium-gray);
}

.input-control[type='text']:focus {
  border-width: 2px;
  border-radius: 0.25rem;
  border-color: var(--blue);
}

.input-control[type='range'] {
  opacity: 0.5;
}

.operation-control-prefix,
.operation-control-suffix {
  display: flex;
  align-items: center;
  color: var(--dark-gray);
  font-size: smaller;
  width: 100px;
  user-select: none;
}

.operation-control-suffix {
  margin-left: 10px;
  width: 200px;
}

.operation-control-input {
  display: flex;
  align-items: center;
  width: 280px;
}

.operation-control-input > input,
.operation-control-input > textarea {
  flex: 1;
}

.operation-control-input > textarea {
  height: 130px;
  line-height: 1.4;
}

.operation-control-input > button {
  flex: 0;
  margin-left: 10px;
  display: flex;
  padding: 2px 5px;
}

mwc-checkbox {
  --mdc-checkbox-unchecked-color: var(--blue);
  --mdc-theme-secondary: var(--blue);
  margin-left: -12px;
}

.row {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.helper-operation-container {
  margin-top: 5px;
  display: flex;
  flex-direction: row;
  align-items: baseline;
  font-size: smaller;
}

button.helper-operation {
  border: none;
  text-decoration: underline;
  padding: 0;
}

button.helper-operation:hover {
  background-color: inherit;
  color: inherit;
}
`,Mo=E`.key-command-button {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.key-command-container {
  margin: -4px 10px 0 0;
  width: 90px;
}

.key-command-container.fixed {
  display: flex;
  justify-content: space-between;
  width: 70px;
}

span.key-command {
  padding: 8px;
  color: black;
  font-weight: 700;
  font-family: 'Courier New', Courier, monospace;
  overflow: auto;
  font-size: 85%;
  background-color: var(--light-gray);
  border-radius: 4px;
}

.key-command-container-small {
  padding: 0px 0 3px 8px;
}

span.key-command-small {
  color: black;
  padding: 4px;
  font-size: 70%;
}
`;var Po=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Lo=class extends sn{constructor(){super(...arguments),this.message="",this.keyCommand=new Ao("notImplemented"),this.keyLabel="",this.action=()=>{},this.onHover=e=>{},this.keyboardService=bn.getService(Oo),this.clearKeyHandler=()=>{}}static get styles(){return[ln,No,Mo]}firstUpdated(){this.clearKeyHandler=this.keyboardService.registerKeyHandler(this.keyCommand,(()=>{this.action()}))}disconnectedCallback(){this.clearKeyHandler()}render(){const{message:e}=this;return oe`
      <button
        type="button"
        class="key-command-button"
        @mousedown=${e=>(e.preventDefault(),this.action(),!1)}
        @mouseenter=${()=>{this.onHover(!0)}}
        @mouseleave=${()=>{this.onHover(!1)}}
      >
        ${e} ${this.renderKeyCommand()}
      </button>
    `}renderKeyCommand(){const{keyCommand:e,keyLabel:t}=this,r=Ro(),i=t||e.key;return oe`
      <div class="key-command-container-small">
        ${e.metaKey?oe`<span class="key-command key-command-small">${r}</span
            >${" + "}`:""}
        <span class="key-command key-command-small">${i}</span>
      </div>
    `}};Po([u({type:String})],Lo.prototype,"message",void 0),Po([u({type:Object})],Lo.prototype,"keyCommand",void 0),Po([u({type:String})],Lo.prototype,"keyLabel",void 0),Po([u({type:Object})],Lo.prototype,"action",void 0),Po([u({type:Object})],Lo.prototype,"onHover",void 0),Lo=Po([d("wordcraft-key-command-small")],Lo);var Do=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let $o=class extends sn{constructor(){super(...arguments),this.onEnter=()=>{},this.onClickHelper=()=>{},this.onHover=e=>{},this.autofocus=!1}static get styles(){return[ln,No]}firstUpdated(){const e=this.shadowRoot.querySelector("input.autofocus");if(e instanceof HTMLInputElement){e.focus();const t=e.value;e.value="",e.value=t}}render(){const e=Ge({autofocus:this.autofocus,"text-input-control":!0}),{control:t}=this,r=t.getDescription();return oe`
      <div class="row">
        <div class="operation-control-prefix"
          @mouseenter=${()=>{this.onHover(r)}}
          @mouseleave=${()=>{this.onHover("")}}
        >${t.getPrefix()} :</div>
        <div class="operation-control-input">
          <input
            type='text'
            class=${e}
            @keydown=${e=>"Enter"!==e.key||(e.preventDefault(),e.stopImmediatePropagation(),this.onEnter(),!1)}
            @input=${e=>t.value=e.target.value}
            value='${t.value}'
            placeholder='${t.placeholder}'
            @mouseenter=${()=>{this.onHover(r)}}
            @mouseleave=${()=>{this.onHover("")}}
            ></input>
          </div>
      </div>
      ${this.renderHelperOperationButton()}
    `}renderHelperOperationButton(){const{control:e}=this;if(!e.hasHelperOperation())return"";const t=e.helperOperation.getDescription();return oe`
      <div class="row">
        <div class="operation-control-prefix"></div>
        <span class="helper-operation-container">
          or...
          <button
            type="button"
            class="helper-operation"
            @click=${()=>{this.onClickHelper()}}
            @mouseenter=${()=>{this.onHover(t)}}
            @mouseleave=${()=>{this.onHover("")}}
          >
            ${e.helperOperation.getButtonLabel()}
          </button>
        </span>
      </div>
    `}};Do([u({type:Object})],$o.prototype,"control",void 0),Do([u({type:Object})],$o.prototype,"onEnter",void 0),Do([u({type:Object})],$o.prototype,"onClickHelper",void 0),Do([u({type:Object})],$o.prototype,"onHover",void 0),Do([u({type:Boolean})],$o.prototype,"autofocus",void 0),$o=Do([d("wc-text-input-control")],$o);var Ho=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Fo=class extends sn{constructor(){super(...arguments),this.onCopy=e=>{},this.onEnter=()=>{},this.onClickHelper=()=>{},this.onHover=e=>{},this.autofocus=!1}static get styles(){return[ln,No]}render(){const{control:e}=this,t=e.getDescription();return oe`
      <div class="row">
        <div class="operation-control-prefix">${e.getPrefix()} :</div>
        <div class="operation-control-input">
          <textarea
            placeholder=${e.placeholder}
            class="textarea-control"
            @keydown=${e=>"Enter"!==e.key||(e.preventDefault(),e.stopImmediatePropagation(),this.onEnter(),!1)}
            @input=${t=>e.value=t.target.value}
            @mouseenter=${()=>{this.onHover(t)}}
            @mouseleave=${()=>{this.onHover("")}}
            @copy=${e=>{this.onCopy(e)}}
          >
${e.value}</textarea
          >
          ${this.renderHelperOperationButton()}
        </div>
      </div>
    `}renderHelperOperationButton(){const{control:e}=this;if(!e.hasHelperOperation())return"";const t=e.helperOperation.getDescription();return oe`
      <button
        type="button"
        @click=${()=>{this.onClickHelper()}}
        @mouseenter=${()=>{this.onHover(t)}}
        @mouseleave=${()=>{this.onHover("")}}
      >
        <mwc-icon>auto_awesome</mwc-icon>
      </button>
    `}};var Bo,jo;Ho([u({type:Object,reflect:!0})],Fo.prototype,"control",void 0),Ho([u({type:Object,attribute:!1})],Fo.prototype,"onCopy",void 0),Ho([u({type:Object})],Fo.prototype,"onEnter",void 0),Ho([u({type:Object})],Fo.prototype,"onClickHelper",void 0),Ho([u({type:Object})],Fo.prototype,"onHover",void 0),Ho([u({type:Boolean})],Fo.prototype,"autofocus",void 0),Fo=Ho([d("wc-textarea-control")],Fo);const zo=null!==(jo=null===(Bo=window.ShadyDOM)||void 0===Bo?void 0:Bo.inUse)&&void 0!==jo&&jo;class Uo extends Me{constructor(){super(...arguments),this.disabled=!1,this.containingForm=null,this.formDataListener=e=>{this.disabled||this.setFormData(e.formData)}}findFormElement(){if(!this.shadowRoot||zo)return null;const e=this.getRootNode().querySelectorAll("form");for(const t of Array.from(e))if(t.contains(this))return t;return null}connectedCallback(){var e;super.connectedCallback(),this.containingForm=this.findFormElement(),null===(e=this.containingForm)||void 0===e||e.addEventListener("formdata",this.formDataListener)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.containingForm)||void 0===e||e.removeEventListener("formdata",this.formDataListener),this.containingForm=null}click(){this.formElement&&!this.disabled&&(this.formElement.focus(),this.formElement.click())}firstUpdated(){super.firstUpdated(),this.shadowRoot&&this.mdcRoot.addEventListener("change",(e=>{this.dispatchEvent(new Event("change",e))}))}}Uo.shadowRootOptions={mode:"open",delegatesFocus:!0},s([u({type:Boolean})],Uo.prototype,"disabled",void 0);class Ko extends Uo{constructor(){super(...arguments),this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.name="",this.value="on",this.reducedTouchTarget=!1,this.animationClass="",this.shouldRenderRipple=!1,this.focused=!1,this.mdcFoundationClass=void 0,this.mdcFoundation=void 0,this.rippleElement=null,this.rippleHandlers=new tt((()=>(this.shouldRenderRipple=!0,this.ripple.then((e=>this.rippleElement=e)),this.ripple)))}createAdapter(){return{}}update(e){const t=e.get("indeterminate"),r=e.get("checked"),i=e.get("disabled");if(void 0!==t||void 0!==r||void 0!==i){const e=this.calculateAnimationStateName(!!r,!!t,!!i),n=this.calculateAnimationStateName(this.checked,this.indeterminate,this.disabled);this.animationClass=`${e}-${n}`}super.update(e)}calculateAnimationStateName(e,t,r){return r?"disabled":t?"indeterminate":e?"checked":"unchecked"}renderRipple(){return this.shouldRenderRipple?this.renderRippleTemplate():""}renderRippleTemplate(){return oe`<mwc-ripple
        .disabled="${this.disabled}"
        unbounded></mwc-ripple>`}render(){const e=this.indeterminate||this.checked,t={"mdc-checkbox--disabled":this.disabled,"mdc-checkbox--selected":e,"mdc-checkbox--touch":!this.reducedTouchTarget,"mdc-ripple-upgraded--background-focused":this.focused,"mdc-checkbox--anim-checked-indeterminate":"checked-indeterminate"==this.animationClass,"mdc-checkbox--anim-checked-unchecked":"checked-unchecked"==this.animationClass,"mdc-checkbox--anim-indeterminate-checked":"indeterminate-checked"==this.animationClass,"mdc-checkbox--anim-indeterminate-unchecked":"indeterminate-unchecked"==this.animationClass,"mdc-checkbox--anim-unchecked-checked":"unchecked-checked"==this.animationClass,"mdc-checkbox--anim-unchecked-indeterminate":"unchecked-indeterminate"==this.animationClass},r=this.indeterminate?"mixed":void 0;return oe`
      <div class="mdc-checkbox mdc-checkbox--upgraded ${Ge(t)}">
        <input type="checkbox"
              class="mdc-checkbox__native-control"
              name="${rt(this.name)}"
              aria-checked="${rt(r)}"
              aria-label="${rt(this.ariaLabel)}"
              aria-labelledby="${rt(this.ariaLabelledBy)}"
              aria-describedby="${rt(this.ariaDescribedBy)}"
              data-indeterminate="${this.indeterminate?"true":"false"}"
              ?disabled="${this.disabled}"
              .indeterminate="${this.indeterminate}"
              .checked="${this.checked}"
              .value="${this.value}"
              @change="${this.handleChange}"
              @focus="${this.handleFocus}"
              @blur="${this.handleBlur}"
              @mousedown="${this.handleRippleMouseDown}"
              @mouseenter="${this.handleRippleMouseEnter}"
              @mouseleave="${this.handleRippleMouseLeave}"
              @touchstart="${this.handleRippleTouchStart}"
              @touchend="${this.handleRippleDeactivate}"
              @touchcancel="${this.handleRippleDeactivate}">
        <div class="mdc-checkbox__background"
          @animationend="${this.resetAnimationClass}">
          <svg class="mdc-checkbox__checkmark"
              viewBox="0 0 24 24">
            <path class="mdc-checkbox__checkmark-path"
                  fill="none"
                  d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
          </svg>
          <div class="mdc-checkbox__mixedmark"></div>
        </div>
        ${this.renderRipple()}
      </div>`}setFormData(e){this.name&&this.checked&&e.append(this.name,this.value)}handleFocus(){this.focused=!0,this.handleRippleFocus()}handleBlur(){this.focused=!1,this.handleRippleBlur()}handleRippleMouseDown(e){const t=()=>{window.removeEventListener("mouseup",t),this.handleRippleDeactivate()};window.addEventListener("mouseup",t),this.rippleHandlers.startPress(e)}handleRippleTouchStart(e){this.rippleHandlers.startPress(e)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}handleChange(){this.checked=this.formElement.checked,this.indeterminate=this.formElement.indeterminate}resetAnimationClass(){this.animationClass=""}get isRippleActive(){var e;return(null===(e=this.rippleElement)||void 0===e?void 0:e.isActive)||!1}}s([g(".mdc-checkbox")],Ko.prototype,"mdcRoot",void 0),s([g("input")],Ko.prototype,"formElement",void 0),s([u({type:Boolean,reflect:!0})],Ko.prototype,"checked",void 0),s([u({type:Boolean})],Ko.prototype,"indeterminate",void 0),s([u({type:Boolean,reflect:!0})],Ko.prototype,"disabled",void 0),s([u({type:String,reflect:!0})],Ko.prototype,"name",void 0),s([u({type:String})],Ko.prototype,"value",void 0),s([et,u({type:String,attribute:"aria-label"})],Ko.prototype,"ariaLabel",void 0),s([et,u({type:String,attribute:"aria-labelledby"})],Ko.prototype,"ariaLabelledBy",void 0),s([et,u({type:String,attribute:"aria-describedby"})],Ko.prototype,"ariaDescribedBy",void 0),s([u({type:Boolean})],Ko.prototype,"reducedTouchTarget",void 0),s([p()],Ko.prototype,"animationClass",void 0),s([p()],Ko.prototype,"shouldRenderRipple",void 0),s([p()],Ko.prototype,"focused",void 0),s([b("mwc-ripple")],Ko.prototype,"ripple",void 0),s([f({passive:!0})],Ko.prototype,"handleRippleTouchStart",null);const Wo=E`.mdc-checkbox{padding:calc((40px - 18px) / 2);padding:calc((var(--mdc-checkbox-ripple-size, 40px) - 18px) / 2);margin:calc((40px - 40px) / 2);margin:calc((var(--mdc-checkbox-touch-target-size, 40px) - 40px) / 2)}.mdc-checkbox .mdc-checkbox__ripple::before,.mdc-checkbox .mdc-checkbox__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, #000)}.mdc-checkbox:hover .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-ripple-surface--hover .mdc-checkbox__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__ripple::before,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-checkbox:not(.mdc-ripple-upgraded) .mdc-checkbox__ripple::after{transition:opacity 150ms linear}.mdc-checkbox:not(.mdc-ripple-upgraded):active .mdc-checkbox__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox.mdc-checkbox--selected .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-checkbox--selected .mdc-checkbox__ripple::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-checkbox.mdc-checkbox--selected:hover .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-surface--hover .mdc-checkbox__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-upgraded--background-focused .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded):focus .mdc-checkbox__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded) .mdc-checkbox__ripple::after{transition:opacity 150ms linear}.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded):active .mdc-checkbox__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--selected .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--selected .mdc-checkbox__ripple::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-checkbox .mdc-checkbox__background{top:calc((40px - 18px) / 2);top:calc((var(--mdc-checkbox-ripple-size, 40px) - 18px) / 2);left:calc((40px - 18px) / 2);left:calc((var(--mdc-checkbox-ripple-size, 40px) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((40px - 40px) / 2);top:calc((40px - var(--mdc-checkbox-touch-target-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((40px - var(--mdc-checkbox-touch-target-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((40px - var(--mdc-checkbox-touch-target-size, 40px)) / 2);width:40px;width:var(--mdc-checkbox-touch-target-size, 40px);height:40px;height:var(--mdc-checkbox-touch-target-size, 40px)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unchecked-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unchecked-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color, var(--mdc-theme-secondary, #018786))}100%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unchecked-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.38);border-color:var(--mdc-checkbox-disabled-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0, 0, 0, 0.38);background-color:var(--mdc-checkbox-disabled-color, rgba(0, 0, 0, 0.38))}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-ink-color, #fff)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-ink-color, #fff)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-ink-color, #fff)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-ink-color, #fff)}.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:transparent;pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((48px - 40px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((40px - 48px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((40px - 48px) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((40px - 48px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:48px;width:var(--mdc-checkbox-state-layer-size, 48px);height:48px;height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}:host{outline:none;display:inline-flex;-webkit-tap-highlight-color:transparent}:host([checked]),:host([indeterminate]){--mdc-ripple-color:var(--mdc-theme-secondary, #018786)}.mdc-checkbox .mdc-checkbox__background::before{content:none}`;let Vo=class extends Ko{};Vo.styles=[Wo],Vo=s([d("mwc-checkbox")],Vo);var Go=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Zo=class extends sn{constructor(){super(...arguments),this.onHover=e=>{}}static get styles(){return[ln,No]}render(){const{control:e}=this,t=e.getDescription();return oe`
      <div class="row" style=${Ye({height:"38px"})}>
        <div
          class="operation-control-prefix"
          @mouseenter=${()=>{this.onHover(t)}}
          @mouseleave=${()=>{this.onHover("")}}
        >
          ${e.getPrefix()} :
        </div>
        <mwc-checkbox
          ?checked=${!0===e.value}
          reducedTouchTarget
          @change=${t=>{e.value=t.currentTarget.checked}}
          @mouseenter=${()=>{this.onHover(t)}}
          @mouseleave=${()=>{this.onHover("")}}
        ></mwc-checkbox>
      </div>
    `}};Go([u({type:Object})],Zo.prototype,"control",void 0),Go([u({type:Object})],Zo.prototype,"onHover",void 0),Zo=Go([d("wc-toggle-control")],Zo);var qo=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Yo=class extends sn{constructor(){super(...arguments),this.onHover=e=>{}}static get styles(){return[ln,No]}render(){const{control:e}=this,t=e.getDescription();return oe`
      <div class="row">
        <div class="operation-control-prefix"
          @mouseenter=${()=>{this.onHover(t)}}
          @mouseleave=${()=>{this.onHover("")}}
        >${e.getPrefix()} :</div>
        <input
          type='range'
          class="input-control"
          min="0"
          max="${e.steps.length-1}"
          value=${e.value}
          @input=${t=>e.value=t.target.value}
          @mouseenter=${()=>{this.onHover(t)}}
          @mouseleave=${()=>{this.onHover("")}}
        </input>
        <div class="operation-control-suffix"
          @mouseenter=${()=>{this.onHover(t)}}
          @mouseleave=${()=>{this.onHover("")}}
        >${e.getSuffix()}</div>
      </div>
    `}};qo([u({type:Object})],Yo.prototype,"control",void 0),qo([u({type:Object})],Yo.prototype,"onHover",void 0),Yo=qo([d("wc-step-slider-control")],Yo);class Jo{constructor(e,t=""){this.prefix=e,this.description=t}getPrefix(){return this.prefix instanceof Function?this.prefix(this):this.prefix}getDescription(){return this.description}}class Xo extends Jo{constructor(e){const{prefix:t,description:r,value:i}=e;super(t,r),this.value=i}}oi(Xo,{value:Xt});class Qo extends Jo{constructor(e){const{prefix:t,suffix:r,description:i,value:n,steps:o}=e;super(t,i),this.value=n,this.steps=o,this.suffix=r}getStepValue(){return this.steps[this.value]}getSuffix(){return this.suffix instanceof Function?this.suffix(this):this.suffix?this.suffix:""}}oi(Qo,{value:Xt,steps:Xt});class es extends Jo{constructor(e){const{prefix:t,description:r,value:i,helperOperation:n,placeholder:o=""}=e;super(t,r),this.value=i,this.helperOperation=n,this.placeholder=o}hasHelperOperation(){return null!=this.helperOperation}}oi(es,{value:Xt});class ts extends Jo{constructor(e){const{prefix:t,description:r,helperOperation:i,id:n="",value:o,placeholder:s=""}=e;super(t,r),this.id=n,this.value=o,this.helperOperation=i,this.placeholder=s}hasHelperOperation(){return null!=this.helperOperation}}oi(ts,{value:Xt});class rs extends Error{constructor(e=""){super(e),this.name="CancelStepError",Object.setPrototypeOf(this,rs.prototype)}}class is extends Error{constructor(e=""){super(e),this.name="CancelOperationError",Object.setPrototypeOf(this,is.prototype)}}function ns(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function os(){return[ns()+ns(),ns(),ns(),ns(),ns()+ns()+ns()].join("-")}const ss=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","e.g","Eq","Eqs","er","est","est","et","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","ltd","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","shri","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","pvt","smt","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function as(e){return/^[A-Z][a-z].*/.test(e)||ps(e)}function cs(e){const t=e.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi,"");return~ss.indexOf(t)}function ds(e,t){if("a.m."===e||"p.m."===e){if("day"===t.replace(/\W+/g,"").slice(-3).toLowerCase())return!0}return!1}function ls(e){const t=e.replace(/[\(\)\[\]\{\}]/g,"").match(/(.\.)*/);return t&&t[0].length>0}function hs(e){return e.length<=3||as(e)}function us(e,t){if(t.length>0){if(e<5&&t[0].length<6&&as(t[0]))return!0;return t.filter((e=>/[A-Z]/.test(e.charAt(0)))).length>=3}return!1}function ps(e,t){return t&&(e=e.slice(t-1,t+2)),!isNaN(e)}function ms(e){return e.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function fs(e){return e.match(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/)}function gs(e){let t=0;if((t=e.indexOf("."))>-1||(t=e.indexOf("!"))>-1||(t=e.indexOf("?"))>-1){if(e.charAt(t+1).match(/[a-zA-Z].*/))return[e.slice(0,t),e.slice(t+1),e.charAt(t)]}return!1}function bs(e,t){return t.length>1?t.indexOf(e.slice(-1))>-1:e.slice(-1)===t}function vs(e,t){return e.slice(e.length-t.length)===t}const ys=[".",",",":",";","!","?","-"];function _s(e){return ys.includes(e.slice(-1))}const xs=" @~@ ".trim(),ks=new RegExp("\\S",""),ws=new RegExp("\\S+|\\n","g");function Ss(e){return!ks.test(e)}function Es(e){if(!e||"string"!=typeof e||!e.length)return[];if(!ks.test(e))return[];const t=!0;let r=[],i=[];if(t)i=e.split(/(<br\s*\/?>|\S+|\n+)/),r=i.filter(((e,t)=>t%2));else{const t=e.trim().match(ws);t&&(r=[...t])}let n=0,o=0,s=[],a=[];if(!r||!r.length)return[];const c=r.length;let d=-1;for(let e=0;e<c;e++){if(n++,d+=2,a.push(r[e]),~r[e].indexOf(",")&&(n=0),"."===(h=r[e])||"!"===h||"?"===h||bs(r[e],"?!")||r[e]===xs){s.push(a),n=0,a=[];continue}if((bs(r[e],'"')||bs(r[e],"”"))&&(r[e]=r[e].slice(0,-1)),bs(r[e],".")){if(e+1<c){if(2===r[e].length&&isNaN(r[e].charAt(0)))continue;if(cs(r[e]))continue;if(as(l=r[e+1])||/``|"|'/.test(l.substring(0,2))){if(ds(r[e],r[e+1]))continue;if(us(n,r.slice(e,6)))continue;if(ps(r[e+1])&&hs(r[e]))continue}else{if(vs(r[e],".."))continue;if(ls(r[e]))continue;if(us(n,r.slice(e,5)))continue}}s.push(a),a=[],n=0;continue}if((o=r[e].indexOf("."))>-1){if(ps(r[e],o))continue;if(ls(r[e]))continue;if(fs(r[e])||ms(r[e]))continue}const t=gs(r[e]);if(t){const[e,r,o]=t;a.pop(),a.push(e+o),s.push(a),a=[],n=0,a.push(r),i.splice(d,1,e+o,"",r),d+=2}}var l,h;a.length&&s.push(a),s=s.filter((e=>e.length>0));return s.slice(1).reduce(((e,t)=>{const r=e[e.length-1];return 1===r.length&&/^.{1,2}[.]$/.test(r[0])&&!/[.]/.test(t[0])?(e.pop(),e.push(r.concat(t)),e):(e.push(t),e)}),[s[0]]).map(((e,r)=>{if(t){let t=2*e.length;0===r&&(t+=1);return i.splice(0,t).join("")}return e.join(" ")}))}class Cs{constructor(e,t,r){this.text=e,this.start=t,this.end=r}}class Ts extends Cs{constructor(e,t,r,i=!1){super(e,t,r)}}class As extends Cs{constructor(e,t,r){super(e,t,r)}}function Rs(e){const t=Es(e),r=[];let i,n=0,o=0;(Ss(e)||0===e.length)&&r.push(new As(e,0,e.length));for(let s=0;s<t.length;s++){const a=s===t.length-1;i=t[s];const c=i.length;o+=c;const d=i.search(/\S|$/),l=i.split("").reverse().join("").search(/\S|$/);if(d||0===s){const t=n,i=n+d,o=new As(e.slice(t,i),t,i);r.push(o)}let h=!1;if(a){h=1===Es(i+" and a few more things.").length}const u=n+d,p=o-l,m=new Ts(e.slice(u,p),u,p,h);if(r.push(m),l||a){const t=o-l,i=o,n=new As(e.slice(t,i),t,i);r.push(n)}n+=c}return r}function Os(e,t){for(let r=0;r<e.length;r++){const i=e[r],{start:n,end:o}=i;if(t===n&&t===o)return{index:r,span:i};if(t>=n&&t<=o&&i instanceof As)return{index:r,span:i};if(t>=n&&t<o&&i instanceof Ts)return{index:r,span:i}}const r=e.length-1;return{index:r,span:e[r]}}function Is(e){const{text:t,cursorStart:r,cursorEnd:i}=e;return t.substring(r,i)}function Ns(e){const{text:t,cursorStart:r}=e;return t.substring(0,r)}function Ms(e){const{text:t,cursorEnd:r}=e;return t.substring(r)}function Ps(e,t){const r=Ls(e);let i=r[0],n=0,o=0;for(let e=0;e<r.length;e++){o=e,i=r[o];const s=n+i.length+1;if(n<=t&&s>t)return{paragraph:i,offset:t-n,index:o};n=s}return{paragraph:i,offset:0,index:o}}function Ls(e){return e.split("\n")}function Ds(e,t,r){const i=Ls(t);let n=0;for(let e=0;e<r;e++)n+=i[e].length+1;return{start:e.start+n,end:e.end+n}}function $s(e){const{text:t,cursorStart:r}=e,{paragraph:i,index:n,offset:o}=Ps(t,r),s=Rs(i),{span:a}=Os(s,o);return Ds(a,t,n)}function Hs(e){const{text:t,cursorStart:r}=e,{paragraph:i,offset:n}=Ps(t,r),o=Rs(i),{span:s}=Os(o,n);return i.slice(s.start,s.end)}function Fs(e){const{text:t,cursorStart:r}=e,{paragraph:i,offset:n}=Ps(t,r),o=Rs(i),{span:s}=Os(o,n);return n-s.start}class Bs{constructor(e=[]){this.entries=e,this.index=0}getEntries(){return[...this.entries]}getNEntries(){return this.entries.length}getEntry(e){return this.isWithinRange(e)?this.getEntries()[e]:null}getCurrentEntry(){return this.getEntry(this.index)}getIndex(){return this.index}isWithinRange(e){const t=this.getEntries();return e>=0&&e<t.length}deltaIndex(e){const t=this.getEntries();let r=this.getIndex()+e;r>=t.length?r=0:r<0&&(r=t.length-1),this.index=r}incrementIndex(){this.deltaIndex(1)}decrementIndex(){this.deltaIndex(-1)}removeAtIndex(e){!function(e,t){"string"==typeof e||e.name,xr(0,"function"==typeof e?e:t,this,void 0)}((()=>{e>=0&&e<this.entries.length&&(this.entries.splice(e,1),this.index>0&&this.index>this.entries.length-1&&(this.index=this.entries.length-1))}))}setIndex(e){this.index=e}setEntries(e){this.entries=e,this.index=0}clear(){this.setEntries([])}updateEntry(e,t){this.entries[e]=t}}oi(Bs,{entries:Xt.shallow,index:Xt});class js{constructor(){this.state="NOT_STARTED",this.resolve=()=>{},this.reject=e=>{},this.onStartCallback=()=>{},this.onCancelCallback=()=>{},this.onRestartCallback=()=>{},this.onFinishCallback=()=>{}}get isFinished(){return"FINISHED"===this.state}setup(){}cleanup(){}pause(){}unpause(){}getPromise(){return this.promise||(this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))),this.promise}cancelPromise(){this.promise&&(this.reject(new rs),this.onFinishCallback())}start(){this.state="STARTED",this.setup(),this.onStartCallback()}onStart(e){this.onStartCallback=e}cancel(){this.state="FINISHED",this.cleanup(),this.onCancelCallback()}onCancel(e){this.onCancelCallback=e}cancelOperation(){this.reject(new is)}restart(){this.onRestartCallback()}onRestart(e){this.onRestartCallback=e}finish(){this.state="FINISHED",this.cleanup(),this.resolve(),this.onFinishCallback()}onFinish(e){this.onFinishCallback=e}}class zs extends js{}class Us extends js{}class Ks extends js{constructor(e,t,r=!1,i=!1){super(),this.serviceProvider=e,this.canRewriteChoice=r,this.firstChoiceIsOrigional=i,this.choices=new Bs,this.clearChoiceObserver=()=>{},this.chooseCallback=()=>{},this.pendingChoiceCallback=()=>{},this.removeChoiceCallback=()=>{},this.choices.setEntries(t)}get operationsService(){return this.serviceProvider.operationsService}setup(){this.observeChoices()}cleanup(){this.clearChoiceObserver()}pause(){}unpause(){}observeChoices(){const e=ri((()=>({index:this.choices.getIndex(),nChoices:this.choices.getNEntries()})),(({index:e,nChoices:t})=>{t&&this.setPendingChoiceIndex(e)}));this.clearChoiceObserver=()=>{e(),this.clearChoiceObserver=()=>{}}}onSelectChoice(e){this.chooseCallback=e}onPendingChoice(e){this.pendingChoiceCallback=e,this.choices.getNEntries()&&this.setPendingChoiceIndex(this.choices.getIndex())}onRemoveChoice(e){this.removeChoiceCallback=e}chooseCurrentIndex(){this.chooseIndex(this.choices.getIndex())}chooseIndex(e){const t=this.choices.getEntry(e);null!=t&&this.chooseCallback(t,e)}removeChoiceIndex(e){const t=this.choices.getEntry(e);this.choices.removeAtIndex(e);const r=0===this.choices.getNEntries();null!=t&&this.removeChoiceCallback(t,e,r)}setPendingChoiceIndex(e){const t=this.choices.getEntry(e);null!=t&&this.pendingChoiceCallback(t,e)}}class Ws extends js{constructor(e,t,r,i){super(),this.serviceProvider=e,this.controls=t,this.title=r,this.subtitle=i,this.keyboardServiceHelper=this.keyboardService.makeHelper("controlsStep")}get keyboardService(){return this.serviceProvider.keyboardService}setup(){}cleanup(){}}class Vs extends js{constructor(e){super(),this.message=e}}var Gs=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Zs=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const qs=new class{constructor(e=1e3){this.tokenLimit=e}get wordLimit(){return Math.floor(this.tokenLimit/1.75)}get ellipsis(){return"..."}truncateBeginning(e,t=this.wordLimit){const r=e.split(" "),i=r.length-t;if(i>0){const e=r.slice(i).join(" ");return this.ellipsis+e}return e}truncateEnd(e,t=this.wordLimit){const r=e.split(" ");if(r.length>t){return r.slice(0,t).join(" ")+this.ellipsis}return e}getTruncatedBeforeAndAfter(e,t){const r=e.split(" ").length,i=t.split(" ").length,n=Math.floor(this.wordLimit/2);if(r>n&&i>n){return{before:this.truncateBeginning(e,n),after:this.truncateEnd(t,n)}}if(r>n&&i<=n){const r=n-i;return{before:this.truncateBeginning(e,n+r),after:t}}if(i>n&&r<=n){const i=n-r;return{before:e,after:this.truncateEnd(t,n+i)}}return{before:e,after:t}}truncateAroundCursor(e){const t=Ns(e),r=Ms(e),{before:i,after:n}=this.getTruncatedBeforeAndAfter(t,r);return i+n}continue(e){const t=Ns(e);return{text:this.truncateBeginning(t)}}elaborate(e){const t=Is(e),r=function(e){return e.text}(e);return{toElaborate:t,text:r}}firstSentence(e){const t=$s(e),r=e.text.slice(t.end);return{text:this.truncateEnd(r)}}freeform(e,t){const r=this.truncateAroundCursor(e),{instruction:i}=t;return{text:r,instruction:i}}generateWithinSentence(e){const t=Hs(e),r=Fs(e),i=t.substring(0,r),n=t.substring(r),o=Ns(e),s=Ms(e),{before:a,after:c}=this.getTruncatedBeforeAndAfter(o,s);return{pre:a,post:c,beginningOfSentence:i,endOfSentence:n}}metaPrompt(e){return{text:this.truncateAroundCursor(e)}}nextSentence(e){const t=function(e){const{text:t,cursorStart:r}=e,{paragraph:i,index:n,offset:o}=Ps(t,r),s=Rs(i),{span:a,index:c}=Os(s,o);return Ds(a instanceof As?s[c]:s[c+1],t,n)}(e),r=function(e){const{text:t,cursorStart:r}=e,{paragraph:i,index:n,offset:o}=Ps(t,r),s=Rs(i),{span:a,index:c}=Os(s,o);return Ds(a instanceof Ts?s[c]:s[c-1],t,n)}(e),{text:i}=e,n=i.substring(0,t.start);let o=i.substring(t.end);const s=i.substring(r.start,r.end),{before:a,after:c}=this.getTruncatedBeforeAndAfter(n,o);return{pre:a,post:c,previousSentence:s}}replace(e,t){const r=Ns(e),i=Ms(e),{before:n,after:o}=this.getTruncatedBeforeAndAfter(r,i);return{pre:n,post:o,nWords:t.nWords}}rewriteEndOfSentence(e){const{text:t}=e,r=Hs(e),i=Fs(e),n=r.substring(0,i),o=$s(e),s=t.substring(o.end),a=Ns(e),c=s,{before:d,after:l}=this.getTruncatedBeforeAndAfter(a,c);return{pre:d,post:l,beginningOfSentence:n}}rewriteSelection(e,t){let r=Ns(e);r=function(e,t){const r=Es(e),i=Math.max(0,r.length-1-t);return r.slice(i).join("")}(r,2);let i=Ms(e);var n;n=2,i=Es(i).slice(0,n).join("");const o=Is(e),{before:s,after:a}=this.getTruncatedBeforeAndAfter(r,i);return{pre:s,post:a,toRewrite:o,howToRewrite:t.howToRewrite}}rewriteSentence(e,t){const{text:r}=e,i=Hs(e),n=$s(e),o=r.slice(0,n.start),s=r.slice(n.end),{before:a,after:c}=this.getTruncatedBeforeAndAfter(o,s);return{pre:a,post:c,toRewrite:i,howToRewrite:t.howToRewrite}}};class Ys{constructor(e,t){this.serviceProvider=e,this.trigger=t,this.isHelperOperation=!1,this.isStandaloneOperation=!1,this.resolve=e=>{},this.reject=e=>{},this.instanceControls={},this.currentStep=new zs,this.onFinishCallbacks=new Set,this.onRunCallbacks=new Set}get appService(){return this.serviceProvider.appService}get cursorService(){return this.serviceProvider.cursorService}get keyboardService(){return this.serviceProvider.keyboardService}get metaTextService(){return this.serviceProvider.metaTextService}get operationsService(){return this.serviceProvider.operationsService}get modelService(){return this.serviceProvider.modelService}get sentencesService(){return this.serviceProvider.sentencesService}get textEditorService(){return this.serviceProvider.textEditorService}get lookahead(){return Ys.globalControls.lookahead.value}setOperationData(e){this.operationData=e}getOperationData(){if(!this.operationData)throw new Error("OperationData not initialized");return this.operationData}get dataProcessor(){return qs}onCancel(){return Zs(this,void 0,void 0,(function*(){}))}onRestart(){return Zs(this,void 0,void 0,(function*(){}))}beforeStart(){return Zs(this,void 0,void 0,(function*(){}))}getMessage(){return""}getModel(){return this.modelService.getModel()}hasInstanceControls(){return Object.keys(this.instanceControls).length>0}setCurrentStep(e){this.currentStep&&this.currentStep.finish(),this.currentStep=e,e.start()}isLoading(){return this.currentStep instanceof Vs}resetTextEditor(){this.textEditorService.setStateFromSnapshot(this.initialState)}setInitialState(e){this.initialState=e}isStarted(){return!(this.currentStep instanceof zs)}setIsLoading(){const e=this.getLoadingMessage();this.setCurrentStep(new Vs(e))}setIsFinished(){this.setCurrentStep(new Us)}start(){return Zs(this,void 0,void 0,(function*(){return this._start(),this.createPromise()}))}_start(){return Zs(this,void 0,void 0,(function*(){try{if(this.isStarted())return;yield this.beforeStart(),this.setIsLoading(),yield this.run();for(const e of this.onRunCallbacks)e()}catch(e){this.handleError(e)}}))}restart(){return Zs(this,arguments,void 0,(function*(e=!0){try{yield this.onRestart(),e&&this.resetTextEditor(),this.setIsLoading(),yield this.run()}catch(e){this.handleError(e)}}))}cancel(){return Zs(this,arguments,void 0,(function*(e=!0){return this.currentStep.cancelPromise(),yield this.onCancel(),e&&this.resetTextEditor(),this.finish(!1)}))}handleError(e){e instanceof is?this.cancel():e instanceof rs||this.reject(e)}finish(){return Zs(this,arguments,void 0,(function*(e=!0,t){for(const t of this.onFinishCallbacks)t(e);this.currentStep.isFinished||this.currentStep.finish(),this.resolve(t)}))}onFinish(e){this.onFinishCallbacks.add(e)}onRun(e){this.onRunCallbacks.add(e)}createPromise(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}static getDescription(...e){return""}static getButtonLabel(...e){return""}static isAvailable(e){return!0}}Ys.id="NONE",Ys.controls={},Ys.globalControls={lookahead:new Xo({prefix:"lookahead",description:"Whether Wordcraft will account for text after the cursor.",value:!0})},Gs([Xt.ref],Ys.prototype,"currentStep",void 0);class Js extends Ys{constructor(){super(...arguments),this.canRewriteChoice=!0,this.canStarChoice=!0}get shouldReset(){return!this.isHelperOperation&&!this.isStandaloneOperation}isChoosing(){return this.currentStep instanceof Ks}setChoices(e,t){this.shouldReset&&this.resetTextEditor();let r=!1;t&&(e.unshift(t),r=!0);const i=new Ks(this.serviceProvider,e,this.canRewriteChoice,r);this.setCurrentStep(i),i.onPendingChoice(((e,t)=>{this.shouldReset&&this.resetTextEditor(),this.onPendingChoice(e,t)})),i.onSelectChoice(((e,t)=>{this.shouldReset&&this.resetTextEditor(),this.onSelectChoice(e,t),this.finish(!0,e)})),i.onRemoveChoice(((e,t)=>{this.onRemoveChoice(e,t)})),i.onRestart((()=>{this.restart()})),i.onCancel((()=>{this.cancel()}))}setChoice(e){this.shouldReset&&this.resetTextEditor(),this.onSelectChoice(e,0),this.finish(!0,e)}getPendingChoice(){return this.currentStep instanceof Ks?this.currentStep.choices.getCurrentEntry():null}onRemoveChoice(e,t){}}var Xs=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Qs extends Js{static isAvailable(e){return"END_OF_SECTION"===e||"EMPTY_SECTION"===e}getLoadingMessage(){return"Generating text..."}static getButtonLabel(){return"generate text"}static getDescription(){return"Generate text from the cursor."}getOperatingPosition(){const e=this.textEditorService.getRange();return null===e?this.textEditorService.getEndOfCurrentSection():e.head}run(){return Xs(this,void 0,void 0,(function*(){const e=this.getOperatingPosition();this.textEditorService.insertLoadingAtom(e);const t=this.getOperationData(),r=this.dataProcessor.continue(t),i=yield this.getModel().continue(r);this.setChoices(i)}))}onPendingChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertGeneratedText(e.text,t)}}Qs.id="CONTINUE",Qs.operationType="CONTINUE";var ea=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ta extends Js{static isAvailable(e){return"SELECTION"===e}getLoadingMessage(){return`Elaborating on "${Is(this.getOperationData())}"...`}static getDescription(){return"Elaborate on the selected text."}static getButtonLabel(){return"elaborate selection"}getInsertionPosition(){return this.textEditorService.getEndOfCurrentSection()}getSelectionPosition(){return this.textEditorService.getRange().head}run(){return ea(this,void 0,void 0,(function*(){const e=this.textEditorService.getRange(),t=this.getSelectionPosition(),r=this.getOperationData(),i=Is(r);this.textEditorService.deleteRange(e),this.textEditorService.insertSelectionAtom(t,i);const n=this.dataProcessor.elaborate(r),o=yield this.getModel().elaborate(n);this.setChoices(o)}))}onPendingChoice(e){const t=this.getInsertionPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getInsertionPosition();this.textEditorService.insertGeneratedText(e.text,t)}}ta.id="ELABORATE";var ra=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ia extends Js{static isAvailable(e){return"START_OF_SECTION"===e}getLoadingMessage(){return"Generating text..."}static getButtonLabel(){return"generate text"}static getDescription(){return"Generate text from the cursor."}getOperatingPosition(){return this.sentencesService.getNextSentenceRange().head}run(){return ra(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=this.getOperatingPosition();this.textEditorService.insertLoadingAtom(t);const r=this.dataProcessor.firstSentence(e),i=yield this.getModel().firstSentence(r);this.setChoices(i)}))}onPendingChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertGeneratedText(e.text,t)}}ia.id="FIRST_SENTENCE";var na=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class oa extends Js{constructor(){super(...arguments),this.canRewriteChoice=!1,this.canStarChoice=!1,this.isHelperOperation=!0}getLoadingMessage(){return"Generating prompts..."}static getDescription(){return"Ask the AI for suggested prompts."}static getButtonLabel(){return"get a suggested prompt"}run(){return na(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=this.dataProcessor.metaPrompt(e),r=yield this.getModel().metaPrompt(t);this.setChoices(r)}))}onPendingChoice(){}done(){this.resolve()}}oa.id="META_PROMPT";var sa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class aa extends Js{static isAvailable(e){return"END_OF_SECTION"===e||"EMPTY_SECTION"===e}constructor(e,t,r=""){super(e,t),this.canRewriteChoice=!0,this.instantiatedWithPromptText=!1,this.instanceControls={instruction:new es({prefix:"prompt",description:"A custom prompt for instructing the model what to generate next.",value:aa.controls.instruction.value})},r&&(this.instantiatedWithPromptText=!0,this.instanceControls.instruction.value=r)}static getDescription(){return"Use your own prompt to control what the model generates."}static getButtonLabel(){return"generate text with custom prompt"}getLoadingMessage(){return oe`
      Using the prompt: <br /><br />
      <i>${this.instruction}</i>...
    `}get instruction(){return this.instantiatedWithPromptText?this.instanceControls.instruction.value:aa.controls.instruction.value}getInsertPosition(){return this.textEditorService.getEndOfCurrentSection()}beforeStart(){return sa(this,void 0,void 0,(function*(){if(this.instantiatedWithPromptText)return;if("KEY_COMMAND"!==this.trigger)return;const e=new Ws(this.serviceProvider,aa.controls,"Use your own prompt");return this.setCurrentStep(e),e.getPromise()}))}run(){return sa(this,void 0,void 0,(function*(){const e=this.getInsertPosition();this.textEditorService.insertLoadingAtom(e);const t=this.getOperationData(),r={instruction:this.instruction},i=this.dataProcessor.freeform(t,r),n=yield this.getModel().freeform(i);this.setChoices(n)}))}onPendingChoice(e){const t=this.getInsertPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getInsertPosition();this.textEditorService.insertGeneratedText(e.text,t)}}aa.id="FREEFORM",aa.controls={instruction:new es({prefix:"prompt",description:"A custom prompt for instructing the model what to generate next.",value:"Tell me what happens next.",helperOperation:class extends oa{onSelectChoice(e){return sa(this,void 0,void 0,(function*(){this.onFinish((()=>{this.operationsService.startOperation((()=>new aa(this.serviceProvider,"OPERATION",e.text)),"OPERATION")}))}))}}})};var ca=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class da extends Js{static isAvailable(e){return"WITHIN_SENTENCE"===e}getLoadingMessage(){return"Generating text..."}static getButtonLabel(){return"generate text"}static getDescription(){return"Generate text from the cursor."}get lookahead(){return Ys.globalControls.lookahead.value}getOperationPosition(){return this.textEditorService.getRange().head}run(){return ca(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=this.getOperationPosition();this.textEditorService.insertLoadingAtom(t);const r=this.dataProcessor.generateWithinSentence(e),i=yield this.getModel().generateWithinSentence(r);this.setChoices(i)}))}getOperatingPosition(){return this.textEditorService.getRange().head}onPendingChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertGeneratedText(e.text,t)}}da.id="GENERATE_WITHIN_SENTENCE";var la=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ha extends Js{static isAvailable(e){return"BETWEEN_SENTENCES"===e}getLoadingMessage(){return"Generating text..."}static getButtonLabel(){return"generate text"}static getDescription(){return"Generate text from the cursor."}get lookahead(){return Ys.globalControls.lookahead.value}getOperatingPosition(){return this.sentencesService.getNextSentenceRange().head}run(){return la(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=this.getOperatingPosition();this.textEditorService.insertLoadingAtom(t);const r=this.dataProcessor.nextSentence(e),i=yield this.getModel().nextSentence(r);this.setChoices(i)}))}onPendingChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertGeneratedText(e.text,t)}}ha.id="NEXT_SENTENCE";const ua=["science fiction","mystery","fantasy","children's","drama","fairy tale","folk","historical fiction","horror"],pa=["cyborgs","ninja schools","magical battles","a royal castle","a faraway land","witches","vampires","superhero schools","magical girls","a long journey","wizard schools","haunted forests","a dragon","a wizard tournament","magical crystals","knights riding dragons","a princess","time travel","the underworld","ninjas","dystopian futures","a time travel machine","a boy with magical powers","magic schools","a love triangle","magic artifacts","the moon","alien creatures","a talking crow","a king","wizard battles","a royal family","giant sea snakes","space battles","a giant monster","magic swords","a young prince","robots","ancient rituals","a medieval kingdom","giant talking animals","space stations","the future","haunted forest","magical spells","a wise old man","magic items","an epic love story","pirates","giant dragons","dragons.","dystopian worlds","a cave","magic spells","a powerful sword","magic stones","space exploration","talking animals","dragon riders","a magic academy","wizards","a boy with unusual powers","kingdoms","a desert","an undercover agent","a cave filled with gold","fantasy worlds","super heros","magical creatures","dungeons","a forest","princesses","an old man","a haunted building","superheroes and supervillains","a school for misfits","magical elves","elves","magical artifacts","dragons","wizard wands","superheroes"];var ma=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class fa extends Js{static isAvailable(e){return"EMPTY_DOCUMENT"===e}getLoadingMessage(){return oe`
      <p>Starting a new story...</p>
      <p><i>${this.topic}</i></p>
    `}static getButtonLabel(){return"start new story"}static getDescription(){return"Start a new story from a prompt."}get topic(){return fa.controls.topic.value}getOperatingPosition(){return this.textEditorService.getRange().head}run(){return ma(this,void 0,void 0,(function*(){const e={topic:this.topic},t=yield this.getModel().newStory(e);this.setChoices(t)}))}onPendingChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.getOperatingPosition();this.textEditorService.insertGeneratedText(e.text,t)}}function ga(e){const t=new Set;return e.filter((e=>{const{text:r}=e;return!t.has(r)&&(t.add(r),!0)}))}function ba(e){return e.map((e=>va(e)))}function va(e){return{text:e,uuid:os()}}fa.id="NEW_STORY",fa.controls={topic:new ts({prefix:"prompt",description:"A prompt to start a new story.",value:function(){const e=(()=>{const e=Math.floor(Math.random()*pa.length);return pa[e]})(),t=(()=>{const e=Math.floor(Math.random()*ua.length);return ua[e]})();return`A ${t in["fairy tale","mystery"]?t:t+" story"} about ${e}.`}()})};const ya=["{","}","[","]","|"];const _a=[{text:"a word",max:1},{text:"a phrase",max:5},{text:"a long phrase",max:15},{text:"about twenty words",max:20},{text:"many many words",max:1/0}];var xa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const ka=_a[1].text;class wa extends Js{static isAvailable(e){return"SELECTION"===e}constructor(e,t){super(e,t)}static getDescription(){return"Replace the selected text."}get nWords(){const e=wa.controls.nWords.value;return _a[e].max}get nWordsMessage(){return wa.controls.nWords.getStepValue()}getLoadingMessage(){return`Replacing with ${this.nWordsMessage}...`}static getButtonLabel(){return"replace selection"}beforeStart(){return xa(this,void 0,void 0,(function*(){if("KEY_COMMAND"!==this.trigger)return;const e=new Ws(this.serviceProvider,wa.controls,"Replace the text");return this.setCurrentStep(e),e.getPromise()}))}getSelectionRange(){return this.textEditorService.getRange()}run(){return xa(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=Is(e),r=this.textEditorService.deleteRange(this.getSelectionRange());this.textEditorService.insertSelectionAtom(r,t);const i={nWords:this.nWords},n=this.dataProcessor.replace(e,i),o=yield this.getModel().replace(n),s=va(t);this.setChoices(o,s)}))}onPendingChoice(e){const t=this.textEditorService.deleteRange(this.getSelectionRange());this.textEditorService.insertChoiceAtom(e.text,t)}onSelectChoice(e){const t=this.textEditorService.deleteRange(this.getSelectionRange());this.textEditorService.insertGeneratedText(e.text,t)}}wa.id="REPLACE",wa.nWordsChoices=_a.map((e=>e.text)),wa.controls={nWords:new Qo({prefix:"replace with",suffix:e=>e.getStepValue(),description:"How long the suggestions should be.",value:wa.nWordsChoices.indexOf(ka),steps:wa.nWordsChoices})},oi(wa,{nWords:nr});var Sa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ea extends Js{constructor(){super(...arguments),this.isHelperOperation=!0,this.choiceToRewrite=""}initialize(e){this.choiceToRewrite=e}getLoadingMessage(){return"Rewriting choice..."}static getButtonLabel(){return"rewrite choice"}getMessage(){const e=Ye({fontStyle:"italic"});return oe`
      Rewriting choice: <span style=${e}>${this.choiceToRewrite}</span>
    `}static getDescription(){return"Rewrite a choice in a particular way"}get howToRewrite(){return Ea.controls.howToRewrite.value}beforeStart(){return Sa(this,void 0,void 0,(function*(){const e=new Ws(this.serviceProvider,Ea.controls,"Rewrite the choice",this.choiceToRewrite);return this.setCurrentStep(e),e.getPromise()}))}run(){return Sa(this,void 0,void 0,(function*(){const e=this.getOperationData();e.text=this.choiceToRewrite,e.cursorStart=0,e.cursorEnd=this.choiceToRewrite.length;const t={howToRewrite:this.howToRewrite},r=this.dataProcessor.rewriteSelection(e,t),i=yield this.getModel().rewriteSelection(r),n=va(this.choiceToRewrite);this.setChoices(i,n)}))}onPendingChoice(e,t){}onSelectChoice(e,t){return Sa(this,void 0,void 0,(function*(){}))}done(){this.resolve()}}Ea.id="REWRITE_CHOICE",Ea.controls={howToRewrite:new es({prefix:"make the text",description:"Instructions for how to rewrite the current choice.",value:"more descriptive"})};var Ca=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ta extends Js{static isAvailable(e){return"WITHIN_SENTENCE"===e}getLoadingMessage(){return"Completing sentence..."}static getButtonLabel(){return"rewrite end of sentence"}static getDescription(){return"Rewrite the end of the sentence from the cursor position."}get lookahead(){return Ys.globalControls.lookahead.value}getContinueSentenceRange(){const{tail:e}=this.sentencesService.currentSentenceSerializedRange,{head:t}=this.cursorService.serializedRange,r=e[0],i={head:[r,t[1]],tail:[r,e[1]],direction:1};return this.cursorService.makeMobiledocRangeFromSerialized(i)}run(){return Ca(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=Hs(e),r=Fs(e),i=t.substring(r),n=this.getContinueSentenceRange(),o=this.textEditorService.deleteRange(n);this.textEditorService.insertSelectionAtom(o,i);const s=this.dataProcessor.rewriteEndOfSentence(e),a=yield this.getModel().rewriteEndOfSentence(s),c=va(i);this.setChoices(a,c)}))}onPendingChoice(e){const t=this.getContinueSentenceRange(),r=this.textEditorService.deleteRange(t);this.textEditorService.insertChoiceAtom(e.text,r)}onSelectChoice(e){const t=this.getContinueSentenceRange(),r=this.textEditorService.deleteRange(t);this.textEditorService.insertGeneratedText(e.text,r)}}Ta.id="REWRITE_END_OF_SENTENCE";var Aa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ra extends Js{constructor(){super(...arguments),this.canRewriteChoice=!1,this.canStarChoice=!1,this.isHelperOperation=!0}getLoadingMessage(){return"Getting suggestions..."}static getDescription(){return"Ask the AI for suggestions of how to rewrite the text."}static getButtonLabel(){return"get a suggested way to rewrite"}run(){return Aa(this,void 0,void 0,(function*(){const{text:e}=this.getOperationData(),t={text:e,toRewrite:this.getTextToRewrite(),textType:this.getTextType()},r=yield this.getModel().suggestRewrite(t);this.setChoices(r)}))}onPendingChoice(){}done(){this.resolve()}}Ra.id="SUGGEST_REWRITE";var Oa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ia extends Js{static isAvailable(e){return"SELECTION"===e}constructor(e,t,r=""){super(e,t),this.instantiatedWithHowToRewrite=!1,this.instanceControls={howToRewrite:new es({prefix:"rewrite the text",description:"Instructions for how to rewrite the text.",value:Ia.controls.howToRewrite.value})},r&&(this.instantiatedWithHowToRewrite=!0,this.instanceControls.howToRewrite.value=r)}static getDescription(){return"Rewrite the selected text in a specific way."}static getButtonLabel(){return"rewrite selection"}get howToRewrite(){return this.instantiatedWithHowToRewrite?this.instanceControls.howToRewrite.value:Ia.controls.howToRewrite.value}getLoadingMessage(){return"Rewriting selection..."}beforeStart(){return Oa(this,void 0,void 0,(function*(){if(this.instantiatedWithHowToRewrite)return;if("KEY_COMMAND"!==this.trigger)return;const e=new Ws(this.serviceProvider,Ia.controls,"Rewrite the text");return this.setCurrentStep(e),e.getPromise()}))}run(){return Oa(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=Is(e),r=this.textEditorService.getRange(),i=this.textEditorService.deleteRange(r);this.textEditorService.insertSelectionAtom(i,t);const n={howToRewrite:this.howToRewrite},o=this.dataProcessor.rewriteSelection(e,n),s=yield this.getModel().rewriteSelection(o),a=va(t);this.setChoices(s,a)}))}onPendingChoice(e){const t=this.textEditorService.getRange(),r=this.textEditorService.deleteRange(t);this.textEditorService.insertChoiceAtom(e.text,r)}onSelectChoice(e){const t=this.textEditorService.getRange(),r=this.textEditorService.deleteRange(t);this.textEditorService.insertGeneratedText(e.text,r)}}Ia.id="REWRITE_SELECTION",Ia.controls={howToRewrite:new es({prefix:"rewrite the text",description:"Instructions for how to rewrite the text",value:"to be more descriptive",helperOperation:class extends Ra{getTextType(){const e=this.getTextToRewrite().split(" ").filter((e=>e.length>0));return 1===e.length?"word":"phrase"}getTextToRewrite(){return Is(this.getOperationData())}onSelectChoice(e){return Oa(this,void 0,void 0,(function*(){this.onFinish((()=>{this.operationsService.startOperation((()=>new Ia(this.serviceProvider,"OPERATION",e.data.payload)),"OPERATION")}))}))}}})},oi(Ia,{howToRewrite:nr});var Na=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ma extends Js{static isAvailable(e){return"WITHIN_SENTENCE"===e}constructor(e,t,r=""){super(e,t),this.instantiatedWithHowToRewrite=!1,this.instanceControls={howToRewrite:new es({prefix:"rewrite the sentence",description:"Instructions for how to rewrite the sentence.",value:Ma.controls.howToRewrite.value})},r&&(this.instantiatedWithHowToRewrite=!0,this.instanceControls.howToRewrite.value=r)}getLoadingMessage(){return"Rewriting sentence..."}getMessage(){const e=this.sentencesService.currentSentence,t=Ye({fontStyle:"italic"});return oe`
      Rewriting sentence:
      <span style=${t}>${e}</span>
    `}static getDescription(){return"Adjust the current sentence in a particular way"}static getButtonLabel(){return"rewrite sentence"}getTextWithBlank(){const e=this.sentencesService.currentSentenceSerializedRange,[t,r]=e.head,[,i]=e.tail,n=this.textEditorService.getParagraphs();let o="";for(let e=0;e<n.length;e++){const s=n[e];if(e===t){const e=s.substring(0,r),t=s.substring(i);o+=`${e}${this.getModel().getBlank()}. ${t}`}else o+=s}return o}get howToRewrite(){return this.instantiatedWithHowToRewrite?this.instanceControls.howToRewrite.value:Ma.controls.howToRewrite.value}beforeStart(){return Na(this,void 0,void 0,(function*(){if(this.instantiatedWithHowToRewrite)return;if("KEY_COMMAND"!==this.trigger)return;const e=this.sentencesService.currentSentence,t=new Ws(this.serviceProvider,Ma.controls,"Rewrite the sentence",e);return this.setCurrentStep(t),t.getPromise()}))}run(){return Na(this,void 0,void 0,(function*(){const e=this.getOperationData(),t=Hs(e);this.currentSentenceSerializedRange=this.sentencesService.currentSentenceSerializedRange;const r=this.sentencesService.getCurrentSentenceRange(),i=this.textEditorService.deleteRange(r);this.textEditorService.insertSelectionAtom(i,t);const n={howToRewrite:this.howToRewrite},o=this.dataProcessor.rewriteSentence(e,n),s=yield this.getModel().rewriteSentence(o),a=va(t);this.setChoices(s,a)}))}onPendingChoice(e){const t=this.currentSentenceSerializedRange,r=this.cursorService.makeMobiledocRangeFromSerialized(t),i=this.textEditorService.deleteRange(r);this.textEditorService.insertChoiceAtom(e.text,i)}onSelectChoice(e){return Na(this,void 0,void 0,(function*(){const t=this.currentSentenceSerializedRange,r=this.cursorService.makeMobiledocRangeFromSerialized(t),i=this.textEditorService.deleteRange(r);this.textEditorService.insertGeneratedText(e.text,i)}))}done(){this.resolve()}}Ma.id="REWRITE_SENTENCE",Ma.controls={howToRewrite:new es({prefix:"rewrite the sentence",description:"Instructions for how to rewrite the sentence.",value:"to be more descriptive",helperOperation:class extends Ra{getTextType(){return"sentence"}getTextToRewrite(){return Hs(this.getOperationData())}onSelectChoice(e){return Na(this,void 0,void 0,(function*(){this.onFinish((()=>{this.operationsService.startOperation((()=>new Ma(this.serviceProvider,"OPERATION",e.data.payload)),"OPERATION")}))}))}}})};var Pa=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class La extends wn{constructor(e){super(),this.serviceProvider=e,this.isError=!1,this.allOperations=[],this.operationStack=[],this.onRunCallbacks=new Set,this.hoverTooltip=""}get configService(){return this.serviceProvider.configService}get cursorService(){return this.serviceProvider.cursorService}get sentencesService(){return this.serviceProvider.sentencesService}get textEditorService(){return this.serviceProvider.textEditorService}getOperationSite(){const{isCursorSelection:e,isCursorAtEndOfSection:t,isCursorAtStartOfSection:r,isCurrentSectionEmpty:i}=this.cursorService,{isCursorWithinSentence:n,isCursorBetweenSentences:o}=this.sentencesService;return this.textEditorService.isEmpty?"EMPTY_DOCUMENT":e?"SELECTION":i?"EMPTY_SECTION":r?"START_OF_SECTION":t?"END_OF_SECTION":n?"WITHIN_SENTENCE":o?"BETWEEN_SENTENCES":"NONE"}get availableOperations(){const e=this.getOperationSite();return this.allOperations.filter((t=>t.isAvailable(e)))}get currentOperation(){const e=this.operationStack.length-1;return this.operationStack[e]?this.operationStack[e]:null}get isInOperation(){return!!this.currentOperation}get isChoosing(){return this.isInOperation&&this.currentOperation instanceof Js&&this.currentOperation.currentStep instanceof Ks&&this.currentOperation.currentStep.choices.getNEntries()>0}onRun(e){this.onRunCallbacks.add(e)}removeOperation(e){this.operationStack=this.operationStack.filter((t=>t!==e))}setHoverTooltip(e){this.hoverTooltip=e}clearHoverTooltip(){this.hoverTooltip=""}finalizeOperation(){this.isInOperation||(this.textEditorService.enableEditor(),this.textEditorService.setLastSnapshot(),this.textEditorService.nextChangeTriggersUndoSnapshot=!0)}registerOperation(e){this.allOperations.push(e)}registerOperations(...e){this.allOperations.push(...e)}triggerOperation(e,t){if(null!=e){const r=this.makeOperationFactory(e,t);this.startOperation(r,t)}}makeOperationFactory(e,t){return()=>new e(this.serviceProvider,t)}buildOperation(e,t){return new e(this.serviceProvider,t)}cancelCurrentOperation(){this.currentOperation&&this.currentOperation.cancel()}startOperationWithParams(e,t){return Pa(this,arguments,void 0,(function*(e,t,r="APP"){return this.startOperation((()=>new e(this.serviceProvider,r,t)))}))}startOperation(e){return Pa(this,arguments,void 0,(function*(e,t="APP"){const r=function(e){for(;e=Object.getPrototypeOf(e);)if("Operation"===e.name)return!0;return!1}(e)?this.makeOperationFactory(e,t):e,i=this.textEditorService.getStateSnapshot();this.isInOperation||(this.textEditorService.disableEditor(),this.textEditorService.maybeMakePseudoSelection(),"OPERATION"!==t&&this.textEditorService.setUndo());const n=r(),o=this.cursorService.getOffsetRange(),s={id:os(),documentId:this.textEditorService.documentId,timestamp:Date.now(),text:this.textEditorService.getPlainText(),cursorStart:o.start,cursorEnd:o.end};n.setOperationData(s),n.onFinish((e=>{this.removeOperation(n),n.isHelperOperation&&e||this.finalizeOperation()})),n.onRun((()=>{for(const e of this.onRunCallbacks)e(n)})),this.operationStack.push(n);const a=this.currentOperation;let c;try{a.setInitialState(i);const e=a.start();c=yield e}catch(e){if(a.resetTextEditor(),a.finish(),e instanceof is)return;throw this.isError=!0,e}return this.textEditorService.triggerUpdateCallbacks(),c}))}rewriteCurrentChoice(){return Pa(this,void 0,void 0,(function*(){const e=this.currentOperation;if(e instanceof Js){const t=e.currentStep;t.pause();const r=t.choices.getCurrentEntry();if(null==r)return;const i=t.choices.getIndex();return this.startOperation((()=>{const n=this.serviceProvider,o=new Ea(n,"OPERATION");return o.initialize(r.text),o.onPendingChoice=e=>{t.choices.updateEntry(i,e)},o.onSelectChoice=()=>Pa(this,void 0,void 0,(function*(){return t.chooseIndex(i),yield o.finish(),e.finish()})),o.onCancel=()=>Pa(this,void 0,void 0,(function*(){t.choices.updateEntry(i,r),t.unpause()})),o}),"OPERATION")}}))}}oi(La,{allOperations:Xt,availableOperations:nr,operationStack:Xt,currentOperation:nr,isChoosing:nr,isError:Xt,isInOperation:nr,hoverTooltip:Xt});var Da=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let $a=class extends sn{constructor(){super(...arguments),this.operationsService=bn.getService(La),this.onEnter=()=>{},this.autofocus=!1}static get styles(){return[ln,E`
        .row {
          display: flex;
          flex-direction: row;
          align-items: center;
          padding: 3px 0;
        }
      `]}render(){const{controls:e}=this;if(e)return oe`${Object.values(e).map((e=>oe` <div class="row">${this.renderControl(e)}</div> `))}`}renderControl(e){const t=e=>{this.operationsService.setHoverTooltip(e)};return e instanceof es?oe`
        <wc-text-input-control
          .onClickHelper=${()=>{if(e.hasHelperOperation()){const t=e.helperOperation;this.operationsService.startOperation(t,"CONTROL")}}}
          .control=${e}
          .onEnter=${()=>{this.onEnter()}}
          .onHover=${t}
          ?autofocus=${this.autofocus}
        ></wc-text-input-control>
      `:e instanceof Qo?oe`
        <wc-step-slider-control .control=${e} .onHover=${t}>
        </wc-step-slider-control>
      `:e instanceof Xo?oe`
        <wc-toggle-control
          .control=${e}
          .onHover=${t}
        ></wc-toggle-control>
      `:e instanceof ts?oe`
        <wc-textarea-control
          .onClickHelper=${()=>{if(e.hasHelperOperation()){const t=e.helperOperation;this.operationsService.startOperation(t,"CONTROL")}}}
          .control=${e}
          .onEnter=${()=>{this.onEnter()}}
          .onHover=${t}
          ?autofocus=${this.autofocus}
        ></wc-textarea-control>
      `:""}};Da([u({type:Object})],$a.prototype,"controls",void 0),Da([u({type:Object})],$a.prototype,"onEnter",void 0),Da([u({type:Boolean})],$a.prototype,"autofocus",void 0),$a=Da([d("wc-operation-controls")],$a);var Ha=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Fa extends wn{constructor(e){super(),this.serviceProvider=e,this.shouldIncludeStory=!0,this.currentMessage="",this.isLoading=!1,this.messages=[],this.didResetMessagesHandlers=[]}get configService(){return this.serviceProvider.configService}get modelService(){return this.serviceProvider.modelService}get textEditorService(){return this.serviceProvider.textEditorService}get messagesToDisplay(){return[this.getPreamble(),...this.messages]}getPreamble(){return"Hello, I'm Wordcraft, your story writing assistant. What would you like me to help with?"}getUserStoryAndResponse(){return[`Here's my story so far: {${this.textEditorService.getPlainText()}}`,"That's a great story! what would you like me to help with?"]}getMessagesForQuery(){return this.shouldIncludeStory?[this.getPreamble(),...this.getUserStoryAndResponse(),...this.messages]:this.messagesToDisplay}getDialogParams(){const e=this.getMessagesForQuery().map(((e,t)=>({content:e,author:t%2==0?"model":"user"})));return{messages:e}}sendMessage(){return Ha(this,void 0,void 0,(function*(){if(0===this.currentMessage.length)return;this.messages.push(this.currentMessage),this.isLoading=!0;const e=this.modelService.getDialogModel(),t=yield e.query(this.getDialogParams());try{const e=t[0].text;this.messages.push(e),this.currentMessage="",this.isLoading=!1}catch(e){console.error(e),this.isLoading=!1}}))}didResetMessages(e){this.didResetMessagesHandlers.push(e)}reset(){for(const e of this.didResetMessagesHandlers)e();this.messages=[]}undoLastTurn(){0!==this.messages.length&&(this.currentMessage=this.messages[this.messages.length-2],this.messages=this.messages.slice(0,this.messages.length-2))}}oi(Fa,{currentMessage:Xt,isLoading:Xt,messages:Xt,messagesToDisplay:nr,shouldIncludeStory:Xt});const Ba=E`:host {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 50px);
}

.messages-container {
  flex: 1;
  overflow: auto;
  padding: 35px;
}

.input-container {
  flex: 0;
  border-top: 1px solid var(--medium-gray);
  padding: 20px 15px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.input-container.disabled {
  opacity: 0.7;
  pointer-events: none;
}

.left-side-msg,
.right-side-msg {
  overflow: hidden;
  flex-direction: row;
  width: 100%;
  display: flex;
}

.left-side-msg {
  justify-content: flex-start;
}

.right-side-msg {
  justify-content: flex-end;
}

.usr-msg {
  --text-bubble-text_-_background-color: var(--blue);
  --text-bubble-text_-_border-radius: 24px 24px 0 24px;
  --text-bubble-text_-_color: #fff;
  --text-bubble-text_-_white-space: pre-wrap;
  --text-bubble-text_-_border-style: initial;
  --text-bubble-text_-_border-width: initial;
  --text-bubble-text_-_border-color: initial;
  --text-bubble-text_-_font-weight: initial;
  --text-bubble-text_-_font-style: initial;
}

.agent-msg {
  --text-bubble-text_-_background-color: #f3f3f3;
  --text-bubble-text_-_border-radius: 24px 24px 24px 0;
  --text-bubble-text_-_border-style: solid;
  --text-bubble-text_-_border-width: thin;
  --text-bubble-text_-_border-color: lightgray;
  --text-bubble-text_-_color: #616161;
  --text-bubble-text_-_white-space: pre-wrap;
}

.bubble-text {
  display: flex;
  color: black;
  margin-bottom: 8px;
  padding: 12px 16px;
  outline: none;
  background-color: var(--text-bubble-text_-_background-color);
  border-radius: var(--text-bubble-text_-_border-radius);
  color: var(--text-bubble-text_-_color, black);
  white-space: var(--text-bubble-text_-_white-space);
  font-family: var(--text-bubble-text_-_font-family);
  border-style: var(--text-bubble-text_-_border-style);
  border-width: var(--text-bubble-text_-_border-width);
  border-color: var(--text-bubble-text_-_border-color);
  font-weight: var(--text-bubble-text_-_font-weight);
  font-style: var(--text-bubble-text_-_font-style);
}

.row {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  width: 100%;
}

.row.centered {
  align-items: center;
}

textarea {
  padding: 6px;
  font-family: inherit;
  font-size: inherit;
  box-sizing: border-box;
  border: 1px solid rgb(204, 204, 204);
  border-radius: 2px;
  padding: 0.4em;
  width: 100%;
  height: 100px;
  resize: none;
}

mwc-checkbox {
  --mdc-checkbox-unchecked-color: var(--blue);
  --mdc-theme-secondary: var(--blue);
  margin-left: -12px;
}

.buttons-container button {
  flex: 0 1 0%;
  margin-left: 10px;
  display: flex;
  padding: 2px 5px;
  margin-bottom: 10px;
}

.buttons-container {
  display: flex;
  flex-direction: column;
}

.loading-wrapper {
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  margin: 5px 30px;
}

.dot-flashing {
  position: relative;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--blue);
  color: var(--blue);
  animation: dotFlashing 1s infinite linear alternate;
  animation-delay: 0.5s;
}

.dot-flashing::before,
.dot-flashing::after {
  content: '';
  display: inline-block;
  position: absolute;
  top: 0;
}

.dot-flashing::before {
  left: -15px;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--blue);
  color: var(--blue);
  animation: dotFlashing 1s infinite alternate;
  animation-delay: 0s;
}

.dot-flashing::after {
  left: 15px;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--blue);
  color: var(--blue);
  animation: dotFlashing 1s infinite alternate;
  animation-delay: 1s;
}

@keyframes dotFlashing {
  0% {
    opacity: 1;
  }
  50%,
  100% {
    opacity: 0.3;
  }
}
`;var ja=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let za=class extends sn{constructor(){super(...arguments),this.chatService=bn.getService(Fa),this.nMessages=0,this.onKeyDown=e=>"Enter"!==e.key||(e.preventDefault(),e.stopImmediatePropagation(),this.chatService.sendMessage(),!1)}static get styles(){return[ln,Ba]}updated(){if(this.chatService.messages.length!==this.nMessages){const e=this.shadowRoot.querySelector(".messages-container");e.scrollTop=e.scrollHeight,this.nMessages=this.chatService.messages.length}}render(){const{isLoading:e,currentMessage:t}=this.chatService,r=Ge({"input-container":!0,disabled:this.chatService.isLoading}),i=e||0===t.length;return oe`
      <div class="messages-container">${this.renderMessages()}</div>
      <div class=${r}>
        <div class="row">
          <textarea
            ?disabled=${e}
            type="text"
            class="text-input"
            @keydown=${this.onKeyDown}
            .value="${t}"
            @input=${e=>this.chatService.currentMessage=e.target.value}
            placeholder=${"Say something to Wordcraft..."}
          >
          </textarea>
          <div class="buttons-container">
            <button
              type="button"
              ?disabled=${i}
              @click=${()=>{this.chatService.sendMessage()}}
            >
              <mwc-icon>send</mwc-icon>
            </button>
            <button
              type="button"
              ?disabled=${e}
              @click=${()=>{this.chatService.undoLastTurn()}}
            >
              <mwc-icon>undo</mwc-icon>
            </button>
            <button
              type="button"
              ?disabled=${e}
              @click=${()=>{this.chatService.reset()}}
            >
              <mwc-icon>refresh</mwc-icon>
            </button>
          </div>
        </div>
        <div class="row centered">
          <mwc-checkbox
            ?checked=${this.chatService.shouldIncludeStory}
            reducedTouchTarget
            @change=${e=>{this.chatService.shouldIncludeStory=e.currentTarget.checked}}
          ></mwc-checkbox>
          <div class="toggle-label">${"Let Wordcraft read your story"}</div>
        </div>
      </div>
    `}renderMessages(){const e=this.chatService.messagesToDisplay.map(((e,t)=>{const r=t%2==0;return oe`
          <div class=${r?"left-side-msg":"right-side-msg"}>
            <div class="bubble-text ${r?"agent-msg":"usr-msg"}">${e}</div>
          </div>
        `}));if(this.chatService.isLoading){const t=oe`
        <div class="left-side-msg">
          <div class="bubble-text agent-msg">
            <div class="loading-wrapper">
              <div class="dot-flashing"></div>
            </div>
          </div>
        </div>
      `;e.push(t)}return e}};za=ja([d("wordcraft-chat")],za);class Ua extends Te{constructor(){super(...arguments),this.indeterminate=!1,this.progress=0,this.density=0,this.closed=!1}open(){this.closed=!1}close(){this.closed=!0}render(){const e={"mdc-circular-progress--closed":this.closed,"mdc-circular-progress--indeterminate":this.indeterminate},t=48+4*this.density,r={width:`${t}px`,height:`${t}px`};return oe`
      <div
        class="mdc-circular-progress ${Ge(e)}"
        style="${Ye(r)}"
        role="progressbar"
        aria-label="${rt(this.ariaLabel)}"
        aria-valuemin="0"
        aria-valuemax="1"
        aria-valuenow="${rt(this.indeterminate?void 0:this.progress)}">
        ${this.renderDeterminateContainer()}
        ${this.renderIndeterminateContainer()}
      </div>`}renderDeterminateContainer(){const e=48+4*this.density,t=e/2,r=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,i=6.2831852*r,n=(1-this.progress)*i,o=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return oe`
      <div class="mdc-circular-progress__determinate-container">
        <svg class="mdc-circular-progress__determinate-circle-graphic"
             viewBox="0 0 ${e} ${e}">
          <circle class="mdc-circular-progress__determinate-track"
                  cx="${t}" cy="${t}" r="${r}"
                  stroke-width="${o}"></circle>
          <circle class="mdc-circular-progress__determinate-circle"
                  cx="${t}" cy="${t}" r="${r}"
                  stroke-dasharray="${6.2831852*r}"
                  stroke-dashoffset="${n}"
                  stroke-width="${o}"></circle>
        </svg>
      </div>`}renderIndeterminateContainer(){return oe`
      <div class="mdc-circular-progress__indeterminate-container">
        <div class="mdc-circular-progress__spinner-layer">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
      </div>`}renderIndeterminateSpinnerLayer(){const e=48+4*this.density,t=e/2,r=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,i=6.2831852*r,n=.5*i,o=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return oe`
        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${e} ${e}">
            <circle cx="${t}" cy="${t}" r="${r}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${n}"
                    stroke-width="${o}"></circle>
          </svg>
        </div>
        <div class="mdc-circular-progress__gap-patch">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${e} ${e}">
            <circle cx="${t}" cy="${t}" r="${r}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${n}"
                    stroke-width="${.8*o}"></circle>
          </svg>
        </div>
        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${e} ${e}">
            <circle cx="${t}" cy="${t}" r="${r}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${n}"
                    stroke-width="${o}"></circle>
          </svg>
        </div>`}update(e){super.update(e),e.has("progress")&&(this.progress>1&&(this.progress=1),this.progress<0&&(this.progress=0))}}s([u({type:Boolean,reflect:!0})],Ua.prototype,"indeterminate",void 0),s([u({type:Number,reflect:!0})],Ua.prototype,"progress",void 0),s([u({type:Number,reflect:!0})],Ua.prototype,"density",void 0),s([u({type:Boolean,reflect:!0})],Ua.prototype,"closed",void 0),s([et,u({type:String,attribute:"aria-label"})],Ua.prototype,"ariaLabel",void 0);class Ka extends Ua{renderIndeterminateContainer(){return oe`
      <div class="mdc-circular-progress__indeterminate-container">
        <div class="mdc-circular-progress__spinner-layer mdc-circular-progress__color-1">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
        <div class="mdc-circular-progress__spinner-layer mdc-circular-progress__color-2">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
        <div class="mdc-circular-progress__spinner-layer mdc-circular-progress__color-3">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
        <div class="mdc-circular-progress__spinner-layer mdc-circular-progress__color-4">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
      </div>`}}const Wa=E`.mdc-circular-progress__determinate-circle,.mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-theme-primary, #6200ee)}.mdc-circular-progress__determinate-track{stroke:transparent}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:transparent}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}:host{display:inline-flex}.mdc-circular-progress__determinate-track{stroke:transparent;stroke:var(--mdc-circular-progress-track-color, transparent)}.mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-circular-progress-bar-color-1, var(--mdc-theme-primary, #6200ee))}.mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-circular-progress-bar-color-2, var(--mdc-theme-primary, #6200ee))}.mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-circular-progress-bar-color-3, var(--mdc-theme-primary, #6200ee))}.mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-circular-progress-bar-color-4, var(--mdc-theme-primary, #6200ee))}:host{display:inline-flex}`;let Va=class extends Ka{};Va.styles=[Wa],Va=s([d("mwc-circular-progress-four-color")],Va);class Ga extends Te{constructor(){super(...arguments),this.mini=!1,this.exited=!1,this.disabled=!1,this.extended=!1,this.showIconAtEnd=!1,this.reducedTouchTarget=!1,this.icon="",this.label="",this.shouldRenderRipple=!1,this.useStateLayerCustomProperties=!1,this.rippleHandlers=new tt((()=>(this.shouldRenderRipple=!0,this.ripple)))}render(){const e=this.mini&&!this.reducedTouchTarget,t={"mdc-fab--mini":this.mini,"mdc-fab--touch":e,"mdc-fab--exited":this.exited,"mdc-fab--extended":this.extended,"icon-end":this.showIconAtEnd},r=this.label?this.label:this.icon;return oe`<button
          class="mdc-fab ${Ge(t)}"
          ?disabled="${this.disabled}"
          aria-label="${r}"
          @mouseenter=${this.handleRippleMouseEnter}
          @mouseleave=${this.handleRippleMouseLeave}
          @focus=${this.handleRippleFocus}
          @blur=${this.handleRippleBlur}
          @mousedown=${this.handleRippleActivate}
          @touchstart=${this.handleRippleStartPress}
          @touchend=${this.handleRippleDeactivate}
          @touchcancel=${this.handleRippleDeactivate}><!--
        -->${this.renderBeforeRipple()}<!--
        -->${this.renderRipple()}<!--
        -->${this.showIconAtEnd?this.renderLabel():""}<!--
        --><span class="material-icons mdc-fab__icon"><!--
          --><slot name="icon">${this.icon}</slot><!--
       --></span><!--
        -->${this.showIconAtEnd?"":this.renderLabel()}<!--
        -->${this.renderTouchTarget()}<!--
      --></button>`}renderIcon(){return oe``}renderTouchTarget(){const e=this.mini&&!this.reducedTouchTarget;return oe`${e?oe`<div class="mdc-fab__touch"></div>`:""}`}renderLabel(){const e=""!==this.label&&this.extended;return oe`${e?oe`<span class="mdc-fab__label">${this.label}</span>`:""}`}renderBeforeRipple(){return oe``}renderRipple(){return this.shouldRenderRipple?oe`<mwc-ripple class="ripple"
        .internalUseStateLayerCustomProperties="${this.useStateLayerCustomProperties}"
         ></mwc-ripple>`:""}handleRippleActivate(e){const t=()=>{window.removeEventListener("mouseup",t),this.handleRippleDeactivate()};window.addEventListener("mouseup",t),this.handleRippleStartPress(e)}handleRippleStartPress(e){this.rippleHandlers.startPress(e)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}Ga.shadowRootOptions={mode:"open",delegatesFocus:!0},s([b("mwc-ripple")],Ga.prototype,"ripple",void 0),s([u({type:Boolean})],Ga.prototype,"mini",void 0),s([u({type:Boolean})],Ga.prototype,"exited",void 0),s([u({type:Boolean})],Ga.prototype,"disabled",void 0),s([u({type:Boolean})],Ga.prototype,"extended",void 0),s([u({type:Boolean})],Ga.prototype,"showIconAtEnd",void 0),s([u({type:Boolean})],Ga.prototype,"reducedTouchTarget",void 0),s([u()],Ga.prototype,"icon",void 0),s([u()],Ga.prototype,"label",void 0),s([p()],Ga.prototype,"shouldRenderRipple",void 0),s([p()],Ga.prototype,"useStateLayerCustomProperties",void 0),s([f({passive:!0})],Ga.prototype,"handleRippleStartPress",null);const Za=E`:host .mdc-fab .material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{outline:none;--mdc-ripple-color: currentcolor;user-select:none;-webkit-tap-highlight-color:transparent;display:inline-flex;-webkit-tap-highlight-color:transparent;display:inline-flex;outline:none;user-select:none}:host .mdc-touch-target-wrapper{display:inline}:host .mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}:host .mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}:host .mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}:host .mdc-fab::-moz-focus-inner{padding:0;border:0}:host .mdc-fab:hover{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab.mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(.mdc-ripple-upgraded):focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab .mdc-fab__focus-ring{position:absolute}:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc( 100% + 4px );width:calc( 100% + 4px )}@media screen and (forced-colors: active){:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}:host .mdc-fab:active,:host .mdc-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus{outline:none}:host .mdc-fab:hover{cursor:pointer}:host .mdc-fab>svg{width:100%}:host .mdc-fab--mini{width:40px;height:40px}:host .mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}:host .mdc-fab--extended .mdc-fab__ripple{border-radius:24px}:host .mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] :host .mdc-fab--extended .mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] :host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}:host .mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}:host .mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}:host .mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){:host .mdc-fab::before{border-color:CanvasText}}:host .mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}:host .mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}:host .mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12)}:host .mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}:host .mdc-fab,:host .mdc-fab:not(:disabled) .mdc-fab__icon,:host .mdc-fab:not(:disabled) .mdc-fab__label,:host .mdc-fab:disabled .mdc-fab__icon,:host .mdc-fab:disabled .mdc-fab__label{color:#fff;color:var(--mdc-theme-on-secondary, #fff)}:host .mdc-fab:not(.mdc-fab--extended){border-radius:50%}:host .mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}:host .mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}:host .mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}:host .mdc-fab::-moz-focus-inner{padding:0;border:0}:host .mdc-fab:hover{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab.mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(.mdc-ripple-upgraded):focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab .mdc-fab__focus-ring{position:absolute}:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc( 100% + 4px );width:calc( 100% + 4px )}@media screen and (forced-colors: active){:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){:host .mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,:host .mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}:host .mdc-fab:active,:host .mdc-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus{outline:none}:host .mdc-fab:hover{cursor:pointer}:host .mdc-fab>svg{width:100%}:host .mdc-fab--mini{width:40px;height:40px}:host .mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}:host .mdc-fab--extended .mdc-fab__ripple{border-radius:24px}:host .mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] :host .mdc-fab--extended .mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] :host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}:host .mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}:host .mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}:host .mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){:host .mdc-fab::before{border-color:CanvasText}}:host .mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}:host .mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}:host .mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab .ripple{overflow:hidden}:host .mdc-fab:not(.mdc-fab--extended) .ripple{border-radius:50%}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:24px}:host .mdc-fab .mdc-fab__label{z-index:0}:host .mdc-fab .mdc-fab__icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}:host .mdc-fab--extended.mdc-fab--exited .mdc-fab__icon ::slotted(*){transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab{padding-top:0px;padding-top:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-right:0px;padding-right:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-bottom:0px;padding-bottom:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-left:0px;padding-left:max(0px, var(--mdc-fab-focus-outline-width, 0px));box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12))}:host .mdc-fab:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(:disabled):not(.mdc-ripple-upgraded):focus{border-color:initial;border-color:var(--mdc-fab-focus-outline-color, initial)}:host .mdc-fab:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(:disabled):not(.mdc-ripple-upgraded):focus{border-style:solid;border-width:var(--mdc-fab-focus-outline-width, 0px);padding-top:0px;padding-top:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-right:0px;padding-right:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-bottom:0px;padding-bottom:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-left:0px;padding-left:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1))}:host .mdc-fab:hover,:host .mdc-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}:host .mdc-fab:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12))}:host .mdc-fab .ripple{overflow:hidden}:host .mdc-fab .mdc-fab__label{z-index:0}:host .mdc-fab:not(.mdc-fab--extended) .ripple{border-radius:50%}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:24px}:host .mdc-fab .mdc-fab__icon{width:24px;width:var(--mdc-icon-size, 24px);height:24px;height:var(--mdc-icon-size, 24px);font-size:24px;font-size:var(--mdc-icon-size, 24px);transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform;display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab.mdc-fab--extended{padding-top:0px;padding-top:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-right:20px;padding-right:max(var(--mdc-fab-extended-label-padding, 20px), var(--mdc-fab-focus-outline-width, 0px));padding-bottom:0px;padding-bottom:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-left:20px;padding-left:max(var(--mdc-fab-extended-label-padding, 20px), var(--mdc-fab-focus-outline-width, 0px))}:host .mdc-fab.mdc-fab--extended:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab.mdc-fab--extended:not(:disabled):not(.mdc-ripple-upgraded):focus{border-style:solid;border-width:var(--mdc-fab-focus-outline-width, 0px);padding-top:0px;padding-top:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-right:20px;padding-right:max(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-bottom:0px;padding-bottom:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-left:20px;padding-left:max(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)) * -1))}:host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon{margin-left:12px;margin-left:var(--mdc-fab-extended-icon-padding, 12px);margin-right:calc(12px - 20px);margin-right:calc(var(--mdc-fab-extended-icon-padding, 12px) - var(--mdc-fab-extended-label-padding, 20px))}[dir=rtl] :host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon,:host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-left:calc(var(--mdc-fab-extended-icon-padding, 12px) - var(--mdc-fab-extended-label-padding, 20px));margin-right:12px;margin-right:var(--mdc-fab-extended-icon-padding, 12px)}`;let qa=class extends Ga{};qa.styles=[Za],qa=s([d("mwc-fab")],qa);class Ya extends wn{constructor(e){super(),this.serviceProvider=e,this.entries=new Map,this.shouldShowStarredTab=!1,ri((()=>this.starredResults),(()=>{this.syncToLocalStorage()}))}get localStorageService(){return this.serviceProvider.localStorageService}syncToLocalStorage(){this.localStorageService.setStarredResults(this.starredResults)}get starredResults(){return[...this.entries.values()]}hasStarred(e){return this.entries.has(e.uuid)}initializeFromLocalStorage(e){const t=e.map((e=>[e.uuid,e]));this.entries=new Map(t),this.entries.size>0&&(this.shouldShowStarredTab=!0)}star(e){this.entries.set(e.uuid,e),this.shouldShowStarredTab=!0}unstar(e){this.entries.delete(e.uuid)}toggle(e){this.hasStarred(e)?this.unstar(e):this.star(e)}}oi(Ya,{entries:Xt,starredResults:nr,shouldShowStarredTab:Xt});const Ja=E`:host {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100vh;
}

.choices-controls-container {
  flex-grow: 0;
}

.choices-controls-container .operation-message {
  line-height: 1.5;
  margin-bottom: 20px;
}

.choices-container {
  flex-grow: 1;
  overflow: auto;
  padding-bottom: 150px;
  padding-right: 10px;
  width: 100%;
  margin-bottom: 140px;
}

.actions-container {
  display: grid;
  grid-template-columns: auto auto;
  margin: 0 0 30px;
}

.action-button-wrapper {
  display: flex;
  padding: 5px 0;
}

.action-button-wrapper:nth-child(2n) {
  justify-content: flex-end;
}

.choice {
  cursor: pointer;
  margin-bottom: 15px;
  position: relative;
  line-height: 1.6;
  font-size: 14px;
  border-radius: 5px;
  padding: 8px 12px;
  border: 1px solid var(--light-gray);
}

.choice.selected {
  background-color: var(--light-blue);
  border: none;
}

.empty-choices {
  font-style: italic;
  margin-top: 20px;
}

.orig-text-label {
  font-size: 9pt;
  color: var(--dark-gray);
}

.choices-instructions {
  padding: 8px 0;
  color: var(--dark-gray);
}

.choices-instructions:last-of-type {
  margin-bottom: 10px;
  padding-bottom: 20px;
}

.choice-buttons {
  transform: scale(0.7);
  position: absolute;
  right: -25px;
  bottom: -25px;
}

.choice-buttons mwc-fab.choose {
  --mdc-theme-secondary: var(--blue);
  --mdc-theme-on-secondary: var(--white);
}

.choice-buttons mwc-fab.add-remove {
  --mdc-theme-secondary: var(--dark-gray);
  --mdc-theme-on-secondary: var(--white);
}

.choice-paragraph {
  margin-top: 0;
  margin-bottom: 10px;
}

.choice-paragraph:last-of-type {
  margin-bottom: 0;
}
`;var Xa=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Qa=class extends sn{constructor(){super(...arguments),this.keyboardService=bn.getService(Oo),this.starredResultsService=bn.getService(Ya),this.operationsService=bn.getService(La),this.keyboardServiceHelper=this.keyboardService.makeHelper("choiceStep")}static get styles(){return[ln,Ja]}firstUpdated(){const{choices:e,firstChoiceIsOrigional:t}=this.choiceStep;t&&!this.isEmpty()&&e.setIndex(1),this.keyboardServiceHelper.registerKeyHandler("ArrowDown",(()=>{e.incrementIndex()})),this.keyboardServiceHelper.registerKeyHandler("ArrowUp",(()=>{e.decrementIndex()}))}disconnectedCallback(){this.keyboardServiceHelper.unregisterKeyHandlers()}get choiceOperation(){return this.operationsService.currentOperation}render(){const e=this.operationsService.currentOperation;if(!(e instanceof Js))return;const t=this.isEmpty();return oe`
      <div class="choices-controls-container">
        ${this.renderOperationMessage(e)}
        ${this.renderOperationControls(e)}
        ${this.renderActions(e)} ${this.renderArrowInstructions()}
      </div>
      <div class="choices-container">
        ${this.renderChoices()} ${t?this.renderEmptyMessage():""}
      </div>
    `}renderOperationMessage(e){const t=e.getMessage();return t?oe` <div class="operation-message">${t}</div> `:""}renderActions(e){const t=this.isEmpty(),r=e.canRewriteChoice&&!t,i={choose:{message:"choose",keyCommand:new Ao("Enter"),keyLabel:"enter",action:()=>{this.choiceStep.chooseCurrentIndex()}},cancel:{message:"cancel",keyCommand:new Ao("Escape"),keyLabel:"esc",action:()=>{e.cancel()}},refresh:{message:"refresh",keyCommand:new Ao("Tab"),keyLabel:"tab",action:()=>{e.restart()}},rewrite:{message:"rewrite",keyCommand:new Ao("e",!0),keyLabel:"e",action:()=>{this.operationsService.rewriteCurrentChoice()}}};return oe`
      <div class="actions-container">
        ${t?"":this.renderAction(i.choose)}
        ${this.renderAction(i.cancel)}
        ${this.renderAction(i.refresh)}
        ${r?this.renderAction(i.rewrite):""}
      </div>
    `}renderAction(e){const{message:t,keyCommand:r,keyLabel:i,action:n}=e;return oe`
      <div class="action-button-wrapper">
        <wordcraft-key-command-small
          message=${t}
          .keyCommand=${r}
          keyLabel=${i}
          .action=${n}
        >
        </wordcraft-key-command-small>
      </div>
    `}renderArrowInstructions(){const e=this.choiceStep.choices.getNEntries();if(e<2)return;const t=this.choiceStep.choices.getIndex();return oe`
      <div class="choices-instructions">
        <span class="key-command key-command-small">⬆</span>
        <span class="key-command key-command-small">⬇</span>
        to cycle through choices (${t+1}/${e})
      </div>
    `}renderChoices(){const e=this.choiceOperation.canStarChoice,{choices:t,firstChoiceIsOrigional:r}=this.choiceStep;return t.getEntries().map(((i,n)=>{const o=t.getIndex()===n,s=Ge({choice:!0,selected:o}),a=r&&0===n,c=oe`<div class="orig-text-label">
        Original text
      </div>`,d=kn((()=>{this.choiceStep.chooseIndex(n)})),l=kn((()=>{this.choiceStep.removeChoiceIndex(n)})),h=kn((()=>{this.starredResultsService.hasStarred(i)?this.starredResultsService.unstar(i):this.starredResultsService.star(i)}));return oe`
        <div
          class=${s}
          @click=${(e=>kn((()=>{t.setIndex(e)})))(n)}
          @dblclick=${d}
        >
          ${a?c:""} ${this.renderText(i.text)}
          ${o?(()=>{const t=this.starredResultsService.hasStarred(i);return oe`
          <div class="choice-buttons">
            <mwc-fab
              class="add-remove"
              mini
              icon="close"
              @click=${l}
              title="remove"
            ></mwc-fab>
            ${e?oe`<mwc-fab
                  class="add-remove"
                  title="star result"
                  mini
                  icon=${t?"star_rate":"star_border"}
                  @click=${h}
                >
                </mwc-fab>`:""}
            <mwc-fab
              class="choose"
              title="select"
              mini
              icon="done"
              @click=${d}
            >
            </mwc-fab>
          </div>
        `})():""}
        </div>
      `}))}renderText(e){return e.split("\n").map((e=>oe`<p class="choice-paragraph">${e}</p>`))}renderOperationControls(e){let t;if(e.hasInstanceControls())t=e.instanceControls;else{t=e.constructor.controls}return oe`
      <wc-operation-controls
        .controls=${t}
        .onEnter=${()=>e.restart()}
      ></wc-operation-controls>
    `}renderEmptyMessage(){return oe`
      <div class="empty-choices">No results for the given prompt.</div>
    `}isEmpty(){return 0===this.choiceStep.choices.getNEntries()}};Xa([u({type:Object})],Qa.prototype,"choiceStep",void 0),Qa=Xa([d("wordcraft-choices")],Qa);const ec=E`.controls-step-title {
  font-weight: 700;
  color: var(--blue);
  margin-bottom: 20px;
  border-bottom: 2px solid var(--blue);
  padding: 10px 0;
}

.controls-step-subtitle {
  font-weight: normal;
  color: black;
  font-style: italic;
  padding: 10px 0;
}

.operation-loading-container {
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.operation-spinner-container {
  margin-bottom: 20px;
}

.operation-loading-message {
  text-align: center;
  width: 100%;
}

.buttons-container {
  margin: 5px 0;
  display: flex;
  padding-left: 100px;
}

wordcraft-key-command-small {
  margin-right: 10px;
}

mwc-circular-progress-four-color {
  --mdc-circular-progress-bar-color-1: #2196f3;
  --mdc-circular-progress-bar-color-2: #e91e63;
  --mdc-circular-progress-bar-color-3: #ffc107;
  --mdc-circular-progress-bar-color-4: #03dac5;
}
`;var tc=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let rc=class extends sn{constructor(){super(...arguments),this.operationsService=bn.getService(La)}static get styles(){return[ln,ec]}render(){const e=this.operationsService.currentOperation;if(null==e)return"";const t=e.currentStep;return t instanceof Vs?this.renderLoadingMessage(t):t instanceof Ks?oe`
        <wordcraft-choices .choiceStep=${t}></wordcraft-choices>
      `:t instanceof Ws?this.renderControlsStep(t):""}renderLoadingMessage(e){return oe`
      <div class="operation-loading-container">
        <div class="operation-spinner-container">
          <mwc-circular-progress-four-color density=${3} indeterminate>
          </mwc-circular-progress-four-color>
        </div>
        <div class="operation-loading-message">${e.message}</div>
      </div>
    `}renderControlsStep(e){const t=this.operationsService.currentOperation,r=e.subtitle?oe`<div class="controls-step-subtitle">${e.subtitle}</div>`:"";return oe`
      <div class="controls-step-title">${e.title} ${r}</div>
      ${this.renderControls(e)}
      <div class="buttons-container">${this.renderButtons(t)}</div>
    `}renderControls(e){return oe`
      <wc-operation-controls
        .controls=${e.controls}
        .onEnter=${()=>{e.finish()}}
        autofocus
      ></wc-operation-controls>
    `}renderButtons(e){const t={go:{message:"go",keyCommand:new Ao("Enter"),keyLabel:"enter",action:()=>{e.currentStep.finish()}},cancel:{message:"cancel",keyCommand:new Ao("Escape"),keyLabel:"esc",action:()=>{e.cancel()}}};return[this.renderKeyCommand(t.go),this.renderKeyCommand(t.cancel)]}renderKeyCommand(e){const{message:t,keyCommand:r,keyLabel:i,action:n}=e;return oe`
      <wordcraft-key-command-small
        message=${t}
        .keyCommand=${r}
        keyLabel=${i}
        .action=${n}
      >
      </wordcraft-key-command-small>
    `}};rc=tc([d("wordcraft-operation")],rc);var ic=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let nc=class extends sn{constructor(){super(...arguments),this.message="",this.keyCommand=new Ao("notImplemented"),this.keyLabel="",this.action=e=>{},this.onHover=e=>{},this.keyboardService=bn.getService(Oo),this.clearKeyHandler=()=>{}}static get styles(){return[ln,No,Mo]}firstUpdated(){this.clearKeyHandler=this.keyboardService.registerKeyHandler(this.keyCommand,(()=>{this.action("KEY_COMMAND")}))}disconnectedCallback(){this.clearKeyHandler()}render(){const{message:e,keyCommand:t,keyLabel:r}=this,i=Ro(),n=r||t.key;return oe`
      <div class="row">
        <div class="key-command-container">
          ${t.metaKey?oe`<span class="key-command">${i}</span>${" + "}`:""}
          <span class="key-command">${n}</span>
        </div>
        <button
          type="button"
          @mousedown=${e=>(e.preventDefault(),this.action("BUTTON"),!1)}
          @mouseenter=${()=>{this.onHover(!0)}}
          @mouseleave=${()=>{this.onHover(!1)}}
        >
          ${e}
        </button>
      </div>
    `}};function oc(e,t){if("detect"in e)return e.detect(t);for(let r=0;r<e.length;r++)if(t(e[r]))return e[r]}function sc(e,t){if("any"in e)return e.any(t);for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function ac(e,t){if("forEach"in e)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r)}function cc(e,t){const r=[];return ac(e,(e=>{t(e)&&r.push(e)})),r}function dc(e,t){let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];)r++;return r}function lc(e,t,r){let i=r;return ac(e,((e,r)=>{i=t(i,e,r)})),i}function hc(e){const t={};for(let r=0;r<e.length;r+=2){let[i,n]=[e[r],e[r+1]];t[i]=n}return t}function uc(e){const t=Object.keys(e).sort(),r=[];return t.forEach((t=>{r.push(t),r.push(e[t])})),r}function pc(e,t){let r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function mc(e,t){return-1!==e.indexOf(t)}function fc(e){return Object.keys(e).map((t=>e[t]))}ic([u({type:String})],nc.prototype,"message",void 0),ic([u({type:Object})],nc.prototype,"keyCommand",void 0),ic([u({type:String})],nc.prototype,"keyLabel",void 0),ic([u({type:Object})],nc.prototype,"action",void 0),ic([u({type:Object})],nc.prototype,"onHover",void 0),nc=ic([d("wordcraft-key-command")],nc);const gc={ELEMENT:1,TEXT:3,COMMENT:8};function bc(e){return e.nodeType===gc.TEXT}function vc(e){return e.nodeType===gc.COMMENT}function yc(e){return e.nodeType===gc.ELEMENT}function _c(e,t){if(e===t)return!0;return!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)}function xc(e){const t={};return e.hasAttributes()&&ac(e.attributes,(({name:e,value:r})=>{t[e]=r})),t}function kc(e,t){e.classList.add(t)}function wc(e){return e.toLowerCase()}class Sc{constructor(e={}){this.isShowing=!1,this.isDestroyed=!1,e.tagName=e.tagName||"div",e.container=e.container||document.body,this.element=document.createElement(e.tagName),this.container=e.container,(e.classNames||[]).forEach((e=>kc(this.element,e))),this._eventListeners=[]}addEventListener(e,t,r){e.addEventListener(t,r),this._eventListeners.push([e,t,r])}removeAllEventListeners(){this._eventListeners.forEach((([e,t,r])=>{e.removeEventListener(t,r)}))}show(){if(!this.isShowing)return this.container.appendChild(this.element),this.isShowing=!0,!0}hide(){if(this.isShowing)return this.container.removeChild(this.element),this.isShowing=!1,!0}destroy(){this.removeAllEventListeners(),this.hide(),this.isDestroyed=!0}}function Ec(e,t){let r=e.lastIndexOf(t);return-1!==r&&r===e.length-t.length}function Cc(e,t,r,i){const n=function(e){const t={left:0,top:-window.pageYOffset},r=e.offsetParent;let i;return"relative"===window.getComputedStyle(r).position&&(i=r.getBoundingClientRect(),t.left=i.left,t.top=i.top),t}(e),o=e.style,s=Math.round;let a,c;return r=r||0,i=i||0,a=s(t.left-n.left-i),c=s(t.top+t.height-n.top-r),o.left=`${a}px`,o.top=`${c}px`,{left:a,top:c}}function Tc(e,t){const r=function(e,t){return parseFloat(window.getComputedStyle(e)[t])}(e,"marginTop");return function(e,t,r){return Cc(e,t,r,e.offsetWidth/2-t.width/2)}(e,t.getBoundingClientRect(),-r)}class Ac{constructor(){this.markups=[],this.prev=null,this.next=null,this.isAtom=!1,this.isMarker=!1,this.section=null,this.parent=null,this.renderNode=null}charAt(e){return this.value.slice(e,e+1)}clearMarkups(){this.markups=[]}addMarkup(e){this.markups.push(e)}addMarkupAtIndex(e,t){this.markups.splice(t,0,e)}removeMarkup(e){let t;if("function"==typeof e)t=e;else{let r=e;t=e=>e===r}ac(cc(this.markups,t),(e=>this._removeMarkup(e)))}_removeMarkup(e){const t=this.markups.indexOf(e);-1!==t&&this.markups.splice(t,1)}hasMarkup(e){return!!this.getMarkup(e)}getMarkup(e){if("string"==typeof e){let t=wc(e);return oc(this.markups,(e=>e.tagName===t))}{let t=e;return oc(this.markups,(e=>e===t))}}get openedMarkups(){let e=0;return this.prev&&(e=dc(this.markups,this.prev.markups)),this.markups.slice(e)}get closedMarkups(){let e=0;return this.next&&(e=dc(this.markups,this.next.markups)),this.markups.slice(e)}}class Rc extends Error{}function Oc(e,t){if(!t)throw new Rc(e)}function Ic(e,t,r){Oc(e,t in r)}function Nc(e,t){if(null===t)throw new Rc(e)}function Mc(e,t,r){Oc(e,r)}function Pc(e,t){if(null==e)throw new Rc(t);return e}function Lc(e){return Pc(e,"expected value to not be null or undefined")}const Dc=[55296,56319],$c=[56320,57343];class Hc extends Ac{constructor(e="",t=[]){super(),this.type="marker",this.isMarker=!0,this.markups=[],this.renderNode=null,this.value=e,Oc("Marker must have value",null!=e),t.forEach((e=>this.addMarkup(e)))}clone(){const e=this.markups.slice();return this.builder.createMarker(this.value,e)}get isEmpty(){return this.isBlank}get isBlank(){return 0===this.length}get text(){return this.value}get length(){return this.value.length}deleteValueAtOffset(e){Oc("Cannot delete value at offset outside bounds",e>=0&&e<=this.length);let t=1,r=this.value.charCodeAt(e);r>=Dc[0]&&r<=Dc[1]?t=2:r>=$c[0]&&r<=$c[1]&&(t=2,e-=1);const[i,n]=[this.value.slice(0,e),this.value.slice(e+t)];return this.value=i+n,t}canJoin(e){return e&&e.isMarker&&pc(this.markups,e.markups)}textUntil(e){return this.value.slice(0,e)}split(e=0,t=this.length){let r=[this.builder.createMarker(this.value.substring(0,e)),this.builder.createMarker(this.value.substring(e,t)),this.builder.createMarker(this.value.substring(t))];return this.markups.forEach((e=>r.forEach((t=>t.addMarkup(e))))),r}splitAtOffset(e){Oc("Cannot split a marker at an offset > its length",e<=this.length);let{value:t,builder:r}=this,i=r.createMarker(t.substring(0,e)),n=r.createMarker(t.substring(e));return this.markups.forEach((e=>{i.addMarkup(e),n.addMarkup(e)})),[i,n]}}const Fc={BACKSPACE:8,SPACE:32,ENTER:13,SHIFT:16,ESC:27,DELETE:46,0:48,9:57,A:65,Z:90,a:97,z:122,NUMPAD_0:186,NUMPAD_9:111,";":186,".":190,"`":192,"[":219,'"':222,IME:229,TAB:9,CLEAR:12,PAUSE:19,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,META:91,ALT:18,CTRL:17},Bc={BACKSPACE:"Backspace",SPACE:" ",ENTER:"Enter",SHIFT:"Shift",ESC:"Escape",DELETE:"Delete",INS:"Insert",HOME:"Home",END:"End",PAGEUP:"PageUp",PAGEDOWN:"PageDown",CLEAR:"Clear",PAUSE:"Pause",TAB:"Tab",ALT:"Alt",CTRL:"Control",LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown"};var jc;!function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(jc||(jc={}));const zc={META:1,CTRL:2,SHIFT:4,ALT:8};const Uc={BACKSPACE:Fc.BACKSPACE,TAB:Fc.TAB,ENTER:Fc.ENTER,ESC:Fc.ESC,SPACE:Fc.SPACE,PAGEUP:Fc.PAGEUP,PAGEDOWN:Fc.PAGEDOWN,END:Fc.END,HOME:Fc.HOME,LEFT:Fc.LEFT,UP:Fc.UP,RIGHT:Fc.RIGHT,DOWN:Fc.DOWN,INS:Fc.INS,DEL:Fc.DELETE};class Kc{constructor(e){this.key=e.key,this.keyCode=e.keyCode,this.charCode=e.charCode,this.event=e,this.modifierMask=function(e){let{metaKey:t,shiftKey:r,ctrlKey:i,altKey:n}=e,o=(e,t)=>e&&t||0;return o(t,zc.META)+o(r,zc.SHIFT)+o(i,zc.CTRL)+o(n,zc.ALT)}(e)}static fromEvent(e){return Oc("Must pass a Key event to Key.fromEvent",e&&function(e){return/^key/.test(e.type)}(e)),new Kc(e)}toString(){return this.isTab()?"\t":String.fromCodePoint(this.charCode)}isKeySupported(){return this.key}isKey(e){return this.isKeySupported()?(Oc(`Must define Keys.${e}.`,!!Bc[e]),this.key===Bc[e]):(Oc(`Must define Keycodes.${e}.`,!!Fc[e]),this.keyCode===Fc[e])}isEscape(){return this.isKey("ESC")}isDelete(){return this.isKey("BACKSPACE")||this.isForwardDelete()}isForwardDelete(){return this.isKey("DELETE")}isArrow(){return this.isHorizontalArrow()||this.isVerticalArrow()}isHorizontalArrow(){return this.isLeftArrow()||this.isRightArrow()}isHorizontalArrowWithoutModifiersOtherThanShift(){return this.isHorizontalArrow()&&!(this.ctrlKey||this.metaKey||this.altKey)}isVerticalArrow(){return this.isKey("UP")||this.isKey("DOWN")}isLeftArrow(){return this.isKey("LEFT")}isRightArrow(){return this.isKey("RIGHT")}isHome(){return this.isKey("HOME")}isEnd(){return this.isKey("END")}isPageUp(){return this.isKey("PAGEUP")}isPageDown(){return this.isKey("PAGEDOWN")}isInsert(){return this.isKey("INS")}isClear(){return this.isKey("CLEAR")}isPause(){return this.isKey("PAUSE")}isSpace(){return this.isKey("SPACE")}isTab(){return!this.hasAnyModifier()&&this.isKey("TAB")}isEnter(){return this.isKey("ENTER")}isShiftKey(){return this.isKey("SHIFT")}isAltKey(){return this.isKey("ALT")}isCtrlKey(){return this.isKey("CTRL")}isIME(){return this.keyCode===Fc.IME}get direction(){switch(!0){case this.isDelete():return this.isForwardDelete()?jc.FORWARD:jc.BACKWARD;case this.isHorizontalArrow():return this.isRightArrow()?jc.FORWARD:jc.BACKWARD;default:return jc.FORWARD}}isShift(){return this.shiftKey}hasModifier(e){return e&this.modifierMask}hasAnyModifier(){return!!this.modifierMask}get ctrlKey(){return zc.CTRL&this.modifierMask}get metaKey(){return zc.META&this.modifierMask}get shiftKey(){return zc.SHIFT&this.modifierMask}get altKey(){return zc.ALT&this.modifierMask}isPrintableKey(){return!(this.isArrow()||this.isHome()||this.isEnd()||this.isPageUp()||this.isPageDown()||this.isInsert()||this.isClear()||this.isPause()||this.isEscape())}isNumberKey(){if(this.isKeySupported())return this.key>="0"&&this.key<="9";{const e=this.keyCode;return e>=Fc[0]&&e<=Fc[9]||e>=Fc.NUMPAD_0&&e<=Fc.NUMPAD_9}}isLetterKey(){if(this.isKeySupported()){const e=this.key;return e>="a"&&e<="z"||e>="A"&&e<="Z"}{const e=this.keyCode;return e>=Fc.A&&e<=Fc.Z||e>=Fc.a&&e<=Fc.z}}isPunctuation(){if(this.isKeySupported()){const e=this.key;return e>=";"&&e<="`"||e>="["&&e<='"'}{const e=this.keyCode;return e>=Fc[";"]&&e<=Fc["`"]||e>=Fc["["]&&e<=Fc['"']}}isPrintable(){return!this.ctrlKey&&!this.metaKey&&(!!this.isPrintableKey()&&(0!==this.keyCode||this.toString().length>0||this.isNumberKey()||this.isSpace()||this.isTab()||this.isEnter()||this.isLetterKey()||this.isPunctuation()||this.isIME()))}}function Wc(e){let t=document.createRange();return t.setEnd(e,e.nodeValue.length),t.setStart(e,0),t.getClientRects()}function Vc(e,t){let r,i,n=1e8,o=0;for(let s=e.firstChild;s;s=s.nextSibling){let e;if(yc(s))e=s.getClientRects();else{if(!bc(s))continue;e=Wc(s)}for(let a=0;a<e.length;a++){let c=e[a];if(c.left<=t.left&&c.right>=t.left){let e=c.top>t.top?c.top-t.top:c.bottom<t.top?t.top-c.bottom:0;if(e<n){r=s,n=e,i=e?{left:t.left,top:c.top}:t,yc(s)&&!s.firstChild&&(o=a+(t.left>=(c.left+c.right)/2?1:0));continue}}!r&&(t.top>=c.bottom||t.top>=c.top&&t.left>=c.right)&&(o=a+1)}}return r?bc(r)?function(e,t){let r=e.nodeValue.length,i=document.createRange();for(let n=0;n<r;n++){i.setEnd(e,n+1),i.setStart(e,n);let r=i.getBoundingClientRect();if(r.top!==r.bottom&&r.left<=t.left&&r.right>=t.left&&r.top<=t.top&&r.bottom>=t.top)return{node:e,offset:n+(t.left>=(r.left+r.right)/2?1:0)}}return{node:e,offset:0}}(r,i):r.firstChild?Vc(r,i):{node:e,offset:o}:{node:e,offset:o}}function Gc(e,t,r){let i=t.compareDocumentPosition(e);if(i&Node.DOCUMENT_POSITION_CONTAINED_BY)return{node:e,offset:r};if(i&Node.DOCUMENT_POSITION_CONTAINS)return{node:e,offset:r};if(i&Node.DOCUMENT_POSITION_PRECEDING){let e=t.firstChild;for(;e&&e.firstChild;)e=e.firstChild;return{node:e,offset:0}}if(i&Node.DOCUMENT_POSITION_FOLLOWING){let e=t.lastChild;for(;e.lastChild;)e=e.lastChild;return{node:e,offset:bc(e)?e.textContent.length:1}}return{node:e,offset:r}}function Zc(e){Nc("selection anchorNode should not be null",e.anchorNode),Nc("selection focusNode should not be null",e.focusNode);let t,r,i,n,o,{anchorNode:s,focusNode:a,anchorOffset:c,focusOffset:d}=e;const l=s.compareDocumentPosition(a);if(l&Node.DOCUMENT_POSITION_CONTAINS){if(d<a.childNodes.length)a=a.childNodes[d],d=0;else{for(;a.lastChild;)a=a.lastChild;d=a.textContent.length}return Zc({focusNode:a,focusOffset:d,anchorNode:s,anchorOffset:c})}if(l&Node.DOCUMENT_POSITION_CONTAINED_BY){let e=c-1;return e<0&&(e=0),Zc({anchorNode:s.childNodes[e],anchorOffset:0,focusNode:a,focusOffset:d})}return l&Node.DOCUMENT_POSITION_FOLLOWING?(t=s,r=a,i=c,n=d,o=jc.FORWARD):l&Node.DOCUMENT_POSITION_PRECEDING?(t=a,r=s,i=d,n=c,o=jc.BACKWARD):(t=r=s,i=c,n=d,n<i?(i=d,n=c,o=jc.BACKWARD):o=i<n?jc.FORWARD:null),{headNode:t,headOffset:i,tailNode:r,tailOffset:n,direction:o}}class qc{constructor(e,t=e,r=null){this.head=e,this.tail=t,this.direction=r}static create(e,t,r=e,i=t,n=null){return new qc(new ud(e,t),new ud(r,i),n)}static blankRange(){return new qc(ud.blankPosition(),ud.blankPosition())}trimTo(e){const t=e.length;let r=e===this.head.section?Math.min(this.head.offset,t):0,i=e===this.tail.section?Math.min(this.tail.offset,t):t;return qc.create(e,r,e,i)}extend(e){if(Oc("Must pass integer to Range#extend","number"==typeof e),0===e)return this;let{head:t,tail:r,direction:i}=this;switch(i){case jc.FORWARD:return new qc(t,r.move(e),i);case jc.BACKWARD:return new qc(t.move(e),r,i);default:{let i=e>0?jc.FORWARD:jc.BACKWARD;return new qc(t,r,i).extend(e)}}}move(e){Oc(`Must pass DIRECTION.FORWARD (${jc.FORWARD}) or DIRECTION.BACKWARD (${jc.BACKWARD}) to Range#move`,e===jc.FORWARD||e===jc.BACKWARD);let{focusedPosition:t,isCollapsed:r}=this;return r?new qc(t.move(e)):this._collapse(e)}expandByMarker(e){let{head:t,tail:r,direction:i}=this,{section:n}=t;if(Nc("expected range section to not be null",n),Yc(n),n!==r.section)throw new Error("#expandByMarker does not work across sections. Perhaps you should confirm the range is collapsed");let o=t=>!e(t),s=n.markers.detect(o,t.marker,!0);s=!s&&e(n.markers.head)?n.markers.head:Lc(s).next||t.marker;let a=new ud(n,n.offsetOfMarker(Lc(s)));Yc(r.section);let c=r.section.markers.detect(o,r.marker);c=!c&&e(Lc(n.markers.tail))?Lc(n.markers.tail):Lc(c).prev||Lc(r.marker);let d=new ud(r.section,r.section.offsetOfMarker(c)+c.length);return a.toRange(d,i)}_collapse(e){return new qc(e===jc.BACKWARD?this.head:this.tail)}get focusedPosition(){return this.direction===jc.BACKWARD?this.head:this.tail}isEqual(e){return e&&this.head.isEqual(e.head)&&this.tail.isEqual(e.tail)}get isBlank(){return this.head.isBlank&&this.tail.isBlank}get headSection(){return this.head.section}get tailSection(){return this.tail.section}get headSectionOffset(){return this.head.offset}get tailSectionOffset(){return this.tail.offset}get isCollapsed(){return this.head.isEqual(this.tail)}get headMarker(){return this.head.marker}get tailMarker(){return this.tail.marker}get headMarkerOffset(){return this.head.offsetInMarker}get tailMarkerOffset(){return this.tail.offsetInMarker}}function Yc(e){if(!("markers"in e))throw new Rc("Expected position section to be markerable")}class Jc{constructor(){this.next=null,this.prev=null}}function Xc(e){return"items"in e&&e.items}class Qc extends Jc{constructor(e){super(),this.isSection=!0,this.isMarkerable=!1,this.isNested=!1,this.isListItem=!1,this.isListSection=!1,this.isLeafSection=!0,this.isCardSection=!1,this._parent=null,Oc("Cannot create section without type",!!e),this.type=e}get parent(){return Pc(this._parent,"expected section parent to be assigned")}get isBlank(){return!1}get length(){return 0}headPosition(){return this.toPosition(0)}tailPosition(){return this.toPosition(this.length)}toPosition(e){return Oc("Must pass number to `toPosition`","number"==typeof e),Oc("Cannot call `toPosition` with offset > length",e<=this.length),new ud(this,e)}toRange(){return this.headPosition().toRange(this.tailPosition())}splitMarkerAtOffset(e){return{added:[],removed:[]}}nextLeafSection(){const e=this.next;return e?Xc(e)?e.items.head:e:ed(this)?this.parent.nextLeafSection():null}immediatelyNextMarkerableSection(){let e=this.nextLeafSection();for(;e&&!e.isMarkerable;)e=e.nextLeafSection();return e}previousLeafSection(){const e=this.prev;return e?Xc(e)?e.items.tail:e:ed(this)?this.parent.previousLeafSection():null}}function ed(e){return e.isNested}var td;!function(e){e.DISPLAY="display",e.EDIT="edit"}(td||(td={}));function rd(e){return e.isCardSection}class id extends Qc{constructor(e,t){super("card-section"),this._initialMode=td.DISPLAY,this.isCardSection=!0,this.name=e,this.payload=t,this.isCardSection=!0}textUntil(){return""}canJoin(){return!1}get length(){return 1}clone(){let e=(t=this.payload,{...t});var t;let r=this.builder.createCardSection(this.name,e),i=this._initialMode;return this.renderNode&&this.renderNode.cardNode&&(i=this.renderNode.cardNode.mode),r.setInitialMode(i),r}setInitialMode(e){this._initialMode=e}}class nd extends Ac{constructor(e,t,r,i=[]){super(),this.type="atom",this.isAtom=!0,this.name=e,this.value=t,this.text="",Oc("Atom must have value",null!=t),this.payload=r,this.type="atom",this.isMarker=!1,this.isAtom=!0,this.markups=[],i.forEach((e=>this.addMarkup(e)))}clone(){let e=this.markups.slice();return this.builder.createAtom(this.name,this.value,this.payload,e)}get isBlank(){return!1}get length(){return 1}canJoin(){return!1}textUntil(){return""}split(e=0,t=e){let r=[];return 0===t&&r.push(this.builder.createMarker("",this.markups.slice())),r.push(this.clone()),1===e&&r.push(this.builder.createMarker("",this.markups.slice())),r}splitAtOffset(e){Oc("Cannot split a marker at an offset > its length",e<=this.length);let t,r,{builder:i}=this,n=this.clone(),o=i.createMarker("");return 0===e?[t,r]=[o,n]:1===e?[t,r]=[n,o]:Oc(`Invalid offset given to Atom#splitAtOffset: "${e}"`,!1),this.markups.forEach((e=>{t.addMarkup(e),r.addMarkup(e)})),[t,r]}}function od(e){return"atom"===e.type}const{FORWARD:sd,BACKWARD:ad}=jc,cd=/[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͅͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևְ-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-ٗٙ-ٟٮ-ۓە-ۜۡ-ۭۨ-ۯۺ-ۼۿܐ-ܿݍ-ޱߊ-ߪߴߵߺࠀ-ࠗࠚ-ࠬࡀ-ࡘࢠ-ࢴࣣ-ࣰࣩ-ऻऽ-ौॎ-ॐॕ-ॣॱ-ঃঅ-ঌএঐও-নপ-রলশ-হঽ-ৄেৈোৌৎৗড়ঢ়য়-ৣৰৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਾ-ੂੇੈੋੌੑਖ਼-ੜਫ਼ੰ-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽ-ૅે-ૉોૌૐૠ-ૣૹଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽ-ୄେୈୋୌୖୗଡ଼ଢ଼ୟ-ୣୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-ௌௐௗఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-ౌౕౖౘ-ౚౠ-ౣಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽ-ೄೆ-ೈೊ-ೌೕೖೞೠ-ೣೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൌൎൗൟ-ൣൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆා-ුූෘ-ෟෲෳก-ฺเ-ๆํກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆໍໜ-ໟༀཀ-ཇཉ-ཬཱ-ཱྀྈ-ྗྙ-ྼက-ံးျ-ဿၐ-ၢၥ-ၨၮ-ႆႎႜႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፟ᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜓᜠ-ᜳᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-ឳា-ៈៗៜᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-ᤸᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨛᨠ-ᩞᩡ-ᩴᪧᬀ-ᬳᬵ-ᭃᭅ-ᭋᮀ-ᮩᮬ-ᮯᮺ-ᯥᯧ-ᯱᰀ-ᰵᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳳᳵᳶᴀ-ᶿᷧ-ᷴḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙴ-ꙻꙿ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠧꡀ-ꡳꢀ-ꣃꣲ-ꣷꣻꣽꤊ-ꤪꤰ-ꥒꥠ-ꥼꦀ-ꦲꦴ-ꦿꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨶꩀ-ꩍꩠ-ꩶꩺꩾ-ꪾꫀꫂꫛ-ꫝꫠ-ꫯꫲ-ꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯪ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|[0-9]|_|:/;function dd(e,t){let r=e.findRenderNodeFromElement(t,(e=>e.postNode.isSection));return r&&r.postNode}function ld(e){if(!e)throw new Error("expected marker to have render node")}function hd(e,t,r){if(function(e){return e.isMarkerable}(e))return function(e,t,r=0){let i=0,n=e.markers.head;for(;n;){if(ld(n.renderNode),n.renderNode.element===t)return i+r;if(n.isAtom){if(n.renderNode.headTextNode===t)return i;if(n.renderNode.tailTextNode===t)return i+1}i+=n.length,n=n.next}return i}(e,t,r);return function(e){Oc("findOffsetInSection must be called with markerable or card section",e&&e.isCardSection)}(e),ld(e.renderNode),t===e.renderNode.element.lastChild?1:0}class ud{constructor(e,t=0,r=!1){r||(Oc("Position must have a section that is addressable by the cursor",e&&e.isLeafSection),Oc("Position must have numeric offset","number"==typeof t)),this.section=e,this.offset=t,this.isBlank=r}static atPoint(e,t,r){let{_renderTree:i,element:n}=r,o=document.elementFromPoint(e,t);if(!o||!_c(n,o))return null;let{node:s,offset:a}=Vc(o,{left:e,top:t});return ud.fromNode(i,s,a)}static blankPosition(){return new pd}toRange(e=this,t=null){return new qc(this,e,t)}get leafSectionIndex(){let e;return this.section.post.walkAllLeafSections(((t,r)=>{t===this.section&&(e=r)})),e}get isMarkerable(){return this.section&&this.section.isMarkerable}get marker(){return this.isMarkerable&&this.markerPosition.marker||null}markerIn(e){if(!this.isMarkerable)return;let{marker:t,offsetInMarker:r}=this;return t?r>0&&r<t.length?t:0===r?e===ad?t:t.prev:r===t.length?e===sd?t.next:t:void 0:void 0}get offsetInMarker(){return this.markerPosition.offset}isEqual(e){return this.section===e.section&&this.offset===e.offset}isHeadOfPost(){return this.move(ad).isEqual(this)}isTailOfPost(){return this.move(sd).isEqual(this)}isHead(){return this.isEqual(this.section.headPosition())}isTail(){return this.isEqual(this.section.tailPosition())}move(e){return Oc("Must pass integer to Position#move","number"==typeof e),e<0?this.moveLeft().move(++e):e>0?this.moveRight().move(--e):this}moveWord(e){if(e===ad?this.isHeadOfPost():this.isTailOfPost())return this;if(!this.isMarkerable)return this.move(e);let t=this,r=(e,t)=>t===ad?e.isHead():e.isTail(),i=e=>{let{marker:t,offsetInMarker:r}=e;return t.charAt(r)},n=(e,t)=>i(t===ad?e.move(ad):e),o=(e,t)=>!(t!==ad||!e.isTail()||!e.marker.isAtom)||(t===ad?e.move(ad).marker.isAtom:e.marker.isAtom);if(r(t,e))return t.move(e).moveWord(e);let s=t=>!r(t,e)&&!o(t,e)&&!cd.test(n(t,e));for(;s(t);)t=t.move(e);if(o(t,e))return t.move(e);let a=t=>!r(t,e)&&!o(t,e)&&cd.test(n(t,e));for(;a(t);)t=t.move(e);return t}moveLeft(){if(this.isHead()){let e=this.section.previousLeafSection();return e?e.tailPosition():this}{let e=this.offset-1;if(this.isMarkerable&&this.marker){let t=this.marker.value.charCodeAt(e);t>=$c[0]&&t<=$c[1]&&(e-=1)}return new ud(this.section,e)}}moveRight(){if(this.isTail()){let e=this.section.nextLeafSection();return e?e.headPosition():this}{let e=this.offset+1;if(this.isMarkerable&&this.marker){let t=this.marker.value.charCodeAt(e-1);t>=Dc[0]&&t<=Dc[1]&&(e+=1)}return new ud(this.section,e)}}static fromNode(e,t,r){return bc(t)?ud.fromTextNode(e,t,r):yc(t)?ud.fromElementNode(e,t,r):void Oc("Positions can only be created from text nodes or elements",!1)}static fromTextNode(e,t,r){const i=e.getElementRenderNode(t);let n,o;if(i){const e=i.postNode;n=e.section,Oc(`Could not find parent section for mapped text node "${t.textContent}"`,!!n),o=e.section.offsetOfMarker(e,r)}else n=dd(e,t),Oc(`Could not find parent section for un-mapped text node "${t.textContent}"`,!!n),o=hd(n,t,r);return new ud(n,o)}static fromElementNode(e,t,r=0){let i;if(t===e.rootElement){let t=e.rootNode.postNode;i=0===r?t.headPosition():t.tailPosition()}else{let n=dd(e,t);if(Oc("Could not find parent section from element node",!!n),rd(n))i=r<2?n.headPosition():n.tailPosition();else{let o=e.getElementRenderNode(t),s=o&&o.postNode;if(s&&od(s)){let e=n.offsetOfMarker(s);r>1&&(e+=s.length),i=new ud(n,e)}else i=r>=t.childNodes.length?n.tailPosition():n.headPosition()}}return i}get markerPosition(){return Oc("Cannot get markerPosition without a section",!!this.section),Mc("cannot get markerPosition of a non-markerable",this.section,!!this.section.isMarkerable),this.section.markerPositionAtOffset(this.offset)}}class pd extends ud{constructor(){super(null,0,!0)}isEqual(e){return e&&e.isBlank}toRange(){return qc.blankRange()}get leafSectionIndex(){throw new Error("must implement get leafSectionIndex")}get isMarkerable(){return!1}get marker(){return null}isHeadOfPost(){return!1}isTailOfPost(){return!1}isHead(){return!1}isTail(){return!1}move(){return this}moveWord(){return this}get markerPosition(){return{}}}const md=(e,t,r)=>r(window.prompt(e,t));function fd(e,t=md){if(e.range.isCollapsed)return;let r=e.cursor.selectedText(),i="";-1!==r.indexOf("http")&&(i=r);let{range:n}=e;e.detectMarkupInRange(n,"a")?e.toggleMarkup("a"):t("Enter a URL",i,(t=>{t&&e.toggleMarkup("a",{href:t})}))}function gd(e,t,r=md){r("Enter a URL",e.href,(r=>{if(!r)return;const i=ud.fromNode(t._renderTree,e.firstChild),n=new qc(i,new ud(i.section,i.offset+e.textContent.length));t.run((e=>{let i=t.builder.createMarkup("a",{href:r});e.toggleMarkup(i,n),e.toggleMarkup(i,n)}))}))}class bd extends Sc{constructor(e){super({...e,classNames:["__mobiledoc-tooltip"]}),this.elementObserver=null,this.rootElement=e.rootElement,this.editor=e.editor,this.addListeners(e)}showLink(e){const{editor:t,element:r}=this,{tooltipPlugin:i}=t;i.renderLink(r,e,{editLink:()=>{gd(e,t),this.hide()}}),this.show(),Tc(this.element,e),this.elementObserver=function(e,t){let r=!1;const i=()=>{r||(e.parentNode?window.requestAnimationFrame(i):t())};return i(),{cancel:()=>r=!0}}(e,(()=>this.hide()))}addListeners(e){const{rootElement:t,element:r}=this;let i,n;const o=()=>{clearTimeout(n),n=setTimeout((()=>{this.hide()}),600)};this.addEventListener(r,"mouseenter",(()=>{clearTimeout(n)})),this.addEventListener(r,"mouseleave",(()=>{o()})),this.addEventListener(t,"mouseover",(r=>{let o=function(e,t,r){for(e=wc(e);t&&t!==r;){if(wc(t.tagName)===e)return t;t=t.parentElement}}(e.showForTag,r.target,t);o&&o.isContentEditable&&(clearTimeout(n),i=setTimeout((()=>{o&&this.showLink(o)}),200))})),this.addEventListener(t,"mouseout",(()=>{clearTimeout(i),this.elementObserver&&this.elementObserver.cancel(),o()}))}}const vd={renderLink(e,t,{editLink:r}){const{href:i}=t;e.innerHTML=`<a href="${i}" target="_blank">${i}</a>`;const n=document.createElement("button");n.classList.add("__mobiledoc-tooltip__edit-link"),n.innerText="Edit Link",n.addEventListener("click",r),e.append(n)}};class yd{constructor(e=[]){this.callbackQueues={},this.removalQueues={},e.forEach((e=>{this.callbackQueues[e]=[],this.removalQueues[e]=[]}))}runCallbacks(e,t=[]){let r=this._getQueue(e);r.forEach((e=>e(...t))),this.removalQueues[e].forEach((e=>{let t=r.indexOf(e);-1!==t&&r.splice(t,1)})),this.removalQueues[e]=[]}addCallback(e,t){this._getQueue(e).push(t)}_scheduleCallbackForRemoval(e,t){this.removalQueues[e].push(t)}addCallbackOnce(e,t){let r=this._getQueue(e);-1===r.indexOf(t)&&(r.push(t),this._scheduleCallbackForRemoval(e,t))}_getQueue(e){let t=this.callbackQueues[e];return Oc(`No queue found for "${e}"`,!!t),t}}function _d(e){return"sections"in e}const xd="markerable",kd="nested_markerable",wd="non_markerable";class Sd{constructor({postEditor:e,post:t},r){this.postEditor=e,this._post=t,this.cursorPosition=r,this.builder=this.postEditor.builder,this._hasInsertedFirstLeafSection=!1}get cursorPosition(){return this._cursorPosition}set cursorPosition(e){this._cursorPosition=e,this.postEditor.setRange(e)}visit(e){let t=e.type;Mc(`Cannot visit node of type ${e.type}`,0,t in this),this[t](e)}_canMergeSection(e){return!this._hasInsertedFirstLeafSection&&(this._isMarkerable&&e.isMarkerable)}get _isMarkerable(){return this.cursorSection.isMarkerable}get cursorSection(){return this.cursorPosition.section}get cursorOffset(){return this.cursorPosition.offset}get _isNested(){return this.cursorSection.isNested}post(e){let{cursorSection:t}=this;if(t.isBlank&&!t.isNested){let r=e.sections.map((e=>e.clone()));this._replaceSection(t,r)}else e.sections.forEach((e=>this.visit(e)))}"markup-section"(e){this[xd](e)}"list-section"(e){let t=!!e.next;e.items.forEach((e=>this.visit(e))),this._isNested&&t&&this._breakNestedAtCursor()}"list-item"(e){this[kd](e)}"card-section"(e){this[wd](e)}"image-section"(e){this[wd](e)}[wd](e){this._isNested?this._breakNestedAtCursor():this.cursorSection.isBlank||this._breakAtCursor(),this._insertLeafSection(e)}[xd](e){if(this._canMergeSection(e))this._mergeSection(e);else if(this._isNested&&this._isMarkerable){this._breakAtCursor();let t=this.cursorSection.next.headPosition();this.cursorPosition=t,this._mergeSection(e)}else this._breakAtCursor(),this._insertLeafSection(e)}[kd](e){if(this._canMergeSection(e))return void this._mergeSection(e);let t=this._isNested?e:this._wrapNestedSection(e);this._breakAtCursor(),this._insertLeafSection(t)}_breakNestedAtCursor(){Oc("Cannot call _breakNestedAtCursor if not nested",this._isNested);let e=this.cursorSection.parent;if(this.cursorPosition.isEqual(e.tailPosition())){let t=this.builder.createMarkupSection();this._insertSectionAfter(t,e)}else{let[,e]=this._breakListAtCursor();this.cursorPosition=e.tailPosition()}}_breakListAtCursor(){Oc("Cannot _splitParentSection if cursor position is not nested",this._isNested);const e=this.cursorSection.parent,t=this.cursorPosition,r=this.builder.createMarkupSection();let[i,n]=this.postEditor._splitListAtPosition(e,t),o=this._post.sections,s=n;return this.postEditor.insertSectionBefore(o,r,s),[i,r,n]}_wrapNestedSection(e){let t=e.parent.tagName,r=this.builder.createListSection(t);return r.items.append(e.clone()),r}_mergeSection(e){Oc("Can only merge markerable sections",this._isMarkerable&&e.isMarkerable),this._hasInsertedFirstLeafSection=!0;let t=e.markers.map((e=>e.clone())),r=this.postEditor.insertMarkers(this.cursorPosition,t);this.cursorPosition=r}_breakAtCursor(){this.cursorSection.isBlank||(this._isMarkerable?this._breakMarkerableAtCursor():this._breakNonMarkerableAtCursor())}_breakNonMarkerableAtCursor(){const e=this._post.sections,t=this.builder.createMarkupSection(),r=this.cursorPosition.isHead()?this.cursorSection:this.cursorSection.next;this.postEditor.insertSectionBefore(e,t,r),this.cursorPosition=t.tailPosition()}_breakMarkerableAtCursor(){let[e]=this.postEditor.splitSection(this.cursorPosition);this.cursorPosition=e.tailPosition()}_replaceSection(e,t){Oc("Cannot replace section that does not have parent.sections",_d(e.parent)),Oc("Must pass enumerable to _replaceSection",!!t.forEach);let r=e.parent.sections,i=e.next;this.postEditor.removeSection(e),t.forEach((e=>{this.postEditor.insertSectionBefore(r,e,i)}));let n=t[t.length-1];this.cursorPosition=n.tailPosition()}_insertSectionBefore(e,t){Oc("Cannot insert into section that does not have parent.sections",_d(this.cursorSection.parent));let r=this.cursorSection.parent.sections;this.postEditor.insertSectionBefore(r,e,t),this.cursorPosition=e.tailPosition()}_insertSectionAfter(e,t){Oc("Cannot _insertSectionAfter nested section",!t.isNested);let r=t.next,i=this._post.sections;this.postEditor.insertSectionBefore(i,e,r),this.cursorPosition=e.tailPosition()}_insertLeafSection(e){if(Oc("Can only _insertLeafSection when cursor is at end of section",this.cursorPosition.isTail()),this._hasInsertedFirstLeafSection=!0,e=e.clone(),this.cursorSection.isBlank)Oc("Cannot insert leaf non-markerable section when cursor is nested",!(e.isMarkerable&&this._isNested)),this._replaceSection(this.cursorSection,[e]);else if(this.cursorSection.next&&this.cursorSection.next.isBlank)this._replaceSection(this.cursorSection.next,[e]);else{let t=this.cursorSection.next;this._insertSectionBefore(e,t)}}}class Ed{constructor(e,t){this.postEditor=e,this.post=t}insert(e,t){let r=new Sd(this,e);return t.isBlank||r.visit(t),r.cursorPosition}}function Cd(e,t=!1){t||console.log(`[mobiledoc-kit] [DEPRECATED]: ${e}`)}function Td(e){return Oc('Must pass non-blank object to "toRange"',!!e),e instanceof qc?e:e instanceof ud?e.toRange():void Oc(`Incorrect structure for rangeLike: ${e}`,!1)}class Ad{constructor(e){this.editor=e,this.renderTree=e._renderTree,this.post=e.post}clearSelection(){!function(){const e=window.getSelection();e&&e.removeAllRanges()}()}hasCursor(){return this.editor.hasRendered&&(this._hasCollapsedSelection()||this._hasSelection())}hasSelection(){return this.editor.hasRendered&&this._hasSelection()}isAddressable(e){let{renderTree:t}=this,r=t.findRenderNodeFromElement(e);if(r&&r.postNode.isCardSection){let t=r.element;if(e!==t&&e!==t.firstChild&&e!==t.lastChild)return!1}return!!r}get offsets(){if(!this.hasCursor())return qc.blankRange();let{renderTree:e}=this,t=Lc(this.editor.element),r=function(e,t){Nc("selection anchorNode should not be null",e.anchorNode),Nc("selection focusNode should not be null",e.focusNode);let{node:r,offset:i}=Gc(e.anchorNode,t,e.anchorOffset),{node:n,offset:o}=Gc(e.focusNode,t,e.focusOffset);return{anchorNode:r,anchorOffset:i,focusNode:n,focusOffset:o}}(this.selection,t);const{headNode:i,headOffset:n,tailNode:o,tailOffset:s,direction:a}=Zc(r),c=ud.fromNode(e,i,n),d=ud.fromNode(e,o,s);return new qc(c,d,a)}_findNodeForPosition(e){let t,r,i=Lc(e.section);if(Nc("expected section to have render node",i.renderNode),rd(i))r=0,t=0===e.offset?i.renderNode.element.firstChild:i.renderNode.element.lastChild;else if(i.isBlank||"image-section"===i.type)t=i.renderNode.cursorElement,r=0;else{let{marker:i,offsetInMarker:n}=e;Nc("expected position to have marker",i),Nc("expected marker to have render node",i.renderNode),i.isAtom?n>0?(r=0,t=i.renderNode.tailTextNode):(r=0,t=i.renderNode.headTextNode):(t=i.renderNode.element,r=n)}return{node:t,offset:r}}selectRange(e){if(e.isBlank)return void this.clearSelection();const{head:t,tail:r,direction:i}=e,{node:n,offset:o}=this._findNodeForPosition(t),{node:s,offset:a}=this._findNodeForPosition(r);this._moveToNode(n,o,s,a,i),this.editor._ensureFocus()}get selection(){return Pc(window.getSelection(),"expected window selection to not be null")}selectedText(){return this.selection.toString()}_moveToNode(e,t,r,i,n=jc.FORWARD){this.clearSelection(),n===jc.BACKWARD&&([e,t,r,i]=[r,i,e,t]);const o=document.createRange();o.setStart(e,t),n===jc.BACKWARD&&this.selection instanceof Selection?(this.selection.addRange(o),this.selection.extend(r,i)):(o.setEnd(r,i),this.selection.addRange(o))}_hasSelection(){const e=Lc(this.editor.element),{_selectionRange:t}=this;return!(!t||t.collapsed)&&(_c(e,Lc(this.selection.anchorNode))&&_c(e,Lc(this.selection.focusNode)))}_hasCollapsedSelection(){const{_selectionRange:e}=this;if(!e)return!1;return _c(Lc(this.editor.element),Lc(this.selection.anchorNode))}get _selectionRange(){const{selection:e}=this;return 0===e.rangeCount?null:e.getRangeAt(0)}}class Rd{constructor(e=[]){this.items=[],e.forEach((e=>this.add(e)))}add(e){this.has(e)||this.items.push(e)}get length(){return this.items.length}has(e){return-1!==this.items.indexOf(e)}toArray(){return this.items}}const Od="__parent";class Id{constructor(e){if(this.head=null,this.tail=null,this.length=0,e){const{adoptItem:t,freeItem:r}=e;this._adoptItem=t,this._freeItem=r}}adoptItem(e){e[Od]=this,this.length++,this._adoptItem&&this._adoptItem(e)}freeItem(e){e[Od]=null,this.length--,this._freeItem&&this._freeItem(e)}get isEmpty(){return 0===this.length}prepend(e){this.insertBefore(e,this.head)}append(e){this.insertBefore(e,null)}insertAfter(e,t){let r=t?t.next:this.head;this.insertBefore(e,r)}_ensureItemIsNotAlreadyInList(e){Oc("Cannot insert an item into a list if it is already in a list",!e.next&&!e.prev&&this.head!==e)}insertBefore(e,t){let r;switch(this._ensureItemIsNotInList(e),this.adoptItem(e),r=t&&t.prev?"middle":t?"start":"end",r){case"start":this.head&&(e.next=this.head,this.head.prev=e),this.head=e;break;case"middle":{let r=t.prev;e.next=t,e.prev=r,t.prev=e,r.next=e;break}case"end":{let t=this.tail;e.prev=t,t?t.next=e:this.head=e,this.tail=e;break}}}remove(e){if(!Nd(e))return;this._ensureItemIsInThisList(e),this.freeItem(e);let[t,r]=[e.prev,e.next];e.prev=null,e.next=null,t?t.next=r:this.head=r,r?r.prev=t:this.tail=t}forEach(e){let t=this.head,r=0;for(;t;)e(t,r++),t=t.next}map(e){let t=[];return this.forEach((r=>t.push(e(r)))),t}walk(e,t,r){let i=e||this.head;for(;i&&(r(i),i!==t);)i=i.next}readRange(e,t){let r=[];return this.walk(e,t,(e=>{r.push(e)})),r}toArray(){return this.readRange()}detect(e,t=this.head,r=!1){for(;t;){if(e(t))return t;t=r?t.prev:t.next}}any(e){return!!this.detect(e)}every(e){let t=this.head;for(;t;){if(!e(t))return!1;t=t.next}return!0}objectAt(e){let t=-1;return this.detect((()=>(t++,e===t)))}splice(e,t,r){let i=e,n=i.next,o=0;for(;i&&o<t;)o++,n=i.next,this.remove(i),i=n;r.forEach((e=>{this.insertBefore(e,n)}))}removeBy(e){let t=this.head;for(;t;){let r=t.next;e(t)&&this.remove(t),t=r}}_ensureItemIsNotInList(e){Oc("Cannot insert an item into a list if it is already in a list",!e[Od])}_ensureItemIsInThisList(e){Oc("Cannot remove item that is in another list",Nd(e)===this)}}function Nd(e){return e[Od]||null}function Md(e){return class extends e{constructor(){super(...arguments),this._tagName=null}set tagName(e){let t=wc(e);Oc(`Cannot set section tagName to ${e}`,this.isValidTagName(t)),this._tagName=t}get tagName(){return this._tagName}}}class Pd extends(Md(Qc)){constructor(e,t,r=[]){super(e),this.type=e,this.isMarkerable=!0,this.tagName=t,this.markers=new Id({adoptItem:e=>{Oc(`Can only insert markers and atoms into markerable (was: ${e.type})`,e.isMarker||e.isAtom),e.section=e.parent=this},freeItem:e=>e.section=e.parent=null}),r.forEach((e=>this.markers.append(e)))}canJoin(e){return e.isMarkerable&&e.type===this.type&&e.tagName===this.tagName}clone(){const e=this.markers.map((e=>e.clone()));return this.builder.createMarkerableSection(this.type,this.tagName,e)}get isBlank(){return!this.markers.length||this.markers.every((e=>e.isBlank))}textUntil(e){Oc("Cannot get textUntil for a position not in this section",e.section===this);let{marker:t,offsetInMarker:r}=e,i="",n=this.markers.head;for(;n;){if(n===t){i+=n.textUntil(r);break}i+=n.text,n=n.next}return i}offsetOfMarker(e,t=0){Oc("Cannot get offsetOfMarker for marker that is not child of this",e.section===this);let r=0,i=this.markers.head;for(;i&&i!==e.next;){r+=i===e?t:i.length,i=i.next}return r}_redistributeMarkers(e,t,r,i=0){let n=e;return ac(this.markers,(o=>{if(o===r){const[o,...s]=r.split(i);e.markers.append(o),ac(s,(e=>t.markers.append(e))),n=t}else n.markers.append(o.clone())})),[e,t]}splitMarkerAtOffset(e){let t;Oc("Cannot splitMarkerAtOffset when offset is > length",e<=this.length);let r=0,i=this.markers.head,n={added:[],removed:[]};if(i)for(;i&&(r+=i.length,r!==e);){if(r>e){t=i.length-(r-e);let o=i.splitAtOffset(t);n.added.push(...o),n.removed.push(i),this.markers.splice(i,1,o);break}i=i.next}else{let e=this.builder.createMarker();this.markers.prepend(e),n.added.push(e)}return n}splitAtPosition(e){const{marker:t,offsetInMarker:r}=e;return this.splitAtMarker(t,r)}markerBeforeOffset(e){let t=0,r=this.markers.head;for(;r;){if(t+=r.length,t===e)return r;Oc("markerBeforeOffset called with sectionOffset not between markers",t<e),r=r.next}}markerPositionAtOffset(e){let t=0,r=null,i=e;return this.markers.detect((e=>(t=Math.min(i,e.length),i-=t,0===i&&(r=e,!0)))),{marker:r,offset:t}}get text(){return lc(this.markers,((e,t)=>e+t.value),"")}get length(){return lc(this.markers,((e,t)=>e+t.length),0)}markersFor(e,t){const r=qc.create(this,e,this,t);let i=[];return this._markersInRange(r,((e,{markerHead:t,markerTail:r,isContained:n})=>{const o=e.clone();n||(o.value=e.value.slice(t,r)),i.push(o)})),i}markupsInRange(e){const t=new Rd;return this._markersInRange(e,(e=>{e.markups.forEach((e=>t.add(e)))})),t.toArray()}_markersInRange(e,t){const{head:r,tail:i}=e;Oc("Cannot call #_markersInRange if range expands beyond this section",r.section===this&&i.section===this);const{offset:n}=r,{offset:o}=i;let s=0,a=0,c=this.markers.head;for(;c;){if(a+=c.length,a>n&&s<o){let e=Math.max(n-s,0),r=c.length-Math.max(a-o,0);t(c,{markerHead:e,markerTail:r,isContained:0===e&&r===c.length})}if(s+=c.length,c=c.next,s>o)break}}join(e){let t=this.markers.tail,r=null;return e.markers.forEach((e=>{e.isBlank||(e=e.clone(),this.markers.append(e),r||(r=e))})),{beforeMarker:t,afterMarker:r}}}function Ld(e){return e.isMarkerable}const Dd="markup-section",$d="list-section",Hd="list-item";function Fd(e){const t=Object.keys(e);let r=t.length;const i=new Array(r);for(;r--;)i[r]=[t[r],e[t[r]]];return i}const Bd=["data-md-text-align"];function jd(e){return class extends e{constructor(){super(...arguments),this.attributes={}}hasAttribute(e){return e in this.attributes}setAttribute(e,t){if(!mc(Bd,e))throw new Error(`Invalid attribute "${e}" was passed. Constrain attributes to the spec-compliant whitelist.`);this.attributes[e]=t}removeAttribute(e){delete this.attributes[e]}getAttribute(e){return this.attributes[e]}eachAttribute(e){Fd(this.attributes).forEach((([t,r])=>e(t,r)))}}}const zd=["ul","ol"].map(wc),Ud=zd[0];class Kd extends(jd(Md(Qc))){constructor(e=Ud,t=[],r={}){super($d),this.isListSection=!0,this.isLeafSection=!1,this.tagName=e,Fd(r).forEach((([e,t])=>this.setAttribute(e,t))),this.items=new Id({adoptItem:e=>{Oc(`Cannot insert non-list-item to list (is: ${e.type})`,e.isListItem),e.section=e._parent=this},freeItem:e=>e.section=e._parent=null}),this.sections=this.items,t.forEach((e=>this.items.append(e)))}canJoin(){return!1}isValidTagName(e){return mc(zd,e)}headPosition(){return this.items.head.headPosition()}tailPosition(){return this.items.tail.tailPosition()}get isBlank(){return this.items.isEmpty}clone(){let e=this.builder.createListSection(this.tagName);return ac(this.items,(t=>e.items.append(t.clone()))),e}join(e){if(Wd(e))e.items.forEach((e=>this.join(e)));else if(e.isMarkerable){let t=this.builder.createListItem();t.join(e),this.items.append(t)}}}function Wd(e){return e.isListSection}const Vd=["li"].map(wc);class Gd extends Pd{constructor(e,t=[]){super("list-item",e,t),this.isListItem=!0,this.isNested=!0,this.section=null}isValidTagName(e){return mc(Vd,e)}splitAtMarker(e,t=0){const r=!this.next,i=!e&&0===t&&r;let[n,o]=[this.builder.createListItem(),i?this.builder.createMarkupSection():this.builder.createListItem()];return this._redistributeMarkers(n,o,e,t)}get post(){return Pc(this.section,"expected list item to have section").post}}function Zd(e){return e.isListItem}const qd=["aside","blockquote","h1","h2","h3","h4","h5","h6","p"].map(wc),Yd=["aside","blockquote","h1","h2","h3","h4","h5","h6","p"].map(wc),Jd=qd[8];class Xd extends(jd(Pd)){constructor(e=Jd,t=[],r={}){super(Dd,e,t),this.isMarkupSection=!0,this.isGenerated=!1,this._inferredTagName=!1,Fd(r).forEach((([e,t])=>this.setAttribute(e,t)))}isValidTagName(e){return mc(qd,e)}splitAtMarker(e,t=0){let[r,i]=[this.builder.createMarkupSection(this.tagName,[],!1,this.attributes),this.builder.createMarkupSection()];return this._redistributeMarkers(r,i,e,t)}}function Qd(e){return e.isMarkupSection}function el(e){return Qd(e)&&e._inferredTagName}const{FORWARD:tl,BACKWARD:rl}=jc;const il={BEFORE_COMPLETE:"beforeComplete",COMPLETE:"complete",AFTER_COMPLETE:"afterComplete"};class nl{constructor(e){this.editor=e,this.builder=this.editor.builder,this._callbacks=new yd(fc(il)),this._didComplete=!1,this.editActionTaken=null,this._renderRange=()=>this.editor.selectRange(this._range),this._postDidChange=()=>this.editor._postDidChange(),this._rerender=()=>this.editor.rerender()}addCallback(e,t){this._callbacks.addCallback(e,t)}addCallbackOnce(e,t){this._callbacks.addCallbackOnce(e,t)}runCallbacks(e){this._callbacks.runCallbacks(e)}begin(){this._range=this.editor.range}setRange(e){e=Td(e),this._range=e,this.scheduleAfterRender(this._renderRange,!0)}deleteRange(e){Oc("Must pass MobiledocKit Range to `deleteRange`",e instanceof qc),this.editActionTaken=2;const{head:t,tail:r}=e;let i=t.section,n=r.section;const{editor:o}=this,{post:s}=o;if(i===n)return this.cutSection(i,t,r);let a=i.nextLeafSection(),c=this.cutSection(i,t,i.tailPosition());for(i=c.section;a!==n;){let e=a;a=a.nextLeafSection(),this.removeSection(e)}let d=this.cutSection(n,n.headPosition(),r);return n=d.section,n.isBlank?this.removeSection(n):Ld(i)&&Ld(n)?(i.join(n),this._markDirty(i),this.removeSection(n)):i.isBlank&&(this.removeSection(i),c=d),s.isBlank&&(s.sections.append(this.builder.createMarkupSection("p")),c=s.headPosition()),c}cutSection(e,t,r){if(Oc("Must pass head position and tail position to `cutSection`",t instanceof ud&&r instanceof ud),Oc("Must pass positions within same section to `cutSection`",t.section===r.section),e.isBlank||t.isEqual(r))return t;if(e.isCardSection){if(t.isHead()&&r.isTail()){let t=this.builder.createMarkupSection();return this.replaceSection(e,t),t.headPosition()}return r}let i=t.toRange(r);return this.splitMarkers(i).forEach((e=>this.removeMarker(e))),t}_coalesceMarkers(e){Ld(e)&&(this._removeBlankMarkers(e),this._joinSimilarMarkers(e))}_removeBlankMarkers(e){ac(cc(e.markers,(e=>e.isBlank)),(e=>this.removeMarker(e)))}_joinSimilarMarkers(e){let t,r=e.markers.head;for(;r&&r.next;)t=r.next,r.canJoin(t)&&(t.value=r.value+t.value,this._markDirty(t),this.removeMarker(r)),r=t}removeMarker(e){this._scheduleForRemoval(e),e.section&&(this._markDirty(e.section),e.section.markers.remove(e))}_scheduleForRemoval(e){e.renderNode&&(e.renderNode.scheduleForRemoval(),this.scheduleRerender(),this.scheduleDidUpdate()),(e.prev&&Wd(e.prev)||e.next&&Wd(e.next))&&this.addCallback(il.BEFORE_COMPLETE,(()=>this._joinContiguousListSections()))}_joinContiguousListSections(){let e,t,{post:r}=this.editor,i=this._range,n=[],o=null;ac(r.sections,(r=>{e&&Wd(e)&&Wd(r)&&e.tagName===r.tagName?(t=t||[e],t.push(r)):(t&&n.push(t),t=null),e=r})),t&&n.push(t),ac(n,(e=>{let t=e[0];ac(e,(e=>{if(e===t)return;let r,n=i.head;!i.isBlank&&Zd(n.section)&&n.section.parent===e&&(r=t.tailPosition()),this._joinListSections(t,e),r&&(o=r.move(tl))}))})),o&&this.setRange(o)}_joinListSections(e,t){e.join(t),this._markDirty(e),this.removeSection(t)}_markDirty(e){e.renderNode&&(e.renderNode.markDirty(),this.scheduleRerender(),this.scheduleDidUpdate()),"section"in e&&e.section&&this._markDirty(e.section),Ld(e)&&this.addCallback(il.BEFORE_COMPLETE,(()=>this._coalesceMarkers(e)))}deleteFrom(e,t=jc.BACKWARD){return Cd("`postEditor#deleteFrom is deprecated. Use `deleteAtPosition(position, direction=BACKWARD, {unit}={unit: 'char'})` instead"),this.deleteAtPosition(e,t,{unit:Qu.CHAR})}deleteAtPosition(e,t=jc.BACKWARD,{unit:r}={unit:Qu.CHAR}){return t===jc.BACKWARD?this._deleteAtPositionBackward(e,r):this._deleteAtPositionForward(e,r)}_deleteAtPositionBackward(e,t){if(e.isHead()&&Zd(e.section))return this.toggleSection("p",e),this._range.head;{let r=("word"===t?e.moveWord(rl):e.move(rl)).toRange(e);return this.deleteRange(r)}}_deleteAtPositionForward(e,t){let r="word"===t?e.moveWord(tl):e.move(tl),i=e.toRange(r);return this.deleteRange(i)}splitMarkers(e){const{post:t}=this.editor,{head:r,tail:i}=e;return this.splitSectionMarkerAtOffset(r.section,r.offset),this.splitSectionMarkerAtOffset(i.section,i.offset),t.markersContainedByRange(e)}splitSectionMarkerAtOffset(e,t){e.splitMarkerAtOffset(t).removed.forEach((e=>this.removeMarker(e)))}splitSection(e){const t=e.section;if(rd(t))return this._splitCardSection(t,e);if(Zd(t)){if(t.isBlank&&!t.next){let e=t.parent,r=this.editor.post.sections,i=this.builder.createMarkupSection();return this.removeSection(t),this.insertSectionBefore(r,i,e.next),[null,i]}{let[r,i]=this._splitListItem(t,e);return[r,i]}}{let r=t.splitAtPosition(e);return r.forEach((e=>this._coalesceMarkers(e))),this._replaceSection(t,r),r}}_splitCardSection(e,t){let{offset:r}=t;Oc("Cards section must be split at offset 0 or 1",0===r||1===r);let i,n,o=this.builder.createMarkupSection();0===r?(i=e,n=[o,e]):(i=e.next,n=[e,o]);let s=this.editor.post.sections;return this.insertSectionBefore(s,o,i),n}replaceSection(e,t){e?this._replaceSection(e,[t]):this.insertSectionBefore(this.editor.post.sections,t,null)}moveSectionBefore(e,t,r){const i=t.clone();return this.removeSection(t),this.insertSectionBefore(e,i,r),i}moveSectionUp(e){if(!e.prev)return e;const t=e.parent.sections,r=e.prev;return this.moveSectionBefore(t,e,r)}moveSectionDown(e){if(!e.next)return e;const t=e.next.next,r=e.parent.sections;return this.moveSectionBefore(r,e,t)}insertMarkers(e,t){const r=e.section;let i=e.offset;Oc("Cannot insert markers at non-markerable position",r.isMarkerable),this.editActionTaken=1,r.splitMarkerAtOffset(i).removed.forEach((e=>this._scheduleForRemoval(e)));let n=r.markerBeforeOffset(i);t.forEach((e=>{r.markers.insertAfter(e,n),i+=e.length,n=e})),this._coalesceMarkers(r),this._markDirty(r);let o=r.toPosition(i);return this.setRange(o),o}insertTextWithMarkup(e,t,r=[]){let{section:i}=e;if(!i.isMarkerable)return;let n=this.builder.createMarker(t,r);return this.insertMarkers(e,[n])}insertText(e,t){let{section:r}=e;if(!r.isMarkerable)return;let i=e.marker&&e.marker.markups;return i=i||[],this.insertTextWithMarkup(e,t,i)}_replaceSection(e,t){let r=e.next,i=e.parent.sections;Qd(t[0])&&Zd(e)&&(i=e.parent.parent.sections,r=e.parent.next),t.forEach((e=>this.insertSectionBefore(i,e,r))),this.removeSection(e)}addMarkupToRange(e,t){if(e.isCollapsed)return;let r=this.splitMarkers(e);if(r.length){let e=lc(r,(function(e,t){return function(e,t){let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];)r++;return e.slice(0,r)}(e,t.markups)}),r[0].markups).length;r.forEach((r=>{r.addMarkupAtIndex(t,e),this._markDirty(r)}))}}removeMarkupFromRange(e,t){e.isCollapsed||this.splitMarkers(e).forEach((e=>{e.removeMarkup(t),this._markDirty(e)}))}toggleMarkup(e,t=this._range){t=Td(t);const r="string"==typeof e?this.builder.createMarkup(e):e,i=this.editor.detectMarkupInRange(t,r.tagName);i?this.removeMarkupFromRange(t,i):this.addMarkupToRange(t,r),this.setRange(t)}toggleSection(e,t=this._range){t=function(e){const{head:t,tail:r}=e;return 0===r.offset&&t.section!==r.section&&(e.tail=new ud(r.section.prev,r.section.prev.length)),e}(Td(t)),e=wc(e);let{post:r}=this.editor,i=!0;r.walkMarkerableSections(t,(t=>{this._isSameSectionType(t,e)||(i=!1)}));let n=i?"p":e,o=[];r.walkMarkerableSections(t,(e=>{let t=this.changeSectionTagName(e,n);o.push({from:e,to:t})}));let s=this._determineNextRangeAfterToggleSection(t,o);this.setRange(s)}_determineNextRangeAfterToggleSection(e,t){if(t.length){let r=oc(t,(({from:t})=>t===e.headSection)).to,i=oc(t,(({from:t})=>t===e.tailSection)).to;return r.isListSection||i.isListSection?t[0].to.headPosition().toRange():qc.create(r,e.headSectionOffset,i,e.tailSectionOffset,e.direction)}return e}setAttribute(e,t,r=this._range){this._mutateAttribute(e,r,((e,r)=>{if(e.getAttribute(r)!==t)return e.setAttribute(r,t),!0}))}removeAttribute(e,t=this._range){this._mutateAttribute(e,t,((e,t)=>{if(e.hasAttribute(t))return e.removeAttribute(t),!0}))}_mutateAttribute(e,t,r){t=Td(t);let{post:i}=this.editor,n=`data-md-${e}`;i.walkMarkerableSections(t,(e=>{const t=Zd(e)?e.parent:e;!0===r(t,n)&&this._markDirty(e)})),this.setRange(t)}_isSameSectionType(e,t){return Zd(e)?e.parent.tagName===t:e.tagName===t}changeSectionTagName(e,t){return Oc("Cannot pass non-markerable section to `changeSectionTagName`",e.isMarkerable),"ul"===(r=t)||"ol"===r?this._changeSectionToListItem(e,t):Zd(e)?this._changeSectionFromListItem(e,t):(e.tagName=t,this._markDirty(e),e);var r}_splitListItem(e,t){let{section:r,offset:i}=t;Oc("Cannot split list item at position that does not include item",e===r),e.splitMarkerAtOffset(i);let n=e.markerBeforeOffset(i),o=this.builder.createListItem(),s=this.builder.createListItem(),a=o;return e.markers.forEach((e=>{a.markers.append(e.clone()),e===n&&(a=s)})),this._replaceSection(e,[o,s]),[o,s]}_splitListAtPosition(e,t){if(Oc("Cannot split list at position not in list",t.section.parent===e),!t.isHead()&&!t.isTail()){let e=t.section,[r]=this._splitListItem(e,t);t=r.tailPosition()}let r=this.builder.createListSection(e.tagName),i=this.builder.createListSection(e.tagName),n=t.section,o=r;return e.items.forEach((e=>{e===n&&t.isEqual(e.headPosition())&&(o=i),o.items.append(e.clone()),e===n&&(o=i)})),this._replaceSection(e,[r,i]),[r,i]}_splitListAtItem(e,t){let r=e,i=this.builder.createListSection(r.tagName,[],r.attributes),n=this.builder.createListSection(r.tagName),o=!0;r.items.toArray().forEach((e=>{let r;if(e===t)o=!1,r=n;else{if(!o)return;r=i}r.join(e),this.removeSection(e)})),Oc("Cannot split list at item that is not present in the list",!o);let s=this.editor.post.sections;return this.insertSectionBefore(s,n,r),this.insertSectionBefore(s,i,n),this.addCallback(il.BEFORE_COMPLETE,(()=>{[i,r].forEach((e=>{let t=!!e._parent;e.isBlank&&t&&this.removeSection(e)}))})),[i,n,r]}_changeSectionFromListItem(e,t){Mc("Must pass list item to `_changeSectionFromListItem`",0,Zd(e));let r=e.parent,i=this.builder.createMarkupSection(t);i.join(e);let[,n]=this._splitListAtItem(r,e);return this.replaceSection(n,i),i}_changeSectionToListItem(e,t){if(e.isListItem&&e.parent.tagName===t)return e;let r,i=this.builder.createListSection(t);if(i.join(e),Zd(e)){let[,t]=this._splitListAtItem(e.parent,e);r=t}else r=e;return this.replaceSection(r,i),i}insertSectionBefore(e,t,r){e.insertBefore(t,r),this._markDirty(t.parent)}insertSection(e){const t=this.editor.activeSection,r=t&&t.next,i=this.editor.post.sections;this.insertSectionBefore(i,e,r)}insertSectionAtEnd(e){this.insertSectionBefore(this.editor.post.sections,e,null)}insertPost(e,t){let r=this.editor.post;return new Ed(this,r).insert(e,t)}removeSection(e){let t=e.parent;Mc("expected section to have child sections",0,_d(t)),this._scheduleForRemoval(e),t.sections.remove(e),Wd(t)&&this._scheduleListRemovalIfEmpty(t)}removeAllSections(){this.editor.post.sections.toArray().forEach((e=>{this.removeSection(e)}))}migrateSectionsFromPost(e){e.sections.toArray().forEach((t=>{e.sections.remove(t),this.insertSectionBefore(this.editor.post.sections,t,null)}))}_scheduleListRemovalIfEmpty(e){this.addCallback(il.BEFORE_COMPLETE,(()=>{!!e._parent&&e.isBlank&&this.removeSection(e)}))}schedule(e,t=!1){Oc("Work can only be scheduled before a post edit has completed",!this._didComplete),t?this.addCallbackOnce(il.COMPLETE,e):this.addCallback(il.COMPLETE,e)}scheduleOnce(e){this.schedule(e,!0)}scheduleRerender(){this.scheduleOnce(this._rerender)}scheduleDidUpdate(){this.scheduleOnce(this._postDidChange)}scheduleAfterRender(e,t=!1){t?this.addCallbackOnce(il.AFTER_COMPLETE,e):this.addCallback(il.AFTER_COMPLETE,e)}complete(){Oc("Post editing can only be completed once",!this._didComplete),this.runCallbacks(il.BEFORE_COMPLETE),this._didComplete=!0,this.runCallbacks(il.COMPLETE),this.runCallbacks(il.AFTER_COMPLETE)}undoLastChange(){this.editor._editHistory.stepBackward(this)}redoLastChange(){this.editor._editHistory.stepForward(this)}cancelSnapshot(){this._shouldCancelSnapshot=!0}}const ol={name:"image",type:"dom",render({payload:e}){let t=document.createElement("img");return t.src=e.src||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXp7vG6vsHm6+63u77Hy868wMPe4+bO09bh5unr8fTR1djAxMfM0NPX3N/c4eTBxcjXRf5TAAACh0lEQVR4nO3b6ZKqMBSFUSQMYZL3f9tbBq/NEEDiqUqOfusn1ZXKbjcQlGQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACC6RkbsGHuabChEtHmiGYfS3EQYM+Sxw/gMQvmcNnYaj6oTDHi73WPn2eqnj9B8zo3TJXcq5uNjXmVff86VwSR3JtryMa1BYqi7S1hJDCVpSigyLcGhJJEwzlCSNtPKrbVhVwsdCfOhH7uuaG3ARV9DwsaOzxt3N1yPqCHhvXytTUz92VDpmE/LLhZwl++R6Sds6sUa/PL6K/2E2fIhw1xdRKefsFolrPc+xNx/N0k/4fpBsdhL2HfeiN+TsDCms8dDpeRyS3P3QDl6Iqaf8L0rTf+80m6Lmn7Ct+4Wxf+/2RY1/YRv3PHz/u+fsCmqgoTnq7Z+8SGviqoh4dnKu1ieqauiakh4/PQ0r6ivqDoSHj0B97eNRVG1JNxV+L4bnxdVecJtRTdFVZ7QU9F1UXUn9FZ0VVRlCav5ob2KLouqKmFjy676u2HsVnRRVFUJq3J+8KCi86IqSthMvyl209Hjijqm3RsqAZ5pNfa5PJ2KelJRjQmr1/r7cfy0ouoSNvOfvbvhvKLaEr4qOin9kTQnrN7LpDZhE/Zmhp6Eq4p+YcKgiipKGFhRRQkDK6ooYfgLbiSMioQkJGF8P5XwHv4O+7AaKiXzaeXh1kMl5AffTUxiKEm/krD94BR8Gdxl1fceSlR58ZhXKbEpyD2amNiBtmrJLTMHL1LF8/rpXkSZXEmz8K8uvAFFNm6Iq0aBLUFOmeCuJ6exrcCmoLpN7kYx891bSAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgh/wDdr8peyRHLogAAAAASUVORK5CYII=",t}};class sl{constructor(e){this.builder=e}parse({sections:e}){try{const t=e[0],r=e[1],i=this.builder.createPost();return this.markups=[],this.markerTypes=this.parseMarkerTypes(t),this.parseSections(r,i),i}catch(e){Oc(`Unable to parse mobiledoc: ${e instanceof Error?e.message:""}`,!1)}}parseMarkerTypes(e){return e.map((e=>this.parseMarkerType(e)))}parseMarkerType([e,t]){const r=hc(t||[]);return this.builder.createMarkup(e,r)}parseSections(e,t){e.forEach((e=>this.parseSection(e,t)))}parseSection(e,t){switch(e[0]){case 1:this.parseMarkupSection(e,t);break;case 2:this.parseImageSection(e,t);break;case 10:this.parseCardSection(e,t);break;case 3:this.parseListSection(e,t);break;default:Oc(`Unexpected section type ${e[0]}`,!1)}}parseCardSection([,e,t],r){const i=this.builder.createCardSection(e,t);r.sections.append(i)}parseImageSection([,e],t){const r=this.builder.createImageSection(e);t.sections.append(r)}parseMarkupSection([,e,t],r){const i=this.builder.createMarkupSection("pull-quote"===e.toLowerCase()?"aside":e);r.sections.append(i),this.parseMarkers(t,i),cc(i.markers,(e=>e.isBlank)).forEach((e=>{i.markers.remove(e)}))}parseListSection([,e,t],r){const i=this.builder.createListSection(e);r.sections.append(i),this.parseListItems(t,i)}parseListItems(e,t){e.forEach((e=>this.parseListItem(e,t)))}parseListItem(e,t){const r=this.builder.createListItem();this.parseMarkers(e,r),t.items.append(r)}parseMarkers(e,t){e.forEach((e=>this.parseMarker(e,t)))}parseMarker([e,t,r],i){e.forEach((e=>{this.markups.push(this.markerTypes[e])}));const n=this.builder.createMarker(r,this.markups.slice());i.markers.append(n),this.markups=this.markups.slice(0,this.markups.length-t)}}class al{constructor(e){this.builder=e}parse({sections:e,markups:t,cards:r,atoms:i}){try{const n=this.builder.createPost();return this.markups=[],this.markerTypes=this.parseMarkerTypes(t),this.cardTypes=this.parseCardTypes(r),this.atomTypes=this.parseAtomTypes(i),this.parseSections(e,n),n}catch(e){Oc(`Unable to parse mobiledoc: ${e instanceof Error?e.message:""}`,!1)}}parseMarkerTypes(e){return e.map((e=>this.parseMarkerType(e)))}parseMarkerType([e,t]){const r=hc(t||[]);return this.builder.createMarkup(e,r)}parseCardTypes(e){return e.map((e=>this.parseCardType(e)))}parseCardType([e,t]){return[e,t]}parseAtomTypes(e){return e.map((e=>this.parseAtomType(e)))}parseAtomType([e,t,r]){return[e,t,r]}parseSections(e,t){e.forEach((e=>this.parseSection(e,t)))}parseSection(e,t){switch(e[0]){case 1:this.parseMarkupSection(e,t);break;case 2:this.parseImageSection(e,t);break;case 10:this.parseCardSection(e,t);break;case 3:this.parseListSection(e,t);break;default:Oc(`Unexpected section type ${e[0]}`,!1)}}getAtomTypeFromIndex(e){const t=this.atomTypes[e];return Oc(`No atom definition found at index ${e}`,!!t),t}getCardTypeFromIndex(e){const t=this.cardTypes[e];return Oc(`No card definition found at index ${e}`,!!t),t}parseCardSection([,e],t){const[r,i]=this.getCardTypeFromIndex(e),n=this.builder.createCardSection(r,i);t.sections.append(n)}parseImageSection([,e],t){const r=this.builder.createImageSection(e);t.sections.append(r)}parseMarkupSection([,e,t],r){const i=this.builder.createMarkupSection("pull-quote"===e.toLowerCase()?"aside":e);r.sections.append(i),this.parseMarkers(t,i),cc(i.markers,(e=>e.isBlank)).forEach((e=>{i.markers.remove(e)}))}parseListSection([,e,t],r){const i=this.builder.createListSection(e);r.sections.append(i),this.parseListItems(t,i)}parseListItems(e,t){e.forEach((e=>this.parseListItem(e,t)))}parseListItem(e,t){const r=this.builder.createListItem();this.parseMarkers(e,r),t.items.append(r)}parseMarkers(e,t){e.forEach((e=>this.parseMarker(e,t)))}parseMarker([e,t,r,i],n){t.forEach((e=>{this.markups.push(this.markerTypes[e])}));const o=this.buildMarkerType(e,i);n.markers.append(o),this.markups=this.markups.slice(0,this.markups.length-r)}buildMarkerType(e,t){switch(e){case 0:return this.builder.createMarker(t,this.markups.slice());case 1:{const[e,r,i]=this.getAtomTypeFromIndex(t);return this.builder.createAtom(e,r,i,this.markups.slice())}default:Oc(`Unexpected marker type ${e}`,!1)}}}class cl{constructor(e){this.builder=e}parse({sections:e,markups:t,cards:r,atoms:i}){try{const n=this.builder.createPost();return this.markups=[],this.markerTypes=this.parseMarkerTypes(t),this.cardTypes=this.parseCardTypes(r),this.atomTypes=this.parseAtomTypes(i),this.parseSections(e,n),n}catch(e){Oc(`Unable to parse mobiledoc: ${e instanceof Error?e.message:""}`,!1)}}parseMarkerTypes(e){return e.map((e=>this.parseMarkerType(e)))}parseMarkerType([e,t]){const r=hc(t||[]);return this.builder.createMarkup(e,r)}parseCardTypes(e){return e.map((e=>this.parseCardType(e)))}parseCardType([e,t]){return[e,t]}parseAtomTypes(e){return e.map((e=>this.parseAtomType(e)))}parseAtomType([e,t,r]){return[e,t,r]}parseSections(e,t){e.forEach((e=>this.parseSection(e,t)))}parseSection(e,t){switch(e[0]){case 1:this.parseMarkupSection(e,t);break;case 2:this.parseImageSection(e,t);break;case 10:this.parseCardSection(e,t);break;case 3:this.parseListSection(e,t);break;default:Oc(`Unexpected section type ${e[0]}`,!1)}}getAtomTypeFromIndex(e){const t=this.atomTypes[e];return Oc(`No atom definition found at index ${e}`,!!t),t}getCardTypeFromIndex(e){const t=this.cardTypes[e];return Oc(`No card definition found at index ${e}`,!!t),t}parseCardSection([,e],t){const[r,i]=this.getCardTypeFromIndex(e),n=this.builder.createCardSection(r,i);t.sections.append(n)}parseImageSection([,e],t){const r=this.builder.createImageSection(e);t.sections.append(r)}parseMarkupSection([,e,t],r){const i=this.builder.createMarkupSection(e);r.sections.append(i),this.parseMarkers(t,i),cc(i.markers,(e=>e.isBlank)).forEach((e=>{i.markers.remove(e)}))}parseListSection([,e,t],r){const i=this.builder.createListSection(e);r.sections.append(i),this.parseListItems(t,i)}parseListItems(e,t){e.forEach((e=>this.parseListItem(e,t)))}parseListItem(e,t){const r=this.builder.createListItem();this.parseMarkers(e,r),t.items.append(r)}parseMarkers(e,t){e.forEach((e=>this.parseMarker(e,t)))}parseMarker([e,t,r,i],n){t.forEach((e=>{this.markups.push(this.markerTypes[e])}));const o=this.buildMarkerType(e,i);n.markers.append(o),this.markups=this.markups.slice(0,this.markups.length-r)}buildMarkerType(e,t){switch(e){case 0:return this.builder.createMarker(t,this.markups.slice());case 1:{const[e,r,i]=this.getAtomTypeFromIndex(t);return this.builder.createAtom(e,r,i,this.markups.slice())}default:Oc(`Unexpected marker type ${e}`,!1)}}}class dl{constructor(e){this.builder=e}parse({sections:e,markups:t,cards:r,atoms:i}){try{const n=this.builder.createPost();return this.markups=[],this.markerTypes=this.parseMarkerTypes(t),this.cardTypes=this.parseCardTypes(r),this.atomTypes=this.parseAtomTypes(i),this.parseSections(e,n),n}catch(e){Oc(`Unable to parse mobiledoc: ${e instanceof Error?e.message:""}`,!1)}}parseMarkerTypes(e){return e.map((e=>this.parseMarkerType(e)))}parseMarkerType([e,t]){const r=hc(t||[]);return this.builder.createMarkup(e,r)}parseCardTypes(e){return e.map((e=>this.parseCardType(e)))}parseCardType([e,t]){return[e,t]}parseAtomTypes(e){return e.map((e=>this.parseAtomType(e)))}parseAtomType([e,t,r]){return[e,t,r]}parseSections(e,t){e.forEach((e=>this.parseSection(e,t)))}parseSection(e,t){switch(e[0]){case 1:this.parseMarkupSection(e,t);break;case 2:this.parseImageSection(e,t);break;case 10:this.parseCardSection(e,t);break;case 3:this.parseListSection(e,t);break;default:Oc(`Unexpected section type ${e[0]}`,!1)}}getAtomTypeFromIndex(e){const t=this.atomTypes[e];return Oc(`No atom definition found at index ${e}`,!!t),t}getCardTypeFromIndex(e){const t=this.cardTypes[e];return Oc(`No card definition found at index ${e}`,!!t),t}parseCardSection([,e],t){const[r,i]=this.getCardTypeFromIndex(e),n=this.builder.createCardSection(r,i);t.sections.append(n)}parseImageSection([,e],t){const r=this.builder.createImageSection(e);t.sections.append(r)}parseMarkupSection([,e,t,r],i){const n=this.builder.createMarkupSection(e);i.sections.append(n),r&&Fd(hc(r)).forEach((([e,t])=>{n.setAttribute(e,t)})),this.parseMarkers(t,n),cc(n.markers,(e=>e.isBlank)).forEach((e=>{n.markers.remove(e)}))}parseListSection([,e,t,r],i){const n=this.builder.createListSection(e);i.sections.append(n),r&&Fd(hc(r)).forEach((([e,t])=>{n.setAttribute(e,t)})),this.parseListItems(t,n)}parseListItems(e,t){e.forEach((e=>this.parseListItem(e,t)))}parseListItem(e,t){const r=this.builder.createListItem();this.parseMarkers(e,r),t.items.append(r)}parseMarkers(e,t){e.forEach((e=>this.parseMarker(e,t)))}parseMarker([e,t,r,i],n){t.forEach((e=>{this.markups.push(this.markerTypes[e])}));const o=this.buildMarkerType(e,i);n.markers.append(o),this.markups=this.markups.slice(0,this.markups.length-r)}buildMarkerType(e,t){switch(e){case 0:return this.builder.createMarker(t,this.markups.slice());case 1:{const[e,r,i]=this.getAtomTypeFromIndex(t);return this.builder.createAtom(e,r,i,this.markups.slice())}default:Oc(`Unexpected marker type ${e}`,!1)}}}function ll(e,t,r){const i=t.type;Ic(`Cannot visit unknown type ${i}`,i,e),e[i](t,r)}function hl(e,t){for(let r=0,i=t.length;r<i;r++){let[i,...n]=t[r];e[i].apply(e,n)}}function ul(e,t,r){t&&0!==t.length&&ac(t,(t=>{ll(e,t,r)}))}const pl="0.2.0",ml={post(e,t){t.push(["openPost"]),ul(ml,e.sections,t)},"markup-section"(e,t){t.push(["openMarkupSection",e.tagName]),ul(ml,e.markers,t)},"list-section"(e,t){t.push(["openListSection",e.tagName]),ul(ml,e.items,t)},"list-item"(e,t){t.push(["openListItem"]),ul(ml,e.markers,t)},"image-section"(e,t){t.push(["openImageSection",e.src])},"card-section"(e,t){t.push(["openCardSection",e.name,e.payload])},marker(e,t){t.push(["openMarker",e.closedMarkups.length,e.value]),ul(ml,e.openedMarkups,t)},markup(e,t){t.push(["openMarkup",e.tagName,uc(e.attributes)])}};class fl{openMarker(e,t){this.markupMarkerIds=[],this.markers.push([this.markupMarkerIds,e,t||""])}openMarkupSection(e){this.markers=[],this.sections.push([1,e,this.markers])}openListSection(e){this.items=[],this.sections.push([3,e,this.items])}openListItem(){this.markers=[],this.items.push(this.markers)}openImageSection(e){this.sections.push([2,e])}openCardSection(e,t){this.sections.push([10,e,t])}openPost(){this.markerTypes=[],this.sections=[],this.result={version:pl,sections:[this.markerTypes,this.sections]}}openMarkup(e,t){const r=this._findOrAddMarkerTypeIndex(e,t);this.markupMarkerIds.push(r)}_findOrAddMarkerTypeIndex(e,t){this._markerTypeCache||(this._markerTypeCache={});const r=`${e}-${t.join("-")}`;let i=this._markerTypeCache[r];if(void 0===i){let n=[e];t.length&&n.push(t),this.markerTypes.push(n),i=this.markerTypes.length-1,this._markerTypeCache[r]=i}return i}}const gl={render(e){let t=[];ll(ml,e,t);let r=new fl;return hl(r,t),r.result}},bl="0.3.0",vl={post(e,t){t.push(["openPost"]),ul(vl,e.sections,t)},"markup-section"(e,t){t.push(["openMarkupSection",e.tagName]),ul(vl,e.markers,t)},"list-section"(e,t){t.push(["openListSection",e.tagName]),ul(vl,e.items,t)},"list-item"(e,t){t.push(["openListItem"]),ul(vl,e.markers,t)},"image-section"(e,t){t.push(["openImageSection",e.src])},"card-section"(e,t){t.push(["openCardSection",e.name,e.payload])},marker(e,t){t.push(["openMarker",e.closedMarkups.length,e.value]),ul(vl,e.openedMarkups,t)},markup(e,t){t.push(["openMarkup",e.tagName,uc(e.attributes)])},atom(e,t){t.push(["openAtom",e.closedMarkups.length,e.name,e.value,e.payload]),ul(vl,e.openedMarkups,t)}};class yl{openMarker(e,t){this.markupMarkerIds=[],this.markers.push([0,this.markupMarkerIds,e,t||""])}openAtom(e,t,r,i){const n=this._addAtomTypeIndex(t,r,i);this.markupMarkerIds=[],this.markers.push([1,this.markupMarkerIds,e,n])}openMarkupSection(e){this.markers=[],this.sections.push([1,e,this.markers])}openListSection(e){this.items=[],this.sections.push([3,e,this.items])}openListItem(){this.markers=[],this.items.push(this.markers)}openImageSection(e){this.sections.push([2,e])}openCardSection(e,t){const r=this._addCardTypeIndex(e,t);this.sections.push([10,r])}openPost(){this.atomTypes=[],this.cardTypes=[],this.markerTypes=[],this.sections=[],this.result={version:bl,atoms:this.atomTypes,cards:this.cardTypes,markups:this.markerTypes,sections:this.sections}}openMarkup(e,t){const r=this._findOrAddMarkerTypeIndex(e,t);this.markupMarkerIds.push(r)}_addCardTypeIndex(e,t){let r=[e,t];return this.cardTypes.push(r),this.cardTypes.length-1}_addAtomTypeIndex(e,t,r){let i=[e,t,r];return this.atomTypes.push(i),this.atomTypes.length-1}_findOrAddMarkerTypeIndex(e,t){this._markerTypeCache||(this._markerTypeCache={});const r=`${e}-${t.join("-")}`;let i=this._markerTypeCache[r];if(void 0===i){let n=[e];t.length&&n.push(t),this.markerTypes.push(n),i=this.markerTypes.length-1,this._markerTypeCache[r]=i}return i}}const _l={render(e){let t=[];ll(vl,e,t);let r=new yl;return hl(r,t),r.result}},xl="0.3.1",kl={post(e,t){t.push(["openPost"]),ul(kl,e.sections,t)},"markup-section"(e,t){t.push(["openMarkupSection",e.tagName]),ul(kl,e.markers,t)},"list-section"(e,t){t.push(["openListSection",e.tagName]),ul(kl,e.items,t)},"list-item"(e,t){t.push(["openListItem"]),ul(kl,e.markers,t)},"image-section"(e,t){t.push(["openImageSection",e.src])},"card-section"(e,t){t.push(["openCardSection",e.name,e.payload])},marker(e,t){t.push(["openMarker",e.closedMarkups.length,e.value]),ul(kl,e.openedMarkups,t)},markup(e,t){t.push(["openMarkup",e.tagName,uc(e.attributes)])},atom(e,t){t.push(["openAtom",e.closedMarkups.length,e.name,e.value,e.payload]),ul(kl,e.openedMarkups,t)}};class wl{openMarker(e,t){this.markupMarkerIds=[],this.markers.push([0,this.markupMarkerIds,e,t||""])}openAtom(e,t,r,i){const n=this._addAtomTypeIndex(t,r,i);this.markupMarkerIds=[],this.markers.push([1,this.markupMarkerIds,e,n])}openMarkupSection(e){this.markers=[],this.sections.push([1,e,this.markers])}openListSection(e){this.items=[],this.sections.push([3,e,this.items])}openListItem(){this.markers=[],this.items.push(this.markers)}openImageSection(e){this.sections.push([2,e])}openCardSection(e,t){const r=this._addCardTypeIndex(e,t);this.sections.push([10,r])}openPost(){this.atomTypes=[],this.cardTypes=[],this.markerTypes=[],this.sections=[],this.result={version:xl,atoms:this.atomTypes,cards:this.cardTypes,markups:this.markerTypes,sections:this.sections}}openMarkup(e,t){const r=this._findOrAddMarkerTypeIndex(e,t);this.markupMarkerIds.push(r)}_addCardTypeIndex(e,t){let r=[e,t];return this.cardTypes.push(r),this.cardTypes.length-1}_addAtomTypeIndex(e,t,r){let i=[e,t,r];return this.atomTypes.push(i),this.atomTypes.length-1}_findOrAddMarkerTypeIndex(e,t){this._markerTypeCache||(this._markerTypeCache={});const r=`${e}-${t.join("-")}`;let i=this._markerTypeCache[r];if(void 0===i){let n=[e];t.length&&n.push(t),this.markerTypes.push(n),i=this.markerTypes.length-1,this._markerTypeCache[r]=i}return i}}const Sl={render(e){let t=[];ll(kl,e,t);let r=new wl;return hl(r,t),r.result}},El="0.3.2",Cl={post(e,t){t.push(["openPost"]),ul(Cl,e.sections,t)},"markup-section"(e,t){t.push(["openMarkupSection",e.tagName,uc(e.attributes)]),ul(Cl,e.markers,t)},"list-section"(e,t){t.push(["openListSection",e.tagName,uc(e.attributes)]),ul(Cl,e.items,t)},"list-item"(e,t){t.push(["openListItem"]),ul(Cl,e.markers,t)},"image-section"(e,t){t.push(["openImageSection",e.src])},"card-section"(e,t){t.push(["openCardSection",e.name,e.payload])},marker(e,t){t.push(["openMarker",e.closedMarkups.length,e.value]),ul(Cl,e.openedMarkups,t)},markup(e,t){t.push(["openMarkup",e.tagName,uc(e.attributes)])},atom(e,t){t.push(["openAtom",e.closedMarkups.length,e.name,e.value,e.payload]),ul(Cl,e.openedMarkups,t)}};class Tl{openMarker(e,t){this.markupMarkerIds=[],this.markers.push([0,this.markupMarkerIds,e,t||""])}openAtom(e,t,r,i){const n=this._addAtomTypeIndex(t,r,i);this.markupMarkerIds=[],this.markers.push([1,this.markupMarkerIds,e,n])}openMarkupSection(e,t){this.markers=[],t&&0!==t.length?this.sections.push([1,e,this.markers,t]):this.sections.push([1,e,this.markers])}openListSection(e,t){this.items=[],t&&0!==t.length?this.sections.push([3,e,this.items,t]):this.sections.push([3,e,this.items])}openListItem(){this.markers=[],this.items.push(this.markers)}openImageSection(e){this.sections.push([2,e])}openCardSection(e,t){const r=this._addCardTypeIndex(e,t);this.sections.push([10,r])}openPost(){this.atomTypes=[],this.cardTypes=[],this.markerTypes=[],this.sections=[],this.result={version:El,atoms:this.atomTypes,cards:this.cardTypes,markups:this.markerTypes,sections:this.sections}}openMarkup(e,t){const r=this._findOrAddMarkerTypeIndex(e,t);this.markupMarkerIds.push(r)}_addCardTypeIndex(e,t){let r=[e,t];return this.cardTypes.push(r),this.cardTypes.length-1}_addAtomTypeIndex(e,t,r){let i=[e,t,r];return this.atomTypes.push(i),this.atomTypes.length-1}_findOrAddMarkerTypeIndex(e,t){this._markerTypeCache||(this._markerTypeCache={});const r=`${e}-${t.join("-")}`;let i=this._markerTypeCache[r];if(void 0===i){let n=[e];t.length&&n.push(t),this.markerTypes.push(n),i=this.markerTypes.length-1,this._markerTypeCache[r]=i}return i}}const Al={render(e){let t=[];ll(Cl,e,t);let r=new Tl;return hl(r,t),r.result}};var Rl={parse(e,t){switch(t.version){case pl:return new sl(e).parse(t);case bl:return new al(e).parse(t);case xl:return new cl(e).parse(t);case El:return new dl(e).parse(t);default:Oc(`Unknown version of mobiledoc parser requested: ${t.version}`,!1)}}};class Ol{constructor(e,t,r,i,n){this._rendered=null,this._teardownCallback=null,this._didRenderCallback=null,this.editor=e,this.card=t,this.section=r,this.element=i,this.options=n}render(e){if(this.mode===e)return;this.teardown(),this.mode=e;let t="display"===e?"render":"edit",r=this.card[t];Oc(`Card is missing "${t}" (tried to render mode: "${e}")`,!!r);let i=r({env:this.env,options:this.options,payload:this.section.payload})||null;this._validateAndAppendRenderResult(i)}teardown(){this._teardownCallback&&(this._teardownCallback(),this._teardownCallback=null),this._rendered&&(this.element.removeChild(this._rendered),this._rendered=null)}didRender(){this._didRenderCallback&&this._didRenderCallback()}get env(){return{name:this.card.name,isInEditor:!0,onTeardown:e=>this._teardownCallback=e,didRender:e=>this._didRenderCallback=e,edit:()=>this.edit(),save:(e,t=!0)=>{this.section.payload=e,this.editor._postDidChange(),t&&this.display()},cancel:()=>this.display(),remove:()=>this.remove(),postModel:this.section}}display(){this.render(td.DISPLAY)}edit(){this.render(td.EDIT)}remove(){this.editor.run((e=>e.removeSection(this.section)))}_validateAndAppendRenderResult(e){if(!e)return;let{card:{name:t}}=this;Oc(`Card "${t}" must render dom (render value was: "${e}")`,!!e.nodeType),this.element.appendChild(e),this._rendered=e,this.didRender()}}class Il{constructor(e,t,r,i,n){this._teardownCallback=null,this.editor=e,this.atom=t,this.model=r,this.atomOptions=n,this.element=i}render(){if(!this._rendered){let{atomOptions:e,env:t,model:{value:r,payload:i}}=this;this._rendered=this.atom.render({options:e,env:t,value:r,payload:i})||null}this._validateAndAppendRenderResult(this._rendered)}get env(){return{name:this.atom.name,onTeardown:e=>this._teardownCallback=e,save:(e,t={})=>{this.model.value=e,this.model.payload=t,this.editor._postDidChange(),this.teardown(),this.render()}}}teardown(){this._teardownCallback&&(this._teardownCallback(),this._teardownCallback=null),this._rendered&&(this.element.removeChild(this._rendered),this._rendered=null)}_validateAndAppendRenderResult(e){if(!e)return;let{atom:{name:t}}=this;Oc(`Atom "${t}" must return a DOM node (returned value was: "${e}")`,!!e.nodeType),this.element.appendChild(e)}}const Nl=" ",Ml=" ",Pl=" ",Ll="‌",Dl="-mobiledoc-kit__atom",$l="__has-no-content";function Hl(e,t){let r=e.createElement(t.tagName);return Object.keys(t.attributes).forEach((e=>{r.setAttribute(e,t.attributes[e])})),r}const Fl=`${Pl}${Nl}`,Bl=new RegExp(`${Pl}${Pl}`,"g"),jl=new RegExp("\t","g"),zl=function(e){return Ec(e,Pl)},Ul=function(e){return t=Pl,e.charAt(0)===t;var t};function Kl(e,t){e.eachAttribute(((e,r)=>{t.setAttribute(e,r)}))}function Wl(){return document.createElement("br")}function Vl(){return document.createTextNode(Ll)}function Gl(e,t){let r=e;for(let e=t.length-1;e>=0;e--){let i=t[e],n=Hl(document,i);n.appendChild(r),r=n}return r}function Zl(e,t,r=null){if(r){let i=function(e,t){for(;t&&e.parentNode!==t&&e.parentNode!==document.body;)e=e.parentNode;return e}(r.element,t);t.insertBefore(e,i.nextSibling)}else t.insertBefore(e,t.firstChild)}function ql(e){let t=e.element.parentNode,r=e.postNode.closedMarkups.length;for(;r--;)t=t.parentNode;return t}function Yl(e,t,r){let i=function(e){let t=e.value;return t=t.replace(Bl,Fl).replace(jl,Ml),e.isMarker&&zl(t)&&!e.next&&(t=t.substr(0,t.length-1)+Nl),e.isMarker&&Ul(t)&&(!e.prev||e.prev.isMarker&&zl(e.prev.value))&&(t=Nl+t.substr(1)),t}(e),n=document.createTextNode(i),o=Gl(n,e.openedMarkups);return Zl(o,t,r),{element:n,markupElement:o}}function Jl(e,t=null){const r=Lc(e.element);if(Nc("expected RenderNode to have a parent",e.parent),t){e.parent.element.replaceChild(r,t)}else{let t,i;if(e.prev){let r=Lc(e.prev.element);t=Lc(r.parentNode),i=r.nextSibling}else t=e.parent.element,i=t.firstChild;t.insertBefore(r,i)}}function Xl(e,t){Nc("expected RenderNode to have a parent",e.parent),Nc("expected parent RenderNode to have a PostNode",e.parent.postNode);const r=e.parent.postNode;Oc("expected PostNode to have sections",_d(r)),r.sections.remove(t)}function Ql(e){e.element&&e.element.parentNode&&e.element.parentNode.removeChild(e.element)}class eh{constructor(e,t,r,i,n,o){this.editor=e,this.cards=function(e=[]){return ac(e,(e=>{Oc(`Card "${e.name}" must define type "dom", has: "${e.type}"`,"dom"===e.type),Oc(`Card "${e.name}" must define \`render\` method`,!!e.render)})),e}(t),this.atoms=function(e=[]){return ac(e,(e=>{Oc(`Atom "${e.name}" must define type "dom", has: "${e.type}"`,"dom"===e.type),Oc(`Atom "${e.name}" must define \`render\` method`,!!e.render)})),e}(r),this.unknownCardHandler=i,this.unknownAtomHandler=n,this.options=o}_findCard(e){return oc(this.cards,(t=>t.name===e))||this._createUnknownCard(e)}_createUnknownCard(e){return Oc(`Unknown card "${e}" found, but no unknownCardHandler is defined`,!!this.unknownCardHandler),{name:e,type:"dom",render:this.unknownCardHandler,edit:this.unknownCardHandler}}_findAtom(e){return oc(this.atoms,(t=>t.name===e))||this._createUnknownAtom(e)}_createUnknownAtom(e){return Oc(`Unknown atom "${e}" found, but no unknownAtomHandler is defined`,!!this.unknownAtomHandler),{name:e,type:"dom",render:this.unknownAtomHandler}}post(e,t,r){e.element||(e.element=document.createElement("div"));let i=e.element;kc(i,"__mobiledoc-editor"),t.hasContent?function(e,t){e.classList.remove(t)}(i,$l):kc(i,$l),r(e,t.sections)}"markup-section"(e,t,r){const i=e.element;if(e.element=function(e){let t;return-1!==Yd.indexOf(e.tagName)?t=document.createElement(e.tagName):(t=document.createElement("div"),kc(t,e.tagName)),Kl(e,t),t}(t),e.cursorElement=null,Jl(e,i),t.isBlank){let t=Wl();e.element.appendChild(t),e.cursorElement=t}else{const i=!0;r(e,t.markers,i)}}"list-section"(e,t,r){const i=e.element;e.element=function(e){let t=document.createElement(e.tagName);return Kl(e,t),t}(t),Jl(e,i);r(e,t.items,!0)}"list-item"(e,t,r){if(e.element=document.createElement("li"),e.cursorElement=null,Jl(e,null),t.isBlank){let t=Wl();e.element.appendChild(t),e.cursorElement=t}else{const i=!0;r(e,t.markers,i)}}marker(e,t){let r;r=e.prev?ql(e.prev):e.parent.element;let{element:i,markupElement:n}=Yl(t,r,e.prev);e.element=i,e.markupElement=n}"image-section"(e,t){if(e.element)e.element.src!==t.src&&(e.element.src=t.src||"");else{let r=document.createElement("img");if(r.src=t.src||"",e.prev){let t=e.prev.element.nextSibling;t&&t.parentNode.insertBefore(r,t)}r.parentNode||e.parent.element.appendChild(r),e.element=r}}"card-section"(e,t){const r=e.element,{editor:i,options:n}=this,o=this._findCard(t.name);let{wrapper:s,cardElement:a}=function(){let e=document.createElement("div"),t=document.createElement("div");return t.contentEditable="false",kc(t,"__mobiledoc-card"),e.appendChild(Vl()),e.appendChild(t),e.appendChild(Vl()),{wrapper:e,cardElement:t}}();e.element=s,Jl(e,r);const c=new Ol(i,o,t,a,n);e.cardNode=c;c[t._initialMode]()}atom(e,t){let r;r=e.prev?ql(e.prev):e.parent.element;const{editor:i,options:n}=this,{wrapper:o,markupElement:s,atomElement:a,headTextNode:c,tailTextNode:d}=function(e,t,r){let i=document.createElement("span");i.contentEditable="false";let n=document.createElement("span");kc(n,Dl);let o=Vl(),s=Vl();n.appendChild(o),n.appendChild(i),n.appendChild(s);let a=Gl(n,e.openedMarkups);return Zl(a,t,r),{markupElement:a,wrapper:n,atomElement:i,headTextNode:o,tailTextNode:s}}(t,r,e.prev),l=this._findAtom(t.name);let h=e.atomNode;h?h.element=a:h=new Il(i,l,t,a,n),h.render(),e.atomNode=h,e.element=o,e.headTextNode=c,e.tailTextNode=d,e.markupElement=s}}let th={post(){Oc("post destruction is not supported by the renderer",!1)},"markup-section"(e,t){Xl(e,t),Ql(e)},"list-section"(e,t){Xl(e,t),Ql(e)},"list-item"(e,t){Xl(e,t),Ql(e)},marker(e,t){if(!e.isRendered)return;let{markupElement:r}=e;t.section&&t.section.markers.remove(t),r.parentNode&&r.parentNode.removeChild(r)},"image-section"(e,t){Xl(e,t),Ql(e)},"card-section"(e,t){e.cardNode&&e.cardNode.teardown(),Xl(e,t),Ql(e)},atom(e,t){e.atomNode&&e.atomNode.teardown(),th.marker(e,t)}};function rh(e,t=!1){let r,i,n=e.childNodes.head;for(;n;)r=n.next,(n.isRemoved||t)&&(rh(n,!0),i=n.postNode.type,Ic(`editor-dom cannot destroy "${i}"`,i,th),th[i](n,n.postNode),e.childNodes.remove(n)),n=r}class ih{constructor(e,t,r,i,n,o){this.renderTree=null,this.editor=e,this.visitor=new eh(e,t,r,i,n,o),this.nodes=[],this.hasRendered=!1}destroy(){if(!this.hasRendered)return;rh(Lc(this.renderTree).rootNode,!0)}visit(e,t,r,i=!1){let n;r.forEach((r=>{let o=function(e,t,r,i){if(r.renderNode)return r.renderNode;{const n=e.buildRenderNode(r);return t.childNodes.insertAfter(n,i),n}}(e,t,r,n);(o.isDirty||i)&&this.nodes.push(o),n=o}))}render(e){this.hasRendered=!0,this.renderTree=e;let t,r,i=e.rootNode;for(;i;)rh(i),r=i.postNode,t=r.type,Ic(`EditorDom visitor cannot handle type ${t}`,t,this.visitor),this.visitor[t](i,r,((...t)=>this.visit(e,...t))),i.markClean(),i=this.nodes.shift()}}const nh=["a","b","code","em","i","s","del","strong","sub","sup","u"].map(wc),oh=["href","rel"];class sh{constructor(e,t={}){this.type="markup",Oc(`Cannot create markup of tagName ${e}`,-1!==nh.indexOf(e)),this.tagName=wc(e),Oc("Must use attributes object param (not array) for Markup",!Array.isArray(t)),this.attributes=function(e,t=[]){let r={};return ac(cc(Object.keys(e),(e=>-1!==t.indexOf(e))),(t=>r[t]=e[t])),r}(t,oh)}isForwardInclusive(){return this.tagName!==wc("a")}isBackwardInclusive(){return!1}hasTag(e){return this.tagName===wc(e)}getAttribute(e){return this.attributes[e]}static isValidElement(e){const t=wc(e.tagName);return-1!==nh.indexOf(t)}}const ah=["style","head","title","meta"].map(wc),ch=/\s*\n\s*/g;class dh{constructor(e,t={}){this.builder=e,this.plugins=t.plugins||[]}parse(e){if(this._isSkippable(e))return[];this.sections=[],this.state={},this._updateStateFromElement(e);let t=!1;if(bc(e)||(t=this.runPlugins(e)),!t){ac(bc(e)?[e]:e.childNodes,(e=>{this.parseNode(e)}))}return this._closeCurrentSection(),this.sections}runPlugins(e){let t=!1,r={addSection:e=>{this.state.section&&Ld(this.state.section)&&!this.state.section.text&&!this.state.text?this.state.section=null:this._closeCurrentSection(),this.sections.push(e)},addMarkerable:e=>{let{state:t}=this,{section:r}=t;r||(t.text="",t.section=this.builder.createMarkupSection(wc("p")),r=t.section),Mc("Markerables can only be appended to markup sections and list item sections",0,r&&r.isMarkerable),t.text&&this._createMarker(),r.markers.append(e)},nodeFinished(){t=!0}};for(let i=0;i<this.plugins.length;i++){if((0,this.plugins[i])(e,this.builder,r),t)return!0}return!1}parseNode(e){if(this.state.section||this._updateStateFromElement(e),!this.runPlugins(e)){if(this.state.section&&yc(e)&&e.tagName){let t=wc(e.tagName),r=mc(zd,t),i=mc(Vd,t),n=mc(qd,t),o=r&&this.state.section.isListItem,s=this.sections[this.sections.length-1];if(i&&Qd(this.state.section)&&(this._closeCurrentSection(),this._updateStateFromElement(e.parentElement)),i&&s&&Wd(s)){let t=Pc(e.parentElement,"expected node to have parent element");wc(t.tagName)!==s.tagName&&(this._closeCurrentSection(),this._updateStateFromElement(t))}if(!i||this.state.section.isListItem||this.state.section.isListSection||s.isListSection||(this._closeCurrentSection(),this._updateStateFromElement(e.parentElement)),s&&Wd(s)&&this.state.section.isListItem&&r&&t!==s.tagName||r&&!o||n||i){if(this.state.section.isListItem&&"p"===t&&!e.nextSibling&&mc(Vd,wc(Pc(e.parentElement,"expected node to have parent element").tagName)))return void this.parseElementNode(e);Ld(this.state.section)&&!this.state.text&&0===this.state.section.markers.length?this.state.section=null:this._closeCurrentSection(),this._updateStateFromElement(e)}if(this.state.section&&this.state.section.isListSection)return this._closeCurrentSection(),void ac(e.childNodes,(e=>{this.parseNode(e)}))}switch(e.nodeType){case gc.TEXT:this.parseTextNode(e);break;case gc.ELEMENT:this.parseElementNode(e)}}}parseElementNode(e){let{state:t}=this;Oc("expected markups to be non-null",t.markups);const r=this._markupsFromElement(e);r.length&&t.text.length&&Ld(t.section)&&this._createMarker(),t.markups.push(...r),ac(e.childNodes,(e=>{this.parseNode(e)})),r.length&&t.text.length&&t.section.isMarkerable&&this._createMarker(),t.markups.splice(-r.length,r.length)}parseTextNode(e){let{state:t}=this;t.text+=e.textContent.replace(ch," ")}_updateStateFromElement(e){if(vc(e))return;let{state:t}=this;t.section=this._createSectionFromElement(e),t.markups=this._markupsFromElement(e),t.text=""}_closeCurrentSection(){let{sections:e,state:t}=this,r=e[e.length-1];if(t.section){if(t.text.length&&t.section.isMarkerable&&this._createMarker(),Zd(t.section)&&r&&Wd(r))mh(t.section),r.items.append(t.section);else{if(Ld(t.section)&&!t.section.text.trim()&&!sc(t.section.markers,(e=>e.isAtom)))return t.section=null,void(t.text="");r&&Wd(r)&&0===r.items.length&&e.pop(),e.push(t.section)}t.section=null,t.text=""}}_markupsFromElement(e){let{builder:t}=this,r=[];if(bc(e))return r;const i=wc(e.tagName);return this._isValidMarkupForElement(i,e)&&r.push(t.createMarkup(i,xc(e))),this._markupsFromElementStyle(e).forEach((e=>r.push(e))),r}_isValidMarkupForElement(e,t){return-1!==nh.indexOf(e)&&("b"!==e||"normal"!==t.style.fontWeight)}_markupsFromElementStyle(e){let{builder:t}=this,r=[],{fontStyle:i,fontWeight:n}=e.style;return"italic"===i&&r.push(t.createMarkup("em")),"bold"!==n&&"700"!==n||r.push(t.createMarkup("strong")),r}_createMarker(){let{state:e}=this,t=ph(e.text),r=this.builder.createMarker(t,e.markups);Mc("expected section to be markerable",e.section,Ld(e.section)),e.section.markers.append(r),e.text=""}_getSectionDetails(e){let t,r,i=!1;return bc(e)?(r=Jd,t=Dd,i=!0):(r=wc(e.tagName),"p"===r&&e.parentElement&&"blockquote"===wc(e.parentElement.tagName)&&(r="blockquote"),mc(zd,r)?t=$d:mc(Vd,r)?t=Hd:mc(qd,r)?t=Dd:(t=Dd,r=Jd,i=!0)),{sectionType:t,tagName:r,inferredTagName:i}}_createSectionFromElement(e){if(vc(e))return;let t,{builder:r}=this,{tagName:i,sectionType:n,inferredTagName:o}=this._getSectionDetails(e);switch(n){case $d:t=r.createListSection(i);break;case Hd:t=r.createListItem();break;case Dd:t=r.createMarkupSection(i),t._inferredTagName=o;break;default:Oc("Cannot parse section from element",!1)}return t}_isSkippable(e){return yc(e)&&mc(ah,wc(e.tagName))}}const lh=/^docs-internal-guid/,hh=new RegExp(Nl,"g"),uh=new RegExp(Ml,"g");function ph(e){let t=e;return t=t.replace(hh," "),t=t.replace(uh,"\t"),t}function mh(e){if(Ld(e)&&e.markers.length){let{head:t,tail:r}=e.markers;t.value=t.value.replace(/^\s+/,""),r.value=r.value.replace(/\s+$/,"")}}function fh(e){return yc(e)&&wc(e.tagName)===wc("b")&&lh.test(e.id)}const gh={b:"strong",i:"em"};function bh(e,t){let r=e;if(bc(r)||yc(r)&&r.classList.contains(Dl))t(r);else for(r=r.firstChild;r;)bh(r,t),r=r.nextSibling}class vh{constructor(e,t={}){this.builder=e,this.sectionParser=new dh(this.builder,t)}parse(e){const t=this.builder.createPost();let r=function(e){let t=oc(e.childNodes||[],fh);return t||e}(e);return this._eachChildNode(r,(e=>{let r=this.parseSections(e);this.appendSections(t,r)})),ac(t.sections,(e=>mh(e))),t}appendSections(e,t){ac(t,(t=>this.appendSection(e,t)))}appendSection(e,t){if(t.isBlank||Ld(t)&&""===t.text.replace(/^\s+/,"").replace(/\s+$/,"")&&!sc(t.markers,(e=>e.isAtom)))return;let r=e.sections.tail;r&&el(r)&&el(t)&&r.tagName===t.tagName?r.join(t):e.sections.append(t)}_eachChildNode(e,t){ac(bc(e)?[e]:e.childNodes,(e=>t(e)))}parseSections(e){return this.sectionParser.parse(e)}collectMarkups(e,t){let r=[],i=e.parentNode;for(;i&&i!==t;){let e=this.markupFromNode(i);e&&r.push(e),i=i.parentNode}return r}markupFromNode(e){if(yc(e)&&sh.isValidElement(e)){let t=function(e){let t=wc(e);return gh[t]||t}(e.tagName),r=xc(e);return this.builder.createMarkup(t,r)}}reparseSection(e,t){switch(e.type){case $d:return this.reparseListSection(e,t);case Hd:return this.reparseListItem(e,t);case Dd:return this.reparseMarkupSection(e,t);default:return}}reparseMarkupSection(e,t){return this._reparseSectionContainingMarkers(e,t)}reparseListItem(e,t){return this._reparseSectionContainingMarkers(e,t)}reparseListSection(e,t){e.items.forEach((e=>this.reparseListItem(e,t)))}_reparseSectionContainingMarkers(e,t){let r,i=e.renderNode.element,n=[];bh(i,(o=>{let s,a=t.getElementRenderNode(o);if(a){if("marker"===a.postNode.type){let e=ph(o.textContent||""),t=this.collectMarkups(o,i);e.length?(s=a.postNode,s.value=e,s.markups=t):a.scheduleForRemoval()}else if(od(a.postNode)){let{headTextNode:i,tailTextNode:o}=a;if(i.textContent!==Ll){let o=i.textContent.replace(new RegExp(Ll,"g"),"");if(i.textContent=Ll,r&&r.isMarker)r.value+=o,r.renderNode&&r.renderNode.markDirty();else{let r=a.postNode,i=r.markups.slice(),s=this.builder.createMarker(o,i);e.markers.insertBefore(s,r);let c=t.buildRenderNode(s);c.markDirty(),e.renderNode.markDirty(),n.push(c),e.renderNode.childNodes.insertBefore(c,a)}}if(o.textContent!==Ll){let r=o.textContent.replace(new RegExp(Ll,"g"),"");if(o.textContent=Ll,a.postNode.next&&a.postNode.next.isMarker){let e=a.postNode.next;if(e.renderNode){let t=e.renderNode.element.textContent;e.renderNode.element.textContent=r+t}else{let t=r+e.value;e.value=t}}else{let i=a.postNode,o=i.markups.slice(),s=this.builder.createMarker(r,o);e.markers.insertAfter(s,i);let c=t.buildRenderNode(s);n.push(c),c.markDirty(),e.renderNode.markDirty(),e.renderNode.childNodes.insertAfter(c,a)}}a&&(s=a.postNode)}}else if(bc(o)){let n=ph(o.textContent),c=this.collectMarkups(o,i);s=this.builder.createMarker(n,c),a=t.buildRenderNode(s),a.element=o,a.markClean(),e.renderNode.markDirty();let d=r&&r.renderNode;e.markers.insertAfter(s,r),e.renderNode.childNodes.insertAfter(a,d)}a&&n.push(a),r=s}));let o=e.renderNode.childNodes.head;for(;o;)-1===n.indexOf(o)&&o.scheduleForRemoval(),o=o.next}}class yh{constructor(e,t={}){Oc("Must pass builder to HTMLParser",e),this.builder=e,this.options=t}parse(e){let t=function(e){const t=document.createElement("div");return t.innerHTML=e,t}(e);return new vh(this.builder,this.options).parse(t)}}class _h extends Jc{constructor(e,t){super(),this.parent=null,this.isDirty=!0,this.isRemoved=!1,this.markupElement=null,this.headTextNode=null,this.tailTextNode=null,this.atomNode=null,this.cardNode=null,this._childNodes=null,this._element=null,this._cursorElement=null,this.postNode=e,this.renderTree=t}isAttached(){return Oc("Cannot check if a renderNode is attached without an element.",!!this.element),_c(Lc(Lc(this.renderTree).rootElement),this.element)}get childNodes(){return this._childNodes||(this._childNodes=new Id({adoptItem:e=>e.parent=this,freeItem:e=>e.destroy()})),this._childNodes}scheduleForRemoval(){this.isRemoved=!0,this.parent&&this.parent.markDirty()}markDirty(){this.isDirty=!0,this.parent&&this.parent.markDirty()}get isRendered(){return!!this.element}markClean(){this.isDirty=!1}get element(){return this._element}set element(e){const t=this._element;this._element=e,t&&this.renderTree.removeElementRenderNode(t),e&&this.renderTree.setElementRenderNode(e,this)}set cursorElement(e){this._cursorElement=e}get cursorElement(){return this._cursorElement||this.element}destroy(){this.element=null,this.parent=null,this.postNode=null,this.renderTree=null}reparsesMutationOfChildNode(e){return this.postNode.isCardSection?!_c(this.cardNode.element,e):!this.postNode.isAtom||!_c(this.atomNode.element,e)}}let xh=1;class kh{constructor(){this._map={}}set(e,t){let r=e._uuid;r||(e._uuid=r=""+xh++),this._map[r]=t}get(e){return e._uuid?this._map[e._uuid]:null}remove(e){!function(e){Oc("tried to fetch a value for an element not seen before",!!e._uuid)}(e),delete this._map[e._uuid]}}class wh{constructor(e){this._rootNode=this.buildRenderNode(e),this._elements=new kh}get rootNode(){return this._rootNode}get isDirty(){return this.rootNode&&this.rootNode.isDirty}get rootElement(){return this.rootNode.element}getElementRenderNode(e){return this._elements.get(e)}setElementRenderNode(e,t){this._elements.set(e,t)}removeElementRenderNode(e){this._elements.remove(e)}findRenderNodeFromElement(e,t=(()=>!0)){let r,i=e;for(;i;){if(r=this.getElementRenderNode(i),r&&t(r))return r;if(i=i.parentElement,i===this.rootElement)return t(this.rootNode)?this.rootNode:void 0}}buildRenderNode(e){const t=new _h(e,this);return e.renderNode=t,t}}const Sh=El,Eh={render(e,t=El){switch(t){case pl:return gl.render(e);case bl:return _l.render(e);case xl:return Sl.render(e);case void 0:case null:case El:return Al.render(e);default:Oc(`Unknown version of mobiledoc renderer requested: ${t}`,!1)}}};var Ch={hasDOM:()=>"undefined"!=typeof document};class Th{constructor(){this.type="post",this.sections=new Id({adoptItem:e=>e.post=e._parent=this,freeItem:e=>e.post=e._parent=null})}headPosition(){return this.isBlank?ud.blankPosition():this.sections.head.headPosition()}tailPosition(){return this.isBlank?ud.blankPosition():this.sections.tail.tailPosition()}toRange(){return this.headPosition().toRange(this.tailPosition())}get isBlank(){return this.sections.isEmpty}get hasContent(){return this.sections.length>1||1===this.sections.length&&!this.sections.head.isBlank}markersContainedByRange(e){const t=[];return this.walkMarkerableSections(e,(r=>{r._markersInRange(e.trimTo(r),((e,{isContained:r})=>{r&&t.push(e)}))})),t}markupsInRange(e){const t=new Rd;if(e.isCollapsed){let r=e.head;if(r.isMarkerable){let[e,i]=[r.markerIn(-1),r.markerIn(1)];e&&i&&e===i?e.markups.forEach((e=>t.add(e))):((e&&e.markups||[]).forEach((e=>{e.isForwardInclusive()&&t.add(e)})),(i&&i.markups||[]).forEach((e=>{e.isBackwardInclusive()&&t.add(e)})))}}else this.walkMarkerableSections(e,(r=>{ac(r.markupsInRange(e.trimTo(r)),(e=>t.add(e)))}));return t.toArray()}walkAllLeafSections(e){let t=this.headPosition().toRange(this.tailPosition());return this.walkLeafSections(t,e)}walkLeafSections(e,t){const{head:r,tail:i}=e;let n,o,s=0,a=r.section;for(;a&&(n=this._nextLeafSection(a),o=a===i.section,t(a,s),s++,!o);)a=n}walkMarkerableSections(e,t){this.walkLeafSections(e,(e=>{Ld(e)&&t(e)}))}_nextLeafSection(e){if(!e)return null;const t=e.next;return t?t.isLeafSection?t:Wd(t)?t.items.head:void Oc("Cannot determine next section from non-leaf-section",!1):ed(e)?this._nextLeafSection(e.parent):null}trimTo(e){const{builder:t}=this,r=t.createPost(),{head:i,tail:n}=e,o=0===n.offset&&i.section!==n.section;let s=r,a=null;return this.walkLeafSections(e,(i=>{let c;if(Ld(i)){if(Zd(i))a||(a=t.createListSection(i.parent.tagName),r.sections.append(a)),s=null,c=t.createListItem(),a.items.append(c);else{a=null,s=r;const e=o&&n.section===i?"p":i.tagName;c=t.createMarkupSection(e)}let d=e.trimTo(i);ac(i.markersFor(d.headSectionOffset,d.tailSectionOffset),(e=>c.markers.append(e)))}else c=o&&n.section===i?t.createMarkupSection("p"):function(e){if(!("clone"in e))throw new Error("Expected section to be cloneable");return e}(i).clone(),s=r;s&&s.sections.append(c)})),r}}class Ah extends Qc{constructor(){super("image-section"),this.src=null}clone(){return this.builder.createImageSection(this.src)}canJoin(){return!1}get length(){return 1}}function Rh(e,t){return`${wc(e)}-${uc(t).join("-")}`}class Oh{constructor(){this.markupCache={}}createPost(e=[]){const t=new Th;return t.builder=this,e.forEach((e=>t.sections.append(e))),t}createMarkerableSection(e,t,r=[]){switch(e){case Hd:return this.createListItem(r);case Dd:return this.createMarkupSection(t,r);default:Oc(`Cannot create markerable section of type ${e}`,!1)}}createMarkupSection(e=Jd,t=[],r=!1,i={}){e=wc(e);const n=new Xd(e,t,i);return r&&(n.isGenerated=!0),n.builder=this,n}createListSection(e=Ud,t=[],r={}){e=wc(e);const i=new Kd(e,t,r);return i.builder=this,i}createListItem(e=[]){const t=wc("li"),r=new Gd(t,e);return r.builder=this,r}createImageSection(e){let t=new Ah;return e&&(t.src=e),t.builder=this,t}createCardSection(e,t={}){const r=new id(e,t);return r.builder=this,r}createMarker(e,t=[]){const r=new Hc(e,t);return r.builder=this,r}createAtom(e,t="",r={},i=[]){const n=new nd(e,t,r,i);return n.builder=this,n}createMarkup(e,t={}){e=wc(e);let r=function(e,t,r){return e[Rh(t,r)]}(this.markupCache,e,t);return r||(r=new sh(e,t),r.builder=this,function(e,t){e[Rh(t.tagName,t.attributes)]=t}(this.markupCache,r)),r}}function Ih(e,t){const{range:r}=e,{head:i}=r,{section:n}=i;i.isTail()&&(n.isListItem||e.run((e=>{let{builder:r}=e,i=r.createListItem(),o=r.createListSection(t,[i]);e.replaceSection(n,o),e.setRange(o.headPosition())})))}const Nh=[{name:"ul",match:/^\* $/,run(e){Ih(e,"ul")}},{name:"ol",match:/^1\.? $/,run(e){Ih(e,"ol")}},{name:"heading",match:/^(#{1,6}) $/,run(e,t){!function(e,t){let{range:{head:r,head:{section:i}}}=e;r.isTail()&&e.run((e=>{let{builder:r}=e,n=r.createMarkupSection(t);e.replaceSection(i,n),e.setRange(n.headPosition())}))}(e,"h"+t[1].length)}}];var Mh={isMac:()=>"undefined"!=typeof window&&window.navigator&&/Mac/.test(window.navigator.platform),isWin:()=>"undefined"!=typeof window&&window.navigator&&/Win/.test(window.navigator.platform),isChrome:()=>"undefined"!=typeof window&&"chrome"in window};function Ph(e){let{post:t}=e;e.selectRange(t.toRange())}const Lh=[{str:"META+B",run(e){e.toggleMarkup("strong")}},{str:"CTRL+B",run(e){e.toggleMarkup("strong")}},{str:"META+I",run(e){e.toggleMarkup("em")}},{str:"CTRL+I",run(e){e.toggleMarkup("em")}},{str:"META+U",run(e){e.toggleMarkup("u")}},{str:"CTRL+U",run(e){e.toggleMarkup("u")}},{str:"CTRL+K",run:e=>Mh.isMac()?function(e){let{range:t}=e;if(t.isCollapsed){let{head:e,head:{section:r}}=t;t=e.toRange(r.tailPosition())}e.run((e=>{let r=e.deleteRange(t);e.setRange(r)}))}(e):Mh.isWin()?fd(e):void 0},{str:"CTRL+A",run(e){Mh.isMac()?function(e){let{range:t}=e,{tail:{section:r}}=t;e.run((e=>{e.setRange(r.headPosition())}))}(e):Ph(e)}},{str:"META+A",run(e){Mh.isMac()&&Ph(e)}},{str:"CTRL+E",run(e){Mh.isMac()&&function(e){let{range:t}=e,{tail:{section:r}}=t;e.run((e=>{e.setRange(r.tailPosition())}))}(e)}},{str:"META+K",run:e=>fd(e)},{str:"META+Z",run(e){e.run((e=>{e.undoLastChange()}))}},{str:"META+SHIFT+Z",run(e){e.run((e=>{e.redoLastChange()}))}},{str:"CTRL+Z",run(e){if(Mh.isMac())return!1;e.run((e=>e.undoLastChange()))}},{str:"CTRL+SHIFT+Z",run(e){if(Mh.isMac())return!1;e.run((e=>e.redoLastChange()))}}];function Dh(e){const t=e.toUpperCase(),r=Uc[t];return r||(Oc(`Only 1 character can be used in a key command str (got "${e}")`,1===e.length),t.charCodeAt(0))}function $h(e){if(function(e){return void 0===e.str}(e))return e;Oc("[deprecation] Key commands no longer use the `modifier` property",!e.modifier);let{str:t,run:r,name:i}=e,[n,...o]=t.split("+").reverse();return{name:i,run:r,modifierMask:(s=o,lc(s,((e,t)=>{let r=zc[t.toUpperCase()];return Oc(`No modifier named "${t}" found`,!!r),e+r}),0)),code:Dh(n)};var s}class Hh{constructor(e){this.editor=e,this.logger=e.loggerFor("mutation-handler"),this.renderTree=null,this._isObserving=!1,this._observer=new MutationObserver((e=>{this._handleMutations(e)}))}init(){this.startObserving()}destroy(){this.stopObserving(),this._observer=null}suspendObservation(e){this.stopObserving(),e(),this.startObserving()}stopObserving(){this._isObserving&&(this._isObserving=!1,this._observer.disconnect())}startObserving(){if(!this._isObserving){let{editor:e}=this;Oc("Cannot observe un-rendered editor",e.hasRendered),this._isObserving=!0,this.renderTree=e._renderTree,this._observer.observe(e.element,{characterData:!0,childList:!0,subtree:!0})}}reparsePost(){this.editor._reparsePost()}reparseSections(e){this.editor._reparseSections(e)}_handleMutations(e){let t=!1,r=new Rd;for(let i=0;i<e.length&&!t;i++){let n=this._findTargetNodes(e[i]);for(let e=0;e<n.length;e++){let i=n[e],o=this._findRenderNodeFromNode(i);if(!o){t=!0;break}if(o.reparsesMutationOfChildNode(i)){let e=this._findSectionFromRenderNode(o);e?r.add(e):t=!0}}}t?(this.logger.log(`reparsePost (${e.length} mutations)`),this.reparsePost()):r.length&&(this.logger.log(`reparse ${r.length} sections (${e.length} mutations)`),this.reparseSections(r.toArray()))}_findTargetNodes(e){let t=[];switch(e.type){case"characterData":t.push(e.target);break;case"childList":ac(e.addedNodes,(e=>t.push(e))),e.removedNodes.length&&t.push(e.target)}let r=this.editor.element;return cc(t,(e=>_c(r,e)))}_findSectionRenderNodeFromNode(e){return this.renderTree.findRenderNodeFromElement(e,(e=>e.postNode.isSection))}_findRenderNodeFromNode(e){return this.renderTree.findRenderNodeFromElement(e)}_findSectionFromRenderNode(e){let t=this._findSectionRenderNodeFromNode(e.element);return t&&t.postNode}}class Fh{constructor(e=0){this._maxLength=e,this._items=[]}get length(){return this._items.length}pop(){return this._items.pop()}push(e){this._items.push(e),this.length>this._maxLength&&this._items.shift()}clear(){this._items=[]}toArray(){return this._items}}function Bh(e,t){let r;return e.walkAllLeafSections(((e,i)=>{t===i&&(r=e)})),r}class jh{constructor(e,t,r=null){this.mobiledoc=t.serialize(),this.editor=t,this.editAction=r,this.takenAt=e,this.snapshotRange()}snapshotRange(){let{range:e,cursor:t}=this.editor;if(t.hasCursor()&&!e.isBlank){let{head:t,tail:r}=e;this.range={head:[t.leafSectionIndex,t.offset],tail:[r.leafSectionIndex,r.offset]}}}getRange(e){if(this.range){let{head:t,tail:r}=this.range,[i,n]=t,[o,s]=r,a=Bh(e,i),c=Bh(e,o),d=a.toPosition(n),l=c.toPosition(s);return d.toRange(l)}}groupsWith(e,t,r){return null!==t&&this.editAction===t&&this.takenAt+e>r}}class zh{constructor(e,t,r){this.editor=e,this._undoStack=new Fh(t),this._redoStack=new Fh(t),this._pendingSnapshot=null,this._groupingTimeout=r}snapshot(){this._pendingSnapshot&&this._pendingSnapshot.snapshotRange()}storeSnapshot(e=null){let t=Date.now(),r=this._pendingSnapshot;r&&(r.groupsWith(this._groupingTimeout,e,t)||this._undoStack.push(r),this._redoStack.clear()),this._pendingSnapshot=new jh(t,this.editor,e)}stepBackward(e){this._pendingSnapshot=null;let t=this._undoStack.pop();t&&(this._redoStack.push(new jh(Date.now(),this.editor)),this._restoreFromSnapshot(t,e))}stepForward(e){let t=this._redoStack.pop();t&&(this._undoStack.push(new jh(Date.now(),this.editor)),this._restoreFromSnapshot(t,e)),e.cancelSnapshot()}_restoreFromSnapshot(e,t){let{mobiledoc:r}=e,{editor:i}=this,{builder:n,post:o}=i,s=Rl.parse(n,r);t.removeAllSections(),t.migrateSectionsFromPost(s);let a=e.getRange(o);a&&t.setRange(a)}}const Uh=/^\* (.*)$/,Kh=/^\d\.? (.*)$/,Wh="\n",Vh=new RegExp("\r","g"),Gh=new RegExp("\r\n","g"),Zh=Wh;class qh{constructor(e,t){this.builder=e,this.options=t,this.post=this.builder.createPost(),this.prevSection=null}parse(e){return(e=function(e){return e.replace(Gh,Wh).replace(Vh,Wh)}(e)).split(Zh).forEach((e=>{let t=this._parseSection(e);this._appendSection(t)})),this.post}_parseSection(e){let t,r=Jd,i=Dd;Uh.test(e)?(r="ul",i=$d,e=e.match(Uh)[1]):Kh.test(e)&&(r="ol",i=$d,e=e.match(Kh)[1]);let n=[this.builder.createMarker(e)];switch(i){case $d:{let e=this.builder.createListItem(n);t=this.builder.createListSection(r,[e]);break}case Dd:t=this.builder.createMarkupSection(r,n);break;default:Oc(`Unknown type encountered ${i}`,!1)}return t}_appendSection(e){Wd(e)&&this.prevSection&&Wd(this.prevSection)&&this.prevSection.tagName===e.tagName?e.items.forEach((e=>{this.prevSection.items.append(e.clone())})):(this.post.sections.insertAfter(e,this.prevSection),this.prevSection=e)}}const Yh="text/plain",Jh="text/html",Xh="Text",Qh=new RegExp(/data-mobiledoc='(.*?)'>/);function eu(e,t,r){let i;if(Qh.test(e)){let r=e.match(Qh)[1],n=JSON.parse(r);i=Rl.parse(t,n)}else i=new yh(t,{plugins:r}).parse(e);return i}function tu(e,t,r){return new qh(t,{plugins:r}).parse(e)}function ru(e,{builder:t,_parserPlugins:r},{targetFormat:i}={targetFormat:"html"}){let{html:n,text:o}=function(e,t){let r="",i="",{clipboardData:n}=e;return n&&n.getData?(r=n.getData(Jh),i=n.getData(Yh)):t.clipboardData&&t.clipboardData.getData&&(r=t.clipboardData.getData(Xh)),{html:r,text:i}}(e,window);return"html"===i&&n&&n.length?eu(n,t,r):o&&o.length?tu(o,t,r):void 0}function iu(e,t,{logger:r}={}){let{builder:i,_parserPlugins:n}=t,{html:o,text:s}=function(e,t){let r="",i="";try{r=e.dataTransfer.getData(Jh),i=e.dataTransfer.getData(Yh)}catch(e){t&&t.log("Error getting drop data: ",e)}return{html:r,text:i}}(e,r);return o&&o.length?eu(o,i,n):s&&s.length?tu(s,i,n):void 0}class nu{constructor(e){this.editor=e,this._handlers=[]}register(e){Oc("Input Handler is not valid",this._validateHandler(e)),this._handlers.push(e)}unregister(e){let t=this._handlers;for(let r=0;r<t.length;r++)t[r].name===e&&t.splice(r,1)}handle(e){let{editor:t}=this;t.insertText(e);let r=this._findHandler();if(r){let[e,i]=r;e.run(t,i)}}handleNewLine(){let{editor:e}=this,t=this._findHandler("\n");if(t){let[r,i]=t;r.run(e,i)}}_findHandler(e=""){const{editor:t}=this,{range:r}=t,{head:i}=r,{section:n}=i;let o=n.textUntil(i)+e;for(let e=0;e<this._handlers.length;e++){let t=this._handlers[e];if("text"in t&&Ec(o,t.text))return[t,[t.text]];if("match"in t&&t.match.test(o))return[t,t.match.exec(o)]}}_validateHandler(e){return Cd('Registered input handlers require a "name" property so that they can be unregistered',!!e.name),!(!e.run||!e.text&&!e.match||e.text&&e.match)}destroy(){this._handlers=[]}}let ou;class su{constructor(){this.started=!1,this.listeners=[],this.selection={}}static getInstance(){return ou||(ou=new su),ou}static addListener(e){su.getInstance().addListener(e)}addListener(e){-1===this.listeners.indexOf(e)&&(this.listeners.push(e),this.start())}static removeListener(e){su.getInstance().removeListener(e)}removeListener(e){let t=this.listeners.indexOf(e);-1!==t&&(this.listeners.splice(t,1),0===this.listeners.length&&this.stop())}start(){this.started||(this.started=!0,this.poll())}stop(){this.started=!1,this.selection={}}notifyListeners(e,t){this.listeners.forEach((r=>{r.selectionDidChange(e,t)}))}destroy(){this.stop(),this.listeners=[]}getSelection(){let e=window.getSelection(),{anchorNode:t,focusNode:r,anchorOffset:i,focusOffset:n}=e;return{anchorNode:t,focusNode:r,anchorOffset:i,focusOffset:n}}poll(){this.started&&(this.update(),this.runNext((()=>this.poll())))}runNext(e){window.requestAnimationFrame(e)}update(){let e=this.selection,t=this.getSelection();this.selectionIsEqual(e,t)||(this.selection=t,this.notifyListeners(t,e))}selectionIsEqual(e,t){return e.anchorNode===t.anchorNode&&e.anchorOffset===t.anchorOffset&&e.focusNode===t.focusNode&&e.focusOffset===t.focusOffset}}class au{constructor(e,t){this.editor=e,this.callback=t,this.started=!1}start(){this.started||(su.addListener(this),this.started=!0)}stop(){this.started=!1,su.removeListener(this)}destroy(){this.stop()}selectionDidChange(e,t){this.started&&this.callback(e,t)}}const cu=["keydown","keyup","cut","copy","paste","keypress","drop","compositionstart","compositionend"];class du{constructor(e){this.editor=e,this.logger=e.loggerFor("event-manager"),this._textInputHandler=new nu(e),this._listeners=[],this.modifierKeys={shift:!1},this._selectionManager=new au(this.editor,this.selectionDidChange.bind(this)),this.started=!0,this._isComposingOnBlankLine=!1}init(){let{editor:{element:e}}=this;Oc("Cannot init EventManager without element",!!e),cu.forEach((t=>{this._addListener(e,t)})),this._selectionManager.start()}start(){this.started=!0}stop(){this.started=!1}registerInputHandler(e){this._textInputHandler.register(e)}unregisterInputHandler(e){this._textInputHandler.unregister(e)}unregisterAllTextInputHandlers(){this._textInputHandler.destroy(),this._textInputHandler=new nu(this.editor)}_addListener(e,t){Oc(`Missing listener for ${t}`,!!this[t]);let r=e=>this._handleEvent(t,e);e.addEventListener(t,r),this._listeners.push([e,t,r])}_removeListeners(){this._listeners.forEach((([e,t,r])=>{e.removeEventListener(t,r)})),this._listeners=[]}_trigger(e,t,r){ac(cc(this._listeners,(([r,i])=>r===e&&i===t)),(([e,,t])=>{t.call(e,r)}))}destroy(){this._textInputHandler.destroy(),this._selectionManager.destroy(),this._removeListeners()}_handleEvent(e,t){let{target:r}=t;return!this.started||(!this.isElementAddressable(r)||void this[e](t))}isElementAddressable(e){return this.editor.cursor.isAddressable(e)}selectionDidChange(e){let t=!0,{anchorNode:r}=e;this.isElementAddressable(r)||(t=!this.editor.range.isBlank),t&&this.editor._readRangeFromDOM()}keypress(e){let{editor:t,_textInputHandler:r}=this;if(!t.hasCursor())return;let i=Kc.fromEvent(e);if(i.isPrintable()){if(e.preventDefault(),!i.isEnter()&&13===i.keyCode)return r.handleNewLine(),void t.handleNewline(e);r.handle(i.toString())}}keydown(e){let{editor:t}=this;if(!t.hasCursor())return;if(!t.isEditable)return;let r=Kc.fromEvent(e);if(this._updateModifiersFromKey(r,{isDown:!0}),t.handleKeyCommand(e))return;t.post.isBlank&&t._insertEmptyMarkupSectionAtCursor();let i=t.range;switch(!0){case r.isIME():break;case r.isHorizontalArrowWithoutModifiersOtherThanShift():{let n;n=r.isShift()?i.extend(1*r.direction):i.move(r.direction),t.selectRange(n),e.preventDefault();break}case r.isDelete():{let{direction:i}=r,n=Qu.CHAR;(r.altKey&&Mh.isMac()||r.ctrlKey&&!Mh.isMac())&&(n=Qu.WORD),t.performDelete({direction:i,unit:n}),e.preventDefault();break}case r.isEnter():this._textInputHandler.handleNewLine(),t.handleNewline(e);break;case r.isTab():e.preventDefault(),this._textInputHandler.handle(r.toString())}}keyup(e){let{editor:t}=this;if(!t.hasCursor())return;let r=Kc.fromEvent(e);this._updateModifiersFromKey(r,{isDown:!1})}compositionstart(e){let{editor:t}=this;t.range.headMarker||(this._isComposingOnBlankLine=!0,t.post.isBlank&&t._insertEmptyMarkupSectionAtCursor(),Mh.isChrome()?(t.setPlaceholder(""),t._mutationHandler.stopObserving()):this._textInputHandler.handle(" "))}compositionend(e){const{editor:t}=this;if(this._isComposingOnBlankLine)if(this._isComposingOnBlankLine=!1,Mh.isChrome())t.insertText(e.data),t.setPlaceholder(t.placeholder),t._mutationHandler.startObserving();else{let r=t.range.headSection.toPosition(0),i=t.range.headSection.toPosition(e.data.length);t.run((e=>{e.deleteAtPosition(r,1,{unit:Qu.CHAR}),e.setRange(i)}))}}cut(e){e.preventDefault(),this.copy(e),this.editor.performDelete()}copy(e){e.preventDefault();let{editor:t,editor:{range:r,post:i}}=this;i=i.trimTo(r);let n={html:t.serializePost(i,Xu.HTML),text:t.serializePost(i,Xu.TEXT),mobiledoc:t.serializePost(i,Xu.MOBILEDOC)};t.runCallbacks("willCopy",[n]),function(e,{mobiledoc:t,html:r,text:i},n){t&&r&&(r=`<div data-mobiledoc='${JSON.stringify(t)}'>${r}</div>`);let{clipboardData:o}=e,{clipboardData:s}=n;o&&o.setData?(o.setData(Jh,r),o.setData(Yh,i)):s&&s.setData&&s.setData(Xh,r)}(e,n,window)}paste(e){e.preventDefault();let{editor:t}=this;t.range.isCollapsed||t.performDelete(),t.post.isBlank&&t._insertEmptyMarkupSectionAtCursor();let r=t.range.head,i=ru(e,t,{targetFormat:this.modifierKeys.shift?"text":"html"});t.runCallbacks("willPaste",[i]),t.run((e=>{let t=e.insertPost(r,i);e.setRange(t)}))}drop(e){e.preventDefault();let{clientX:t,clientY:r}=e,{editor:i}=this,n=i.positionAtPoint(t,r);if(!n)return void this.logger.log("Could not find drop position");let o=iu(e,i,{logger:this.logger});o?i.run((e=>{let t=e.insertPost(n,o);e.setRange(t)})):this.logger.log("Could not determine post from drop event")}_updateModifiersFromKey(e,{isDown:t}){e.isShiftKey()&&(this.modifierKeys.shift=t)}}class lu{constructor(e){this.editor=e;let t={range:qc.blankRange(),activeMarkups:[],activeSections:[],activeSectionTagNames:[],activeSectionAttributes:{}};this.prevState=this.state=t}updateRange(e){this.prevState=this.state,this.state=this._readState(e)}destroy(){this.editor=null,this.prevState=this.state=null}rangeDidChange(){const{state:e,prevState:t}=this,{range:r}=e,{range:i}=t;return!i.isEqual(r)}inputModeDidChange(){const e=this.state,t=this.prevState;return!pc(e.activeMarkups,t.activeMarkups)||!pc(e.activeSectionTagNames,t.activeSectionTagNames)||!pc(uc(e.activeSectionAttributes),uc(t.activeSectionAttributes))}get range(){return this.state.range}get activeSections(){return this.state.activeSections}get activeSectionAttributes(){return this.state.activeSectionAttributes}get activeMarkups(){return this.state.activeMarkups}toggleMarkupState(e){mc(this.activeMarkups,e)?this._removeActiveMarkup(e):this._addActiveMarkup(e)}_readState(e){let t={range:e,activeMarkups:this._readActiveMarkups(e),activeSections:this._readActiveSections(e)};return t.activeSectionTagNames=t.activeSections.map((e=>e.isNested?e.parent.tagName:e.tagName)),t.activeSectionAttributes=this._readSectionAttributes(t.activeSections),t}_readActiveSections(e){const{head:t,tail:r}=e,{editor:i}=this,{post:n}=i;return e.isBlank?[]:n.sections.readRange(t.section,r.section)}_readActiveMarkups(e){const{editor:t}=this,{post:r}=t;return r.markupsInRange(e)}_readSectionAttributes(e){return e.reduce(((e,t)=>{let r=ed(i=t)?i.parent.attributes||{}:i.attributes||{};var i;return Object.keys(r).forEach((t=>{let i=t.replace(/^data-md-/,""),n=r[t];e[i]=e[i]||[],mc(e[i],n)||e[i].push(n)})),e}),{})}_removeActiveMarkup(e){let t=this.state.activeMarkups.indexOf(e);this.state.activeMarkups.splice(t,1)}_addActiveMarkup(e){this.state.activeMarkups.push(e)}}const hu=" ",uu=" ";function pu(e,t){return e.createTextNode(function(e){return e.replace(/  /g," "+hu).replace(/\t/g,uu)}(t))}function mu(e){return e.toLowerCase()}var fu="dom",gu={name:"image",type:fu,render({payload:e,env:{dom:t}}){let r=t.createElement("img");return r.src=e.src,r}};const bu=["p","h1","h2","h3","h4","h5","h6","blockquote","pull-quote","aside"].map(mu),vu=["p","h1","h2","h3","h4","h5","h6","blockquote","aside"].map(mu),yu=["ul","ol"].map(mu),_u=["b","i","strong","em","a","u","sub","sup","s","code"].map(mu);function xu(e,t){return-1!==e.indexOf(t)}function ku(e,t){switch(e=mu(e),t){case 1:return xu(bu,e);case 3:return xu(yu,e);default:throw new Error(`Cannot validate tagName for unknown section type "${t}"`)}}function wu(e){return e=mu(e),xu(_u,e)}const Su=/.+:/i,Eu=["javascript","vbscript"];function Cu(e){let t=function(e){let t=e&&e.match(Su);return t&&t[0]&&t[0].split(":")[0]||""}(e).toLowerCase().replace(/ /g,"");return function(e,t){for(let r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}(Eu,t)?`unsafe:${e}`:e}function Tu(e){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];t[i.toLowerCase()]=n}return t}const Au=["data-md-text-align"];function Ru(e,t,r){if(i=t,-1===Au.indexOf(i))throw new Error(`Cannot use attribute: ${t}`);var i;e.setAttribute(t,r)}function Ou(e,t,r={}){let i;return!function(e){return e=mu(e),xu(vu,e)}(e)?(i=t.createElement("div"),i.setAttribute("class",e)):(i=t.createElement(e),Object.keys(r).forEach((e=>{Ru(i,e,r[e])}))),i}function Iu(e,t,r){let i=t.createElement(e);return Object.keys(r).forEach((t=>{let n=r[t];n=function(e,t,r){return"a"===e&&"href"===t?Cu(r):r}(e,t,n),i.setAttribute(t,n)})),i}const Nu="0.2.0";class Mu{constructor(e,t){let{cards:r,cardOptions:i,unknownCardHandler:n,markupElementRenderer:o,sectionElementRenderer:s,dom:a}=t,{version:c,sections:d}=e;!function(e){if(e!==Nu)throw new Error(`Unexpected Mobiledoc version "${e}"`)}(c);const[l,h]=d;this.dom=a,this.root=a.createDocumentFragment(),this.markerTypes=l,this.sections=h,this.cards=r,this.cardOptions=i,this.unknownCardHandler=n||this._defaultUnknownCardHandler,this.sectionElementRenderer={__default__:Ou},Object.keys(s).forEach((e=>{this.sectionElementRenderer[e.toLowerCase()]=s[e]})),this.markupElementRenderer={__default__:Iu},Object.keys(o).forEach((e=>{this.markupElementRenderer[e.toLowerCase()]=o[e]})),this._renderCallbacks=[],this._teardownCallbacks=[],this._renderedChildNodes=[]}get _defaultUnknownCardHandler(){return({env:{name:e}})=>{throw new Error(`Card "${e}" not found but no unknownCardHandler was registered`)}}render(){this.sections.forEach((e=>{let t=this.renderSection(e);t&&this.root.appendChild(t)}));for(let e=0;e<this._renderCallbacks.length;e++)this._renderCallbacks[e]();this._renderedChildNodes=[];let e=this.root.firstChild;for(;e;)this._renderedChildNodes.push(e),e=e.nextSibling;return{result:this.root,teardown:()=>this.teardown()}}teardown(){for(let e=0;e<this._teardownCallbacks.length;e++)this._teardownCallbacks[e]();for(let e=0;e<this._renderedChildNodes.length;e++){let t=this._renderedChildNodes[e];t.parentNode&&t.parentNode.removeChild(t)}}renderSection(e){const[t]=e;switch(t){case 1:return this.renderMarkupSection(e);case 2:return this.renderImageSection(e);case 3:return this.renderListSection(e);case 10:return this.renderCardSection(e);default:throw new Error(`Cannot render mobiledoc section of type "${t}"`)}}renderMarkersOnElement(e,t){let r=[e],i=e;for(let e=0,o=t.length;e<o;e++){let o=t[e],[s,a,c]=o;for(let e=0,t=s.length;e<t;e++){let t=this.markerTypes[s[e]],[o,c=[]]=t;wu(o)?(n=this.renderMarkupElement(o,c),i.appendChild(n),r.push(n),i=n):a--}i.appendChild(pu(this.dom,c));for(let e=0,t=a;e<t;e++)r.pop(),i=r[r.length-1]}var n}renderMarkupElement(e,t){return e=e.toLowerCase(),t=Tu(t),this.markupElementRendererFor(e)(e,this.dom,t)}markupElementRendererFor(e){return this.markupElementRenderer[e]||this.markupElementRenderer.__default__}renderListItem(e){const t=this.dom.createElement("li");return this.renderMarkersOnElement(t,e),t}renderListSection([e,t,r]){if(!ku(t,3))return;const i=this.dom.createElement(t);return r.forEach((e=>{i.appendChild(this.renderListItem(e))})),i}renderImageSection([e,t]){let r=this.dom.createElement("img");return r.src=t,r}findCard(e){for(let t=0;t<this.cards.length;t++)if(this.cards[t].name===e)return this.cards[t];return e===gu.name?gu:this._createUnknownCard(e)}_createUnknownCard(e){return{name:e,type:fu,render:this.unknownCardHandler}}_createCardArgument(e,t={}){return{env:{name:e.name,isInEditor:!1,dom:this.dom,didRender:e=>this._registerRenderCallback(e),onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,payload:t}}_registerRenderCallback(e){this._renderCallbacks.push(e)}_registerTeardownCallback(e){this._teardownCallbacks.push(e)}renderCardSection([e,t,r]){let i=this.findCard(t),n=this._createCardArgument(i,r),o=i.render(n);return this._validateCardRender(o,i.name),o}_validateCardRender(e,t){if(e&&"object"!=typeof e)throw new Error(`Card "${t}" must render ${fu}, but result was "${e}"`)}renderMarkupSection([e,t,r]){if(!ku(t=t.toLowerCase(),1))return;let i=this.sectionElementRendererFor(t)(t,this.dom);return this.renderMarkersOnElement(i,r),i}sectionElementRendererFor(e){return this.sectionElementRenderer[e]||this.sectionElementRenderer.__default__}}const Pu="0.3.0",Lu="0.3.1",Du="0.3.2";class $u{constructor(e,t){let{cards:r,cardOptions:i,atoms:n,unknownCardHandler:o,unknownAtomHandler:s,markupElementRenderer:a,sectionElementRenderer:c,dom:d}=t,{version:l,sections:h,atoms:u,cards:p,markups:m}=e;!function(e){switch(e){case Pu:case Lu:case Du:return;default:throw new Error(`Unexpected Mobiledoc version "${e}"`)}}(l),this.dom=d,this.root=this.dom.createDocumentFragment(),this.sections=h,this.atomTypes=u,this.cardTypes=p,this.markerTypes=m,this.cards=r,this.atoms=n,this.cardOptions=i,this.unknownCardHandler=o||this._defaultUnknownCardHandler,this.unknownAtomHandler=s||this._defaultUnknownAtomHandler,this.sectionElementRenderer={__default__:Ou},Object.keys(c).forEach((e=>{this.sectionElementRenderer[e.toLowerCase()]=c[e]})),this.markupElementRenderer={__default__:Iu},Object.keys(a).forEach((e=>{this.markupElementRenderer[e.toLowerCase()]=a[e]})),this._renderCallbacks=[],this._teardownCallbacks=[]}get _defaultUnknownCardHandler(){return({env:{name:e}})=>{throw new Error(`Card "${e}" not found but no unknownCardHandler was registered`)}}get _defaultUnknownAtomHandler(){return({env:{name:e}})=>{throw new Error(`Atom "${e}" not found but no unknownAtomHandler was registered`)}}render(){this.sections.forEach((e=>{let t=this.renderSection(e);t&&this.root.appendChild(t)}));for(let e=0;e<this._renderCallbacks.length;e++)this._renderCallbacks[e]();return this._renderedChildNodes=Array.prototype.slice.call(this.root.childNodes),{result:this.root,teardown:()=>this.teardown()}}teardown(){for(let e=0;e<this._teardownCallbacks.length;e++)this._teardownCallbacks[e]();for(let e=0;e<this._renderedChildNodes.length;e++){let t=this._renderedChildNodes[e];t.parentNode&&t.parentNode.removeChild(t)}}renderSection(e){const[t]=e;switch(t){case 1:return this.renderMarkupSection(e);case 2:return this.renderImageSection(e);case 3:return this.renderListSection(e);case 10:return this.renderCardSection(e);default:throw new Error(`Cannot render mobiledoc section of type "${t}"`)}}renderMarkersOnElement(e,t){let r=[e],i=e;for(let e=0,o=t.length;e<o;e++){let o=t[e],[s,a,c,d]=o;for(let e=0,t=a.length;e<t;e++){let t=this.markerTypes[a[e]],[o,s=[]]=t;wu(o)?(n=this.renderMarkupElement(o,s),i.appendChild(n),r.push(n),i=n):c--}switch(s){case 0:i.appendChild(pu(this.dom,d));break;case 1:i.appendChild(this._renderAtom(d));break;default:throw new Error(`Unknown markup type (${s})`)}for(let e=0,t=c;e<t;e++)r.pop(),i=r[r.length-1]}var n}renderMarkupElement(e,t){return e=e.toLowerCase(),t=Tu(t),this.markupElementRendererFor(e)(e,this.dom,t)}markupElementRendererFor(e){return this.markupElementRenderer[e]||this.markupElementRenderer.__default__}renderListItem(e){const t=this.dom.createElement("li");return this.renderMarkersOnElement(t,e),t}renderListSection([e,t,r]){if(!ku(t,3))return;const i=this.dom.createElement(t);return r.forEach((e=>{i.appendChild(this.renderListItem(e))})),i}renderImageSection([e,t]){let r=this.dom.createElement("img");return r.src=t,r}findCard(e){for(let t=0;t<this.cards.length;t++)if(this.cards[t].name===e)return this.cards[t];return e===gu.name?gu:this._createUnknownCard(e)}_findCardByIndex(e){let t=this.cardTypes[e];if(!t)throw new Error(`No card definition found at index ${e}`);let[r,i]=t;return{card:this.findCard(r),payload:i}}_createUnknownCard(e){return{name:e,type:fu,render:this.unknownCardHandler}}_createCardArgument(e,t={}){return{env:{name:e.name,isInEditor:!1,dom:this.dom,didRender:e=>this._registerRenderCallback(e),onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,payload:t}}_registerTeardownCallback(e){this._teardownCallbacks.push(e)}_registerRenderCallback(e){this._renderCallbacks.push(e)}renderCardSection([e,t]){let{card:r,payload:i}=this._findCardByIndex(t),n=this._createCardArgument(r,i),o=r.render(n);return this._validateCardRender(o,r.name),o}_validateCardRender(e,t){if(e&&"object"!=typeof e)throw new Error(`Card "${t}" must render ${fu}, but result was "${e}"`)}findAtom(e){for(let t=0;t<this.atoms.length;t++)if(this.atoms[t].name===e)return this.atoms[t];return this._createUnknownAtom(e)}_createUnknownAtom(e){return{name:e,type:fu,render:this.unknownAtomHandler}}_createAtomArgument(e,t,r){return{env:{name:e.name,isInEditor:!1,dom:this.dom,onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,value:t,payload:r}}_validateAtomRender(e,t){if(e&&"object"!=typeof e)throw new Error(`Atom "${t}" must render ${fu}, but result was "${e}"`)}_findAtomByIndex(e){let t=this.atomTypes[e];if(!t)throw new Error(`No atom definition found at index ${e}`);let[r,i,n]=t;return{atom:this.findAtom(r),value:i,payload:n}}_renderAtom(e){let{atom:t,value:r,payload:i}=this._findAtomByIndex(e),n=this._createAtomArgument(t,r,i),o=t.render(n);return this._validateAtomRender(o,t.name),o||pu(this.dom,"")}renderMarkupSection([e,t,r,i=[]]){if(!ku(t=t.toLowerCase(),1))return;let n=Tu(i),o=this.sectionElementRendererFor(t)(t,this.dom,n);return this.renderMarkersOnElement(o,r),o}sectionElementRendererFor(e){return this.sectionElementRenderer[e]||this.sectionElementRenderer.__default__}}class Hu{constructor({cards:e=[],atoms:t=[],cardOptions:r={},unknownCardHandler:i,unknownAtomHandler:n,markupElementRenderer:o={},sectionElementRenderer:s={},dom:a,markupSanitizer:c=null}={}){if(function(e){if(!Array.isArray(e))throw new Error("`cards` must be passed as an array");for(let t=0;t<e.length;t++){let r=e[t];if(r.type!==fu)throw new Error(`Card "${r.name}" must be of type "${fu}", was "${r.type}"`);if(!r.render)throw new Error(`Card "${r.name}" must define \`render\``)}}(e),function(e){if(!Array.isArray(e))throw new Error("`atoms` must be passed as an array");for(let t=0;t<e.length;t++){let r=e[t];if(r.type!==fu)throw new Error(`Atom "${r.name}" must be type "${fu}", was "${r.type}"`);if(!r.render)throw new Error(`Atom "${r.name}" must define \`render\``)}}(t),!a){if("undefined"==typeof window)throw new Error("A `dom` option must be provided to the renderer when running without window.document");a=window.document}this.options={cards:e,atoms:t,cardOptions:r,unknownCardHandler:i,unknownAtomHandler:n,markupElementRenderer:o,sectionElementRenderer:s,dom:a,markupSanitizer:c}}render(e){let{version:t}=e;switch(t){case Nu:case void 0:case null:return new Mu(e,this.options).render();case Pu:case Lu:case Du:return new $u(e,this.options).render();default:throw new Error(`Unexpected Mobiledoc version "${t}"`)}}}var Fu={name:"image-card",type:"text",render(){}},Bu="text";const ju="0.2.0";class zu{constructor(e,t){let{cards:r,cardOptions:i,atoms:n,unknownCardHandler:o}=t,{version:s,sections:a}=e;!function(e){if(e!==ju)throw new Error(`Unexpected Mobiledoc version "${e}"`)}(s);let[,c]=a;this.root=[],this.sections=c,this.cards=r,this.atoms=n,this.cardOptions=i,this.unknownCardHandler=o||this._defaultUnknownCardHandler,this._teardownCallbacks=[]}render(){return this.sections.forEach((e=>{this.root.push(this.renderSection(e))})),{result:this.root.join("\n"),teardown:()=>this.teardown()}}teardown(){for(let e=0;e<this._teardownCallbacks.length;e++)this._teardownCallbacks[e]()}get _defaultUnknownCardHandler(){return()=>{}}renderSection(e){const[t]=e;switch(t){case 1:return this.renderMarkupSection(e);case 2:return this.renderImageSection(e);case 3:return this.renderListSection(e);case 10:return this.renderCardSection(e);default:throw new Error("Unimplemented renderer for type "+t)}}renderImageSection(){return""}renderListSection([e,t,r]){return r.map((e=>this.renderListItem(e))).join("\n")}renderListItem(e){return this.renderMarkers(e)}findCard(e){for(let t=0;t<this.cards.length;t++)if(this.cards[t].name===e)return this.cards[t];return e===Fu.name?Fu:this._createUnknownCard(e)}_createUnknownCard(e){return{name:e,type:Bu,render:this.unknownCardHandler}}renderCardSection([e,t,r]){let i=this.findCard(t),n=this._createCardArgument(i,r),o=i.render(n);return this._validateCardRender(o,i.name),o||""}_validateCardRender(e,t){if(e&&"string"!=typeof e)throw new Error(`Card "${t}" must render ${Bu}, but result was ${typeof e}"`)}_registerTeardownCallback(e){this._teardownCallbacks.push(e)}_createCardArgument(e,t={}){return{env:{name:e.name,isInEditor:!1,onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,payload:t}}renderMarkupSection([e,t,r]){return this.renderMarkers(r)}renderMarkers(e){let t="";return e.forEach((e=>{let[,,r]=e;t+=r})),t}}const Uu="0.3.0",Ku="0.3.1",Wu="0.3.2";class Vu{constructor(e,t){let{cards:r,cardOptions:i,atoms:n,unknownCardHandler:o,unknownAtomHandler:s}=t,{version:a,sections:c,atoms:d,cards:l}=e;!function(e){if(e!==Uu&&e!==Ku&&e!==Wu)throw new Error(`Unexpected Mobiledoc version "${e}"`)}(a),this.root=[],this.sections=c,this.atomTypes=d,this.cardTypes=l,this.cards=r,this.atoms=n,this.cardOptions=i,this.unknownCardHandler=o||this._defaultUnknownCardHandler,this.unknownAtomHandler=s||this._defaultUnknownAtomHandler,this._teardownCallbacks=[]}render(){return this.sections.forEach((e=>{this.root.push(this.renderSection(e))})),{result:this.root.join("\n"),teardown:()=>this.teardown()}}teardown(){for(let e=0;e<this._teardownCallbacks.length;e++)this._teardownCallbacks[e]()}get _defaultUnknownCardHandler(){return()=>{}}get _defaultUnknownAtomHandler(){return({value:e})=>e||""}renderSection(e){const[t]=e;switch(t){case 1:return this.renderMarkupSection(e);case 2:return this.renderImageSection(e);case 3:return this.renderListSection(e);case 10:return this.renderCardSection(e);default:throw new Error("Unimplemented renderer for type "+t)}}renderImageSection(){return""}renderListSection([e,t,r]){return r.map((e=>this.renderListItem(e))).join("\n")}renderListItem(e){return this.renderMarkers(e)}findCard(e){for(let t=0;t<this.cards.length;t++)if(this.cards[t].name===e)return this.cards[t];return e===Fu.name?Fu:this._createUnknownCard(e)}_findCardByIndex(e){let t=this.cardTypes[e];if(!t)throw new Error(`No card definition found at index ${e}`);let[r,i]=t;return{card:this.findCard(r),payload:i}}_createUnknownCard(e){return{name:e,type:Bu,render:this.unknownCardHandler}}renderCardSection([e,t]){let{card:r,payload:i}=this._findCardByIndex(t),n=this._createCardArgument(r,i),o=r.render(n);return this._validateCardRender(o,r.name),o||""}_validateCardRender(e,t){if(e&&"string"!=typeof e)throw new Error(`Card "${t}" must render ${Bu}, but result was ${typeof e}"`)}_registerTeardownCallback(e){this._teardownCallbacks.push(e)}_createCardArgument(e,t={}){return{env:{name:e.name,isInEditor:!1,onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,payload:t}}renderMarkupSection([e,t,r]){return this.renderMarkers(r)}findAtom(e){for(let t=0;t<this.atoms.length;t++)if(this.atoms[t].name===e)return this.atoms[t];return this._createUnknownAtom(e)}_createUnknownAtom(e){return{name:e,type:Bu,render:this.unknownAtomHandler}}_createAtomArgument(e,t,r){return{env:{name:e.name,onTeardown:e=>this._registerTeardownCallback(e)},options:this.cardOptions,value:t,payload:r}}_validateAtomRender(e,t){if(e&&"string"!=typeof e)throw new Error(`Atom "${t}" must render ${Bu}, but result was ${typeof e}"`)}_findAtomByIndex(e){let t=this.atomTypes[e];if(!t)throw new Error(`No atom definition found at index ${e}`);let[r,i,n]=t;return{atom:this.findAtom(r),value:i,payload:n}}_renderAtom(e){let{atom:t,value:r,payload:i}=this._findAtomByIndex(e),n=this._createAtomArgument(t,r,i),o=t.render(n);return this._validateAtomRender(o,t.name),o||""}renderMarkers(e){let t="";return e.forEach((e=>{let[r,,,i]=e;switch(r){case 0:t+=i;break;case 1:t+=this._renderAtom(i);break;default:throw new Error(`Unknown markup type (${r})`)}})),t}}class Gu{constructor({cards:e,atoms:t,cardOptions:r,unknownCardHandler:i,unknownAtomHandler:n}={}){(function(e){if(!Array.isArray(e))throw new Error("`cards` must be passed as an array");for(let t=0;t<e.length;t++){let r=e[t];if(r.type!==Bu)throw new Error(`Card "${r.name}" must be type "${Bu}", was "${r.type}"`);if(!r.render)throw new Error(`Card "${r.name}" must define \`render\``)}})(e=e||[]),function(e){if(!Array.isArray(e))throw new Error("`atoms` must be passed as an array");for(let t=0;t<e.length;t++){let r=e[t];if(r.type!==Bu)throw new Error(`Atom "${r.name}" must be type "${Bu}", was "${r.type}"`);if(!r.render)throw new Error(`Atom "${r.name}" must define \`render\``)}}(t=t||[]),r=r||{},this.state={cards:e,atoms:t,cardOptions:r,unknownCardHandler:i,unknownAtomHandler:n}}render(e){let{version:t}=e;switch(t){case ju:return new zu(e,this.state).render();case void 0:case null:case Uu:case Ku:case Wu:return new Vu(e,this.state).render();default:throw new Error(`Unexpected Mobiledoc version "${t}"`)}}}class Zu{constructor(e,t){this.type=e,this.manager=t}isEnabled(){return this.manager.isEnabled(this.type)}log(...e){e.unshift(`[${this.type}]`),this.isEnabled()&&window.console.log(...e)}}class qu{constructor(){this.enabledTypes=[],this.allEnabled=!1}for(e){return new Zu(e,this)}enableAll(){this.allEnabled=!0}enableTypes(e){this.enabledTypes=this.enabledTypes.concat(e)}disable(){this.enabledTypes=[],this.allEnabled=!1}isEnabled(e){return this.allEnabled||-1!==this.enabledTypes.indexOf(e)}}const Yu={placeholder:"Write here...",spellcheck:!0,autofocus:!0,showLinkTooltips:!0,undoDepth:5,undoBlockTimeout:5e3,cards:[],atoms:[],cardOptions:{},unknownCardHandler:({env:e})=>{throw new Rc(`Unknown card encountered: ${e.name}`)},unknownAtomHandler:({env:e})=>{throw new Rc(`Unknown atom encountered: ${e.name}`)},mobiledoc:null,html:null,tooltipPlugin:vd},Ju={DID_UPDATE:"didUpdate",WILL_RENDER:"willRender",DID_RENDER:"didRender",WILL_DELETE:"willDelete",DID_DELETE:"didDelete",WILL_HANDLE_NEWLINE:"willHandleNewline",CURSOR_DID_CHANGE:"cursorDidChange",DID_REPARSE:"didReparse",POST_DID_CHANGE:"postDidChange",INPUT_MODE_DID_CHANGE:"inputModeDidChange",WILL_COPY:"willCopy",WILL_PASTE:"willPaste"};var Xu,Qu;!function(e){e.MOBILEDOC="mobiledoc",e.HTML="html",e.TEXT="text"}(Xu||(Xu={})),function(e){e.CHAR="char",e.WORD="word"}(Qu||(Qu={}));class ep{constructor(e={}){Oc("editor create accepts an options object. For legacy usage passing an element for the first argument, consider the `html` option for loading DOM or HTML posts. For other cases call `editor.render(domNode)` after editor creation",e&&!e.nodeType),this._views=[],this.isEditable=!0,this._parserPlugins=e.parserPlugins||[],function(e,t,r){Object.assign(e,t,r)}(this,Yu,e),this.cards.push(ol),Lh.forEach((e=>this.registerKeyCommand(e))),this._logManager=new qu,this._parser=new vh(this.builder);let{cards:t,atoms:r,unknownCardHandler:i,unknownAtomHandler:n,cardOptions:o}=this;this._renderer=new ih(this,t,r,i,n,o),this.post=this.loadPost(),this._renderTree=new wh(this.post),this._editHistory=new zh(this,this.undoDepth,this.undoBlockTimeout),this._eventManager=new du(this),this._mutationHandler=new Hh(this),this._editState=new lu(this),this._callbacks=new yd(fc(Ju)),this._beforeHooks={toggleMarkup:[]},this._isComposingOnBlankLine=!1,Nh.forEach((e=>this.onTextInput(e))),this.hasRendered=!1,this.isDestroyed=!1}enableLogging(e=[]){0===e.length?this._logManager.enableAll():this._logManager.enableTypes(e)}disableLogging(){this._logManager.disable()}loggerFor(e){return this._logManager.for(e)}get builder(){return this._builder||(this._builder=new Oh),this._builder}loadPost(){let{mobiledoc:e,html:t}=this;if(e)return Rl.parse(this.builder,e);if(t){if("string"==typeof t){let e={plugins:this._parserPlugins};return new yh(this.builder,e).parse(t)}{let e=t;return this._parser.parse(e)}}return this.builder.createPost([this.builder.createMarkupSection()])}rerender(){let e=this.post.renderNode;e.element||(Oc("Must call `render` before `rerender` can be called",this.hasRendered),e.element=this.element,e.markDirty()),this.runCallbacks(Ju.WILL_RENDER),this._mutationHandler.suspendObservation((()=>{this._renderer.render(this._renderTree)})),this.runCallbacks(Ju.DID_RENDER)}render(e){Oc("Cannot render an editor twice. Use `rerender` to update the rendering of an existing editor instance.",!this.hasRendered),e.spellcheck=this.spellcheck,function(e){for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),this.element=e,this.showLinkTooltips&&this._addTooltip(),this.run((()=>{})),this.hasRendered=!0,this.rerender(),this._mutationHandler.init(),this._eventManager.init(),!1===this.isEditable?this.disableEditing():this.enableEditing(),this.autofocus&&this.selectRange(this.post.headPosition())}_addTooltip(){this.addView(new bd({rootElement:this.element,showForTag:"a",editor:this}))}get keyCommands(){return this._keyCommands||(this._keyCommands=[]),this._keyCommands}registerKeyCommand(e){const t=$h(e);Oc("Key Command is not valid",function(e){return!!e.code&&!!e.run}(t)),this.keyCommands.unshift(t)}unregisterKeyCommands(e){for(let t=this.keyCommands.length-1;t>-1;t--){this.keyCommands[t].name===e&&this.keyCommands.splice(t,1)}}deleteAtPosition(e,t,{unit:r}){this.run((i=>{let n=i.deleteAtPosition(e,t,{unit:r});i.setRange(n)}))}deleteRange(e){this.run((t=>{let r=t.deleteRange(e);t.setRange(r)}))}performDelete({direction:e,unit:t}={direction:jc.BACKWARD,unit:Qu.CHAR}){const{range:r}=this;this.runCallbacks(Ju.WILL_DELETE,[r,e,t]),r.isCollapsed?this.deleteAtPosition(r.head,e,{unit:t}):this.deleteRange(r),this.runCallbacks(Ju.DID_DELETE,[r,e,t])}handleNewline(e){if(!this.hasCursor())return;e.preventDefault();let{range:t}=this;this.run((e=>{let r;if(!t.isCollapsed){if(r=e.deleteRange(t).section,r&&r.isBlank)return void e.setRange(r.headPosition())}let i=!1;const n={preventDefault(){i=!0}};this.runCallbacks(Ju.WILL_HANDLE_NEWLINE,[n]),i||(r=e.splitSection(t.head)[1],e.setRange(r.headPosition()))}))}_postDidChange(){this.runCallbacks(Ju.POST_DID_CHANGE)}selectRange(e){e=Td(e),this.cursor.selectRange(e),this.range=e}get cursor(){return new Ad(this)}get range(){return this._editState.range}set range(e){this._editState.updateRange(e),this._editState.rangeDidChange()&&this._rangeDidChange(),this._editState.inputModeDidChange()&&this._inputModeDidChange()}_readRangeFromDOM(){this.range=this.cursor.offsets}setPlaceholder(e){!function(e,t,r){if(!e.dataset){const i=t.replace(/[A-Z]/g,((e,t)=>{const r=e.toLowerCase();return 0===t?r:"-"+r}));return e.setAttribute(i,r)}e.dataset[t]=r}(this.element,"placeholder",e)}_reparsePost(){let e=this._parser.parse(this.element);this.run((t=>{t.removeAllSections(),t.migrateSectionsFromPost(e),t.setRange(qc.blankRange())})),this.runCallbacks(Ju.DID_REPARSE),this._postDidChange()}_reparseSections(e=[]){let t;e.forEach((e=>{this._parser.reparseSection(e,this._renderTree)})),this._removeDetachedSections(),this._renderTree.isDirty&&(t=this.range);const r=this._editHistory._pendingSnapshot,i=r.range;this.run((()=>{r.range=i})),this.rerender(),t&&this.selectRange(t),this.runCallbacks(Ju.DID_REPARSE),this._postDidChange()}_removeDetachedSections(){ac(cc(this.post.sections,(e=>!e.renderNode.isAttached())),(e=>e.renderNode.scheduleForRemoval()))}get activeSections(){return this._editState.activeSections}get activeSection(){const{activeSections:e}=this;return e[e.length-1]}get activeSectionAttributes(){return this._editState.activeSectionAttributes}detectMarkupInRange(e,t){return oc(this.post.markupsInRange(e),(e=>e.hasTag(t)))}get activeMarkups(){return this._editState.activeMarkups}hasActiveMarkup(e){let t;if("string"==typeof e){let r=wc(e);t=e=>e.tagName===r}else t=t=>t===e;return!!oc(this.activeMarkups,t)}serialize(e=Sh){return this.serializePost(this.post,Xu.MOBILEDOC,{version:e})}serializeTo(e){let t=this.post;return this.serializePost(t,e)}serializePost(e,t,r={}){if(Oc(`Unrecognized serialization format ${t}`,mc(Object.values(Xu),t)),t===Xu.MOBILEDOC){let t=r.version||Sh;return Eh.render(e,t)}{let i=this.serializePost(e,Xu.MOBILEDOC),n={unknownCardHandler:()=>{},unknownAtomHandler:()=>{}};switch(t){case Xu.HTML:if(Ch.hasDOM()){return`<div>${function(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}(new Hu(n).render(i).result)}</div>`}return this.serializePost(e,Xu.TEXT,r);case Xu.TEXT:return new Gu(n).render(i).result}}}addView(e){this._views.push(e)}removeAllViews(){this._views.forEach((e=>e.destroy())),this._views=[]}hasCursor(){return this.cursor.hasCursor()}destroy(){this.isDestroyed=!0,this._hasSelection()&&this.cursor.clearSelection(),this._hasFocus()&&this.element.blur(),this._mutationHandler.destroy(),this._eventManager.destroy(),this.removeAllViews(),this._renderer.destroy(),this._editState.destroy()}disableEditing(){this.isEditable=!1,this.hasRendered&&(this._eventManager.stop(),this.element.setAttribute("contentEditable","false"),this.setPlaceholder(""),this.selectRange(qc.blankRange()))}enableEditing(){this.isEditable=!0,this.hasRendered&&(this._eventManager.start(),this.element.setAttribute("contentEditable","true"),this.setPlaceholder(this.placeholder))}editCard(e){this._setCardMode(e,td.EDIT)}displayCard(e){this._setCardMode(e,td.DISPLAY)}run(e){const t=new nl(this);t.begin(),this._editHistory.snapshot();const r=e(t);return this.runCallbacks(Ju.DID_UPDATE,[t]),t.complete(),this._readRangeFromDOM(),t._shouldCancelSnapshot&&(this._editHistory._pendingSnapshot=null),this._editHistory.storeSnapshot(t.editActionTaken),r}didUpdatePost(e){this.addCallback(Ju.DID_UPDATE,e)}postDidChange(e){this.addCallback(Ju.POST_DID_CHANGE,e)}onTextInput(e){this._eventManager.registerInputHandler(e)}unregisterAllTextInputHandlers(){this._eventManager.unregisterAllTextInputHandlers()}unregisterTextInputHandler(e){this._eventManager.unregisterInputHandler(e)}inputModeDidChange(e){this.addCallback(Ju.INPUT_MODE_DID_CHANGE,e)}willRender(e){this.addCallback(Ju.WILL_RENDER,e)}didRender(e){this.addCallback(Ju.DID_RENDER,e)}willCopy(e){this.addCallback(Ju.WILL_COPY,e)}willPaste(e){this.addCallback(Ju.WILL_PASTE,e)}willDelete(e){this.addCallback(Ju.WILL_DELETE,e)}didDelete(e){this.addCallback(Ju.DID_DELETE,e)}willHandleNewline(e){this.addCallback(Ju.WILL_HANDLE_NEWLINE,e)}cursorDidChange(e){this.addCallback(Ju.CURSOR_DID_CHANGE,e)}_rangeDidChange(){this.hasRendered&&this.runCallbacks(Ju.CURSOR_DID_CHANGE)}_inputModeDidChange(){this.runCallbacks(Ju.INPUT_MODE_DID_CHANGE)}_insertEmptyMarkupSectionAtCursor(){this.run((e=>{const t=e.builder.createMarkupSection("p");e.insertSectionBefore(this.post.sections,t),e.setRange(t.toRange())}))}beforeToggleMarkup(e){this._beforeHooks.toggleMarkup.push(e)}toggleMarkup(e,t={}){const r=this.builder.createMarkup(e,t),{range:i}=this,n=!this.detectMarkupInRange(i,r.tagName);this._runBeforeHooks("toggleMarkup",{markup:r,range:i,willAdd:n})||(i.isCollapsed?(this._editState.toggleMarkupState(r),this._inputModeDidChange(),this._ensureFocus()):this.run((e=>e.toggleMarkup(r,i))))}_ensureFocus(){this._hasSelection()&&!this._hasFocus()&&this.focus()}focus(){this.element.focus()}_hasSelection(){const{cursor:e}=this;return this.hasRendered&&(e._hasCollapsedSelection()||e._hasSelection())}_hasFocus(){return document.activeElement===this.element}toggleSection(e){this.run((t=>t.toggleSection(e,this.range)))}setAttribute(e,t){this.run((r=>r.setAttribute(e,t,this.range)))}removeAttribute(e){this.run((t=>t.removeAttribute(e,this.range)))}handleKeyCommand(e){const t=function(e,t){const r=Kc.fromEvent(t);return cc(e,(({modifierMask:e,code:t})=>r.keyCode===t&&r.modifierMask===e))}(this.keyCommands,e);for(let r=0;r<t.length;r++){if(!1!==t[r].run(this))return e.preventDefault(),!0}return!1}insertText(e){if(!this.hasCursor())return;this.post.isBlank&&this._insertEmptyMarkupSectionAtCursor();let{activeMarkups:t,range:r,range:{head:i}}=this;this.run((n=>{r.isCollapsed||(i=n.deleteRange(r)),n.insertTextWithMarkup(i,e,t)}))}insertAtom(e,t="",r={}){if(!this.hasCursor())return;let i;this.post.isBlank&&this._insertEmptyMarkupSectionAtCursor();let{range:n}=this;return this.run((o=>{let s=n.head;i=o.builder.createAtom(e,t,r),n.isCollapsed||(s=o.deleteRange(n)),o.insertMarkers(s,[i])})),i}insertCard(e,t={},r=!1){if(!this.hasCursor())return;let i;this.post.isBlank&&this._insertEmptyMarkupSectionAtCursor();let{range:n}=this;return this.run((o=>{let s=n.tail;i=o.builder.createCardSection(e,t),r&&this.editCard(i),n.isCollapsed||(s=o.deleteRange(n));let a=s.section;if(ed(a)&&(a=a.parent),a.isBlank)o.replaceSection(a,i);else{let e=this.post.sections;o.insertSectionBefore(e,i,a.next)}o.setRange(i.tailPosition())})),i}positionAtPoint(e,t){return ud.atPoint(e,t,this)}_setCardMode(e,t){const r=e.renderNode;if(r&&r.isRendered){r.cardNode[t]()}else e.setInitialMode(t)}triggerEvent(e,t,r){this._eventManager._trigger(e,t,r)}addCallback(e,t){this._callbacks.addCallback(e,t)}addCallbackOnce(e,t){this._callbacks.addCallbackOnce(e,t)}runCallbacks(e,t){this.isDestroyed||this._callbacks.runCallbacks(e,t)}_runBeforeHooks(e,...t){let r=this._beforeHooks[e]||[];for(let e=0;e<r.length;e++)if(!1===r[e](...t))return!0}}function tp(e,t){let r=0;return e.walkAllLeafSections(((e,i)=>{t===e&&(r=i)})),r}function rp(e,t){let r;return e.walkAllLeafSections(((e,i)=>{t===i&&(r=e)})),r}function ip(e){let t,r=0;return e.walkAllLeafSections(((e,i)=>{t=e,r=i})),{section:t,index:r}}var np=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class op{constructor(){this.isUndoLocked=!1,this.isUndoing=!1,this.isRedoing=!1,this.undoSteps=[],this.redoSteps=[],this.callbacks=new Set}get isUndoingOrRedoing(){return this.isUndoing||this.isRedoing}get canUndo(){return this.undoSteps.length>0}get canRedo(){return this.redoSteps.length>0}applyStateSnapshot(e){for(const t of this.callbacks)t(vi(e))}onApplyState(e){return this.callbacks.add(e),()=>{this.callbacks.delete(e)}}getStateSnapshot(){throw new Error("getStateSnapshot not implemented")}setUndoStateSnapshot(e){this.isUndoLocked||(this.undoSteps.push(sp(e)),this.redoSteps=[])}undo(){if(this.canUndo){this.isUndoing=!0,this.redoSteps.push(sp(this.getStateSnapshot()));const e=this.undoSteps.pop();this.applyStateSnapshot(e),this.isUndoing=!1}}redo(){if(this.canRedo){this.isRedoing=!0,this.undoSteps.push(sp(this.getStateSnapshot()));const e=this.redoSteps.pop();this.applyStateSnapshot(e),this.isRedoing=!1}}preventUndoAsync(e){return np(this,void 0,void 0,(function*(){this.isUndoLocked=!0,yield e(),this.isUndoLocked=!1}))}preventUndo(e){this.isUndoLocked=!0,e(),this.isUndoLocked=!1}}function sp(e){const t=JSON.stringify(e);return JSON.parse(t)}oi(op,{undoSteps:Xt.shallow,redoSteps:Xt.shallow,canUndo:nr,canRedo:nr,undo:Jr,redo:Jr});class ap extends wn{constructor(e){super(),this.serviceProvider=e,this.undoManager=new op,this.isEnabled=!0,this.editorInFocus=!1,this.lastGeneratedText="",this.defaultText="",this.documentId=os(),this.stateSnapshotForInitialization=null,this.snapshotDebounce=750,this.lastSetSnapshotTime=0,this.nextChangeTriggersUndoSnapshot=!1,this.shouldIgnoreUpdate=!1,this.plainText="",this.paragraphs=[],this.updateCallbacks=new Set,this.shouldClearPseudoSelection=!1,this.undoManager.onApplyState((e=>{this.applyStateSnapshot(e)})),this.undoManager.getStateSnapshot=()=>this.getStateSnapshot()}get isUndoingOrRedoing(){return this.undoManager.isUndoingOrRedoing}get isUndoing(){return this.undoManager.isUndoing}get isRedoing(){return this.undoManager.isRedoing}get cursorService(){return this.serviceProvider.cursorService}get localStorageService(){return this.serviceProvider.localStorageService}get operationsService(){return this.serviceProvider.operationsService}get sentencesService(){return this.serviceProvider.sentencesService}initialize(e){const{element:t,defaultText:r,placeholder:i}=e;this.element=t,r&&(this.defaultText=r);const n=function(e,t=(()=>{})){return{mobiledoc:{version:"0.3.1",markups:[],atoms:["loading","choice","selection"],cards:[],sections:[[1,"p",[[0,[],0,e]]]]},spellcheck:!0,autofocus:!1,atoms:[{name:"loading",type:"dom",render:()=>{const e=document.createElement("span");return e.innerText="Loading...",e.className="loading-atom",e}},{name:"choice",type:"dom",render:e=>{const{value:t}=e,r=document.createElement("span");return r.innerText=t,r.className="choice-atom",r}},{name:"selection",type:"dom",render:e=>{const{value:t}=e,r=document.createElement("span");return r.innerText=t,r.className="selection-atom ",r}}],parserPlugins:[t]}}(this.defaultText);this.editor=new ep(Object.assign(Object.assign({},n),{placeholder:i})),function(){const e=window.getSelection.bind(window);window.getSelection=(t=!1)=>{const r=dp(),i=(r?r.getRootNode():document).getSelection();return!i||t?e():i}}(),this.editor.render(t),this.editor.run((e=>{const t=this.getEndOfCurrentSection();e.setRange(t.toRange())})),this.element.focus(),this.registerKeyCommands(),this.stateSnapshotForInitialization&&(this.stateSnapshotForInitialization.doc=function(e){e.atoms=[];for(const t of e.sections)t[2]=t[2].filter((e=>0===e[0]));e.markups=[];for(const t of e.sections)for(const e of t[2])e[1]=[],e[2]=0;return e}(this.stateSnapshotForInitialization.doc),this.applyStateSnapshot(this.stateSnapshotForInitialization)),this.setupUpdateHandler(),this.setupCursorChangeHandler(),this.sentencesService.initialize()}focus(){var e;null===(e=this.element)||void 0===e||e.focus()}getEditor(){return this.editor}initializeFromLocalStorage(e){this.stateSnapshotForInitialization=e}applyStateSnapshot(e){this.editor.run((t=>{this.editor.mobiledoc=e.doc;const r=this.editor.loadPost();t.removeAllSections(),t.migrateSectionsFromPost(r);const i=this.cursorService.makeMobiledocRangeFromSerialized(e.range);t.setRange(i)}))}updatePlainText(){return this.plainText=function(e){const t=[];for(const r of e.sections){let e="";if("p"===r[1])for(const t of r[2])0===t[0]&&(e+=t[3].split("\n").join(""));t.push(e)}return t.join("\n")}(this.getSerializedDoc()),this.paragraphs=this.plainText.split("\n"),this.plainText}getPlainText(){return this.plainText}getParagraphs(){return this.paragraphs}get isEmpty(){return 0===this.plainText.trim().length}get wordCount(){return this.plainText.split(" ").filter((e=>e.length>0)).length}get selectedWordCount(){return this.cursorService.isCursorSelection?this.cursorService.selectedText.split(" ").filter((e=>e.length>0)).length:this.sentencesService.isCursorWithinSentence?this.sentencesService.currentSentence.split(" ").filter((e=>e.length>0)).length:0}setupUpdateHandler(){this.setLastSnapshot(),this.updatePlainText(),this.editor.postDidChange((()=>{if(this.shouldIgnoreUpdate||!this.isEnabled)return;const e=this.updatePlainText(),t=!this.operationsService.isInOperation,r=this.undoManager.isUndoingOrRedoing,i=this.lastSnapshot.text!==e;if(this.triggerUpdateCallbacks(),t&&!r&&i){const e=Date.now();(e-this.lastSetSnapshotTime>this.snapshotDebounce||this.nextChangeTriggersUndoSnapshot)&&(this.undoManager.setUndoStateSnapshot(this.lastSnapshot),this.nextChangeTriggersUndoSnapshot=!1),setTimeout((()=>{this.setLastSnapshot(e)}),0)}}))}onUpdate(e){return this.updateCallbacks.add(e),()=>{this.updateCallbacks.delete(e)}}triggerUpdateCallbacks(){for(const e of this.updateCallbacks.values())e()}runWithoutUpdate(e){this.shouldIgnoreUpdate=!0,e(),this.shouldIgnoreUpdate=!1}setupCursorChangeHandler(){this.editor.cursorDidChange((()=>{this.editor.isEditable&&(this.shouldIgnoreUpdate||this.updateCursorState())})),this.updateCursorState()}setUndo(){this.setLastSnapshot(),this.undoManager.setUndoStateSnapshot(this.lastSnapshot)}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}setLastSnapshot(e=Date.now()){const t=this.getStateSnapshot();null!=this.lastSnapshot&&t.text===this.lastSnapshot.text||(this.lastSnapshot=t,this.lastSetSnapshotTime=e,this.localStorageService.setEditorStateSnapshot(t))}updateLastSnapshotRange(e){this.lastSnapshot.range=e}getStateSnapshot(){return{doc:this.getSerializedDoc(),text:this.getPlainText(),range:this.getSerializedRangeFromEditor()}}getSerializedDoc(){return this.editor.serializeTo("mobiledoc")}setStateFromSnapshot(e){this.applyStateSnapshot(e)}registerKeyCommands(){this.editor.registerKeyCommand({str:"META+Z",run:()=>{this.undoManager.undo(),this.setLastSnapshot()}}),this.editor.registerKeyCommand({str:"SHIFT+META+Z",run:()=>{this.undoManager.redo(),this.setLastSnapshot()}}),this.editor.registerKeyCommand({str:"META+B",run:()=>{}}),this.editor.registerKeyCommand({str:"META+I",run:()=>{}}),this.editor.registerKeyCommand({str:"META+U",run:()=>{}})}moveCursorToEnd(){const{section:e}=ip(this.editor.post),t=e.tailPosition(),r=t.toRange(t);this.editor.run((e=>{e.setRange(r)}))}disableEditor(){this.editor.disableEditing(),this.isEnabled=!1}enableEditor(){this.editor.enableEditing(),this.element.focus(),this.isEnabled=!0,this.updateCursorState()}selectAll(){this.selectRange(this.editor.post.toRange())}getStartOfDocument(){return rp(this.editor.post,0).headPosition()}getEndOfDocument(){const{section:e}=ip(this.editor.post);return e.tailPosition()}getEndOfCurrentSection(){const e=this.cursorService.getMobiledocRange(),t=null===e,r=e&&e.head.isBlank;if(t||r)return this.getEndOfDocument();if(null==e||null==e.head||null==e.tail){const{section:e}=ip(this.editor.post);return e.tailPosition()}return e.head.section.tailPosition()}getCurrentSection(){const e=this.cursorService.getMobiledocRange(),{section:t}=ip(this.editor.post);return null===e||null==e.head||null==e.tail?t:e.head.section===e.tail.section?e.tail.section:t}getTextForRange(e){const t=this.getPlainText().split("\n");if(null==e.head||null==e.tail)return"";const r=e.head.leafSectionIndex;if(r!==e.tail.leafSectionIndex)throw new Error("Need to implement multi-section range text");return t[r].substring(e.head.offset,e.tail.offset)}makeSerializedRangeFromMobileDoc(e){const{head:t,tail:r}=e;return{head:t?[t.leafSectionIndex,t.offset]:[0,0],tail:r?[r.leafSectionIndex,r.offset]:[0,0],direction:e.direction}}getSerializedRangeFromEditor(){let{range:e,cursor:t}=this.editor;if(null==e&&(e=qc.blankRange()),t.hasCursor()&&!e.isBlank)return this.makeSerializedRangeFromMobileDoc(e);const{section:r,index:i}=ip(this.editor.post),n=r.tailPosition();return{head:[i,n.offset],tail:[i,n.offset],direction:e.direction}}updateCursorState(){const e=this.editor.range;if(null==e)return;this.maybeClearPseudoSelection(e);const{isBlank:t}=e;if(t)return this.editorInFocus=!1,void this.maybeMakePseudoSelection();const r=this.makeSerializedRangeFromMobileDoc(e);this.runWithoutUpdate((()=>{this.cursorService.setSerializedRange(r),this.sentencesService.highlightCurrentSentence()})),this.cursorService.selectedText=window.getSelection().toString(),this.updateLastSnapshotRange(this.cursorService.getSerializedRange()),this.editorInFocus=!0}maybeMakePseudoSelection(){var e;const t=this.cursorService.getMobiledocRange();if(t&&!t.isBlank&&!t.isCollapsed){const r=document.activeElement;this.setPseudoSelection(t),null===(e=r.focus)||void 0===e||e.call(r),r.hasOwnProperty("select")&&r.select(),this.shouldClearPseudoSelection=!0}}maybeClearPseudoSelection(e){if(this.shouldClearPseudoSelection){const t=this.cursorService.getMobiledocRange();t&&(this.clearPseudoSelection(t,e),this.shouldClearPseudoSelection=!1)}}setPseudoSelection(e){this.editor.run((t=>{const r=this.editor.builder.createMarkup("em");t.addMarkupToRange(e,r);const i=ud.blankPosition(),n=ud.blankPosition(),o=new qc(i,n);t.setRange(o)}))}clearPseudoSelection(e,t){this.editor.run((r=>{const i=this.editor.builder.createMarkup("em");r.removeMarkupFromRange(e,i),r.setRange(t)}))}setCurrentSentenceHighlight(e){this.editor.run((t=>{const r=this.editor.builder.createMarkup("b");t.addMarkupToRange(e,r)}))}clearCurrentSentenceHighlight(){this.editor.run((e=>{const t=this.getStartOfDocument(),r=this.getEndOfDocument(),i=t.toRange(r),n=this.editor.builder.createMarkup("b");e.addMarkupToRange(i,n),e.toggleMarkup(n,i)}))}setCursorRange(e){this.editor.run((t=>{t.setRange(e)}))}selectRange(e){this.editor.selectRange(e),this.cursorService.setRangeFromMobiledoc(this.editor.range),this.cursorService.selectedText=window.getSelection().toString()}deleteDocument(){const e=this.editor.post.toRange();return this.deleteRange(e)}deleteRange(e){return this.editor.run((t=>t.deleteRange(e)))}insertGeneratedTextAtEndOfDoc(e){const{section:t}=ip(this.editor.post),r=""===t.text;let i=t.tailPosition();return this.editor.run((t=>{if(!r){const e=t.builder.createMarkupSection("p",[]);t.insertSectionAtEnd(e);const{section:r}=ip(this.editor.post);i=r.tailPosition()}return t.insertText(i,e)}))}insertGeneratedText(e,t){this.lastGeneratedText=e;const r=e.split("\n").filter((e=>e));for(let e=0;e<r.length;e++){const i=r[e];0===e||(t=this.insertSection()),t=this.insertText(i,t)}this.updatePlainText()}insertSection(){return this.editor.run((e=>{const t=this.editor.builder.createMarkupSection("p",[]);return e.insertSection(t),t.headPosition()}))}insertText(e,t){return this.editor.run((r=>r.insertText(t,e)))}insertSelectionAtom(e,t){const r=this.buildAtom("selection",t),i=this.insertAtom(r,e);return()=>this.deleteAtPosition(i)}insertLoadingAtom(e){const t=this.buildAtom("loading"),r=this.insertAtom(t,e);return()=>this.deleteAtPosition(r)}insertChoiceAtom(e,t){const r=this.buildAtom("choice",e),i=this.insertAtom(r,t);return()=>this.deleteAtPosition(i)}buildAtom(e,t,r){return this.editor.run((i=>i.builder.createAtom(e,t,r)))}insertAtom(e,t){return this.editor.run((r=>r.insertMarkers(t,[e])))}deleteAtPosition(e){return this.editor.run((t=>t.deleteAtPosition(e)))}getRange(){const e=this.cursorService.getMobiledocRange();return e||qc.blankRange()}run(e){this.enableEditor(),e(),this.disableEditor()}}const cp=["j","k","l","u","i","o","p","h","n","m"];function dp(e=document.activeElement){return(null==e?void 0:e.shadowRoot)?dp(e.shadowRoot.activeElement):e}oi(ap,{editorInFocus:Xt,isEmpty:nr,isEnabled:Xt,isUndoingOrRedoing:nr,lastGeneratedText:Xt,plainText:Xt,wordCount:nr,selectedWordCount:nr});const lp=E`.operation-button-row,
.operation-control-row {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.operation-control-row {
  padding: 3px 0;
}

.operation-row {
  padding: 6px 0 15px;
  display: flex;
  flex-direction: column;
}

.operation-hint {
  font-style: italic;
  margin-top: 40px;
  line-height: 1.8;
}

.wordcraft-global-controls {
  margin-top: 12px;
  padding: 10px 0;
}

.global-controls-line {
  margin-bottom: 12px;
  border-top: 1px solid var(--gray);
  flex: 1;
  height: 1px;
}
`;var hp=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let up=class extends sn{constructor(){super(...arguments),this.operationsService=bn.getService(La)}static get styles(){return[ln,lp]}firstUpdated(){this.operationsService.clearHoverTooltip()}disconnectedCallback(){super.disconnectedCallback(),this.operationsService.clearHoverTooltip()}render(){return oe`
      ${this.renderAvailableOperations()} ${this.renderOperationHint()}
    `}renderAvailableOperations(){const e=this.operationsService.availableOperations.map(((e,t)=>{const r=e.getButtonLabel(),i=new Ao(cp[t],!0);return oe`
          <div class="operation-row">
            <wordcraft-key-command
              message=${r}
              .keyCommand=${i}
              .action=${t=>{this.operationsService.triggerOperation(e,t)}}
              .onHover=${t=>{if(t){const t=e.getDescription();this.operationsService.setHoverTooltip(t)}else this.operationsService.clearHoverTooltip()}}
            ></wordcraft-key-command>
            ${this.renderOperationControls(e)}
          </div>
        `}));return oe`
      <div class="available-operations">${e}</div>
    `}renderOperationControls(e){return e.controls?oe`
      <wc-operation-controls
        .controls=${e.controls}
        .onEnter=${()=>{this.operationsService.triggerOperation(e,"CONTROL")}}
      ></wc-operation-controls>
    `:oe``}renderOperationHint(){return oe`
      <div class="operation-hint">${this.operationsService.hoverTooltip}</div>
    `}};up=hp([d("wordcraft-operations")],up);var pp=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let mp=class extends sn{static get styles(){return[ln,Ja]}constructor(){super(),this.keyboardService=bn.getService(Oo),this.starredResultsService=bn.getService(Ya),this.textEditorService=bn.getService(ap),this.keyboardServiceHelper=this.keyboardService.makeHelper("starred"),this.choices=new Bs(this.starredResultsService.starredResults)}connectedCallback(){this.keyboardServiceHelper.registerKeyHandler("ArrowDown",(()=>{this.choices.incrementIndex()})),this.keyboardServiceHelper.registerKeyHandler("ArrowDown",(()=>{this.choices.decrementIndex()})),super.connectedCallback()}disconnectedCallback(){this.keyboardServiceHelper.unregisterKeyHandlers(),super.disconnectedCallback()}removeResult(e){const t=this.choices.getEntry(e);t&&(this.choices.removeAtIndex(e),this.starredResultsService.unstar(t))}chooseResult(e){const t=this.choices.getEntry(e);if(t){const r=t.text;this.textEditorService.insertGeneratedTextAtEndOfDoc(r),this.removeResult(e)}}render(){return 0===this.choices.getNEntries()?oe`
        <div class="empty-choices">
          No results have been starred. You can save results for later use by
          pressing the
          <mwc-icon class="inline-icon">star_outline</mwc-icon> button.
        </div>
      `:oe` ${this.renderChoices()} `}renderChoices(){return this.choices.getEntries().map(((e,t)=>{const r=this.choices.getIndex()===t,i=Ge({choice:!0,selected:r}),n=kn((()=>{this.chooseResult(t)})),o=kn((()=>{this.removeResult(t)}));return oe`
        <div
          class=${i}
          @click=${(e=>kn((()=>{this.choices.setIndex(e)})))(t)}
          @dblclick=${n}
        >
          ${e.text} ${r?oe`
          <div class="choice-buttons">
            <mwc-fab
              class="add-remove"
              mini
              icon="delete"
              @click=${o}
              title="remove"
            ></mwc-fab>
            <mwc-fab
              class="choose"
              title="select"
              mini
              icon="add"
              @click=${n}
            >
            </mwc-fab>
          </div>
        `:""}
        </div>
      `}))}};mp=pp([d("wordcraft-starred-choices")],mp);var fp=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class gp extends wn{constructor(e){super(),this.serviceProvider=e,this.isResetting=!1,this.beforeUnload=()=>{}}get documentStoreService(){return this.serviceProvider.documentStoreService}initialize(e){const{appService:t,contextService:r,dialogService:i,documentStoreService:n,localStorageService:o,metaTextService:s,operationsService:a,routeService:c,textEditorService:d,starredResultsService:l}=this.serviceProvider;r.initialize(e),i.initialize(),c.initialize();const h=o.getState();if(null!==h.editor){d.initializeFromLocalStorage(h.editor),s.initializeFromLocalStorage(h),l.initializeFromLocalStorage(h.starred);const{documentId:e,lastAPIKey:r}=h;null!=e&&(n.setDocumentId(e),t.goToEditor()),r&&Bn(r)}this.beforeUnload=()=>{"EDITING"!==t.lifeCycleState||a.isInOperation||d.setLastSnapshot()},window.addEventListener("beforeunload",this.beforeUnload),t.isReady=!0}clearDocumentAndReload(){const{localStorageService:e}=this.serviceProvider;e.clearDocumentState(),window.removeEventListener("beforeunload",this.beforeUnload),window.location.reload()}reset(){return fp(this,arguments,void 0,(function*(e=!0){if(!this.isResetting){this.isResetting=!0;try{e&&(yield this.documentStoreService.saveDocument())}catch(e){console.error(e)}this.isResetting=!1,this.clearDocumentAndReload()}}))}}class bp extends wn{constructor(e){super(),this.serviceProvider=e}get configService(){return this.serviceProvider.configService}useModel(e){const t=new e(this.serviceProvider);this.model=t}getModel(){if(!this.model)throw new Error("No model registered!");return this.model}useDialogModel(e){const t=new e(this.serviceProvider);this.dialogModel=t}get hasDialogModel(){return null!=this.dialogModel}getDialogModel(){return this.dialogModel}}const vp=E`.sidebar-contents {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 10px 35px;
}

.no-padding {
  padding: 0;
}

.sidebar-bottom-links {
  margin-top: 20px;
}

.sidebar-bottom-links .link-button:not(:last-of-type) {
  margin-right: 5px;
}

.sidebar-contents .controls {
  text-transform: lowercase;
  user-select: none;
}

.sidebar-contents .button,
.sidebar-contents .arrow,
.sidebar-contents .controls-label,
.sidebar-contents .controls-value {
  display: inline-block;
}

.sidebar-contents .controls-value {
  width: 30px;
  text-align: center;
  font-weight: bold;
}

.sidebar-contents .button {
  background: var(--dark-gray);
  padding: 5px 9px;
  border-radius: 4px;
  color: var(--white);
  font-size: 12px;
  margin-left: 5px;
  letter-spacing: 0.5px;
}

.sidebar-contents .arrow {
  width: 20px;
  text-align: center;
  height: 20px;
  line-height: 20px;
}

.sidebar-contents .button,
.sidebar-contents .arrow {
  cursor: pointer;
}

.sidebar-contents .index-input {
  width: 40px;
  margin-right: 5px;
  margin-left: 5px;
  text-align: center;
}

.hidden {
  display: none;
}

.selected-text-prompt {
  font-style: italic;
  max-width: 270px;
}

.sidebar-bottom {
  position: fixed;
  bottom: 25px;
  left: 100vw - var(--sidebar-right-width) + 30px;
  background: rgba(255, 255, 255, 0.8);
}
`,yp=E`:host {
  height: 100%;
  display: flex;
  flex-direction: column;
}

mwc-tab-bar {
  --mdc-theme-primary: var(--blue);
  --mdc-typography-button-text-transform: none;
  flex: 0;
}

mwc-tab-bar.disabled {
  pointer-events: none;
}

.sidebar-contents {
  flex: 1;
}
`;var _p=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let xp=class extends sn{constructor(){super(...arguments),this.appService=bn.getService(En),this.documentStoreService=bn.getService(Tn),this.initializationService=bn.getService(gp),this.modelService=bn.getService(bp),this.operationsService=bn.getService(La),this.starredResultsService=bn.getService(Ya)}static get styles(){return[ln,vp,yp]}onTabActivated(e){const t=e.detail.index;this.appService.activeSidebarTabIndex=t}render(){const{activeSidebarTabIndex:e}=this.appService,t=Ge({"sidebar-contents":!0,"no-padding":1===e});return oe`
      ${this.renderTabBar()}
      <div class=${t}>${this.renderContents()}</div>
    `}renderTabBar(){const{activeSidebarTabIndex:e}=this.appService,{starredResults:t,shouldShowStarredTab:r}=this.starredResultsService,i=t.length,n=this.operationsService.isInOperation,o=Ge({disabled:n});return oe`
      <mwc-tab-bar
        class=${o}
        activeIndex=${e}
        @MDCTabBar:activated=${this.onTabActivated}
      >
        <mwc-tab icon="auto_awesome" label="Controls"></mwc-tab>
        ${(()=>{const{hasDialogModel:e}=this.modelService;return e?oe` <mwc-tab icon="question_answer" label="Chat"></mwc-tab>`:oe``})()} ${r?oe` <mwc-tab
        icon="star_rate"
        label="Starred (${i})"
      ></mwc-tab>`:oe``}
      </mwc-tab-bar>
    `}renderContents(){const e=this.appService.activeSidebarTabIndex;return 0===e?this.renderControls():1===e?oe`<wordcraft-chat></wordcraft-chat>`:2===e?oe`<wordcraft-starred-choices></wordcraft-starred-choices>`:oe``}renderControls(){const{top:e,bottom:t}=this.getTopAndBottomContents();return oe`
      <div class="sidebar-top">${e}</div>
      <div class="sidebar-bottom">${t}</div>
    `}getTopAndBottomContents(){let e=oe``,t=oe``;if(null!=this.operationsService.currentOperation)e=oe`<wordcraft-operation></wordcraft-operation>`,t=oe``;else if(this.operationsService.isError){e=oe`
        <wordcraft-error-message
          .onClose=${()=>{this.operationsService.isError=!1}}
          .getMessage=${()=>oe`
          ⚠️ Something went wrong...<br />
          The AI is probably busy, please try again later.
        `}
        ></wordcraft-error-message>
      `}else{e=oe`<wordcraft-operations></wordcraft-operations>`;const r=oe`
        ${this.renderMainMenuButton()} ${this.renderSaveButton()}
        <br />
      `;t=oe` <div class="sidebar-bottom-links">${r}</div> `}return{top:e,bottom:t}}renderSaveButton(){if(this.documentStoreService.isSaving)return this.renderLinkButton("saving...",(()=>{}),!0);return this.renderLinkButton("save story",(()=>{this.documentStoreService.saveDocument()}))}renderMainMenuButton(){return this.renderLinkButton("main menu",(()=>{this.initializationService.reset()}))}renderLinkButton(e,t,r=!1){const i=Ge({"link-button":!0,disabled:r});return oe`<div class=${i} @click=${t}>${e}</div>`}};xp=_p([d("wordcraft-sidebar-right")],xp);const kp=E`.__mobiledoc-editor.__has-no-content:before {
  content: attr(data-placeholder);
  position: absolute;
  color: var(--medium-gray);
  padding-left: 1px;
  cursor: text;
}

#editor-wrapper {
  display: flex;
  min-height: 100%;
}

#editor-wrapper.disabled {
  user-select: none;
}

#editor-disabled-overlay {
  z-index: 7;
  width: 100%;
  height: 100%;
  position: absolute;
  background-color: gray;
  opacity: 0.05;
  cursor: not-allowed;
}

#text-editor-wrapper {
  position: relative;
  width: 100%;
  min-height: 100%;
  flex: 4;
}

#text-editor {
  padding: 35px 50px;
  text-align: left;
  caret-color: #000;
  outline: none;
  border: none;
  resize: none;
}

#text-editor > p,
.visualization p {
  margin: 0 0 10px;
}

/** The style we'll use for retaining "selected" status */
#text-editor * em {
  font-style: normal;
  background-color: var(--text-selection);
  line-height: 2rem;
  clear: left;
  padding: 0.35rem 0;
}

/** The style we'll use for highlighting the current sentence */
#text-editor * b {
  font-style: normal;
  font-weight: 300;
  color: var(--dark_blue);
}

#text-editor::selection {
  background-color: var(--text-selection);
}

#editor-buffer {
  height: 300px;
  width: 100%;
}

.loading-atom {
  color: white;
  padding: 3px 12px;
  border-radius: 6px;
  background: var(--gradient);
  background-size: 400% 400%;
  animation: gradient 5s ease infinite;
}

.choice-atom {
  padding: 3px 0 3px 3px;
  border-radius: 6px;
  background-color: #d5ecff;
}

.choice-atom:after {
  content: 'press ⏎ to accept';
  display: inline;
  background: white;
  font-family: monospace;
  font-size: 11px;
  padding: 10px 13px 10px 13px;
  color: var(--dark-gray);
}

.selection-atom {
  color: var(--white);
  padding: 3px;
  border-radius: 6px;
  background: var(--gradient);
  background-size: 400% 400%;
  animation: gradient 5s ease infinite;
}

#word-counter {
  position: fixed;
  font-weight: 400;
  bottom: 20px;
  right: calc(var(--sidebar-right-width) + 30px);
  padding: 0 10px;
  font-family: var(--default-font-family);
  background: rgba(255, 255, 255, 0.9);
  border-radius: 5px;
  font-size: 14px;
  letter-spacing: 0.2px;
  color: var(--dark-gray);
}

.text-editor-font-styles {
  line-height: 2rem;
  font-size: 16px;
  font-family: var(--editor-font-family);
  font-weight: 300;
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}
`;var wp=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Sp=class extends sn{constructor(){super(...arguments),this.textEditorService=bn.getService(ap),this.showWordCount=!1,this.defaultText="",this.placeholder="",this.onInitialized=()=>{},this.onDisconnect=()=>{},this.onDisabledOverlayClick=()=>{}}static get styles(){return[kp]}firstUpdated(){const e={element:this.shadowRoot.getElementById("text-editor"),defaultText:this.defaultText,placeholder:this.placeholder};this.textEditorService.initialize(e),this.onInitialized()}disconnectedCallback(){this.onDisconnect()}render(){const e=!this.textEditorService.isEnabled,t=Ge({disabled:e});return oe`
      <div id="editor-wrapper" class=${t}>
        <div
          id="text-editor-wrapper"
          class="text-editor-font-styles"
          @click=${this.handleWrapperMouseClick}
        >
          ${e?this.renderEditorDisabled():""}
          <div id="text-editor"></div>
          <div id="editor-buffer"></div>
          ${this.renderWordCount()}
        </div>
      </div>
    `}renderWordCount(){return this.showWordCount?oe`
      <div id="word-counter">
        ${this.textEditorService.wordCount}
        ${1!==this.textEditorService.wordCount?"words":"word"}
      </div>
    `:""}handleWrapperMouseClick(e){const t=e.composedPath()[0];var r;t instanceof HTMLElement&&("text-editor-wrapper"===(r=t).id||"editor-buffer"===r.id)&&this.textEditorService.moveCursorToEnd()}renderEditorDisabled(){return oe`
      <div
        id="editor-disabled-overlay"
        @click=${()=>{this.onDisabledOverlayClick()}}
      ></div>
    `}};wp([u({type:Boolean})],Sp.prototype,"showWordCount",void 0),wp([u({type:String})],Sp.prototype,"defaultText",void 0),wp([u({type:String})],Sp.prototype,"placeholder",void 0),wp([u({type:Object})],Sp.prototype,"onInitialized",void 0),wp([u({type:Object})],Sp.prototype,"onDisconnect",void 0),wp([u({type:Object})],Sp.prototype,"onDisabledOverlayClick",void 0),Sp=wp([d("wordcraft-text-editor")],Sp);const Ep=E`.dialog-wrapper {
  padding: 0 10px;
}

.button,
.selection {
  display: inline-block;
}

.title {
  font-weight: 400;
  letter-spacing: 0.5px;
  font-size: 19px;
  margin-bottom: 25px;
}

.controls {
  position: absolute;
  right: 20px;
  top: 15px;
  transform: scale(0.75);
  cursor: pointer;
}

button.inline {
  margin: 0 5px;
  font-family: var(--default-font-family);
  margin-left: -10px;
  margin-right: -10px;
  transform: scale(0.8);
}

button.no-interaction {
  cursor: default;
}

button.no-interaction:hover {
  background-color: inherit;
  color: var(--blue);
}

mwc-icon.sparkle {
  position: relative;
  top: 5px;
  color: var(--blue);
}

.selection {
  background: var(--light-blue);
  background-position: -50%;
}

p {
  font-size: 14px;
  line-height: 2;
  margin-bottom: 23px;
}

p:last-of-type {
  text-align: right;
}

.get-started {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}
`;var Cp=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Tp=class extends sn{constructor(){super(...arguments),this.hasBeenWelcomed=!1,this.close=()=>{}}static get styles(){return[ln,Ep]}render(){const e=this.hasBeenWelcomed?"About Wordcraft":"Welcome to Wordcraft!";return oe`
      <div class="dialog-wrapper">
        <div class="controls">
          <mwc-icon @click=${()=>{this.close()}}>close</mwc-icon>
        </div>
        <div class="main">
          <div class="title">✨✍️${e}</div>
          <p>
            Wordcraft is a text editor that enables collaborative writing with a
            powerful language model, with a suite of built-in controls: from
            generating new content to rewriting text, even suggesting what to
            try next.
          </p>
          <p>
            These controls are in the right-hand sidebar. The controls change
            depending on where your cursor is, and whether you’ve selected any
            text. Try clicking
            <button class="inline no-interaction" type="button">
              generate text
            </button>
            to add text at the cursor position.
          </p>
          <p>
            Then, <span class="selection">select some text</span> and try out
            the new controls that appear. You can even ask the model for
            suggestions of what to try by clicking on the "get suggested"
            buttons.
          </p>
          <p>
            There's also a sidebar tab called "Chat", where you can have a
            conversation with the AI about your story to develop new ideas and
            get feedback.
          </p>
          <p>❤️ - Wordcraft</p>
        </div>
        ${this.renderGetStarted()}
      </div>
    `}renderGetStarted(){return this.hasBeenWelcomed?"":oe`
      <div class="get-started">
        <button type="button" @click=${()=>{this.close()}}>
          ✨✍️ Get Started
        </button>
      </div>
    `}};Cp([u({type:Boolean})],Tp.prototype,"hasBeenWelcomed",void 0),Cp([u({type:Object})],Tp.prototype,"close",void 0),Tp=Cp([d("wordcraft-welcome-dialog")],Tp);r(567),r(303);var Ap,Rp={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},Op={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},Ip={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150},Np=function(){function e(){this.rafIDs=new Map}return e.prototype.request=function(e,t){var r=this;this.cancel(e);var i=requestAnimationFrame((function(i){r.rafIDs.delete(e),t(i)}));this.rafIDs.set(e,i)},e.prototype.cancel=function(e){var t=this.rafIDs.get(e);t&&(cancelAnimationFrame(t),this.rafIDs.delete(e))},e.prototype.cancelAll=function(){var e=this;this.rafIDs.forEach((function(t,r){e.cancel(r)}))},e.prototype.getQueue=function(){var e=[];return this.rafIDs.forEach((function(t,r){e.push(r)})),e},e}();!function(e){e.POLL_SCROLL_POS="poll_scroll_position",e.POLL_LAYOUT_CHANGE="poll_layout_change"}(Ap||(Ap={}));var Mp=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.dialogOpen=!1,i.isFullscreen=!1,i.animationFrame=0,i.animationTimer=0,i.escapeKeyAction=Op.CLOSE_ACTION,i.scrimClickAction=Op.CLOSE_ACTION,i.autoStackButtons=!0,i.areButtonsStacked=!1,i.suppressDefaultPressSelector=Op.SUPPRESS_DEFAULT_PRESS_SELECTOR,i.animFrame=new Np,i.contentScrollHandler=function(){i.handleScrollEvent()},i.windowResizeHandler=function(){i.layout()},i.windowOrientationChangeHandler=function(){i.layout()},i}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Rp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Op},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ip},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){},registerContentEventHandler:function(){},deregisterContentEventHandler:function(){},isScrollableContentAtTop:function(){return!1},isScrollableContentAtBottom:function(){return!1},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(Rp.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(Rp.FULLSCREEN)},t.prototype.destroy=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)},t.prototype.open=function(e){var t=this;this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(Rp.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),e&&e.isAboveFullscreenDialog&&this.adapter.addClass(Rp.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame((function(){t.adapter.addClass(Rp.OPEN),t.adapter.addBodyClass(Rp.SCROLL_LOCK),t.layout(),t.animationTimer=setTimeout((function(){t.handleAnimationTimerEnd(),t.adapter.trapFocus(t.adapter.getInitialFocusEl()),t.adapter.notifyOpened()}),Ip.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(e),this.adapter.addClass(Rp.CLOSING),this.adapter.removeClass(Rp.OPEN),this.adapter.removeBodyClass(Rp.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd(),t.adapter.notifyClosed(e)}),Ip.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.showSurfaceScrim=function(){var e=this;this.adapter.addClass(Rp.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame((function(){e.adapter.addClass(Rp.SURFACE_SCRIM_SHOWN)}))},t.prototype.hideSurfaceScrim=function(){this.adapter.removeClass(Rp.SURFACE_SCRIM_SHOWN),this.adapter.addClass(Rp.SURFACE_SCRIM_HIDING)},t.prototype.handleSurfaceScrimTransitionEnd=function(){this.adapter.removeClass(Rp.SURFACE_SCRIM_HIDING),this.adapter.removeClass(Rp.SURFACE_SCRIM_SHOWING)},t.prototype.isOpen=function(){return this.dialogOpen},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction},t.prototype.setScrimClickAction=function(e){this.scrimClickAction=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.animFrame.request(Ap.POLL_LAYOUT_CHANGE,(function(){e.layoutInternal()}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,Op.SCRIM_SELECTOR)&&""!==this.scrimClickAction)this.close(this.scrimClickAction);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var r=e.composedPath?e.composedPath()[0]:e.target,i=!this.suppressDefaultPressSelector||!this.adapter.eventTargetMatches(r,this.suppressDefaultPressSelector);t&&i&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction&&this.close(this.escapeKeyAction)},t.prototype.handleScrollEvent=function(){var e=this;this.animFrame.request(Ap.POLL_SCROLL_POS,(function(){e.toggleScrollDividerHeader(),e.toggleScrollDividerFooter()}))},t.prototype.layoutInternal=function(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Rp.OPENING),this.adapter.removeClass(Rp.CLOSING)},t.prototype.runNextAnimationFrame=function(e){var t=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((function(){t.animationFrame=0,clearTimeout(t.animationTimer),t.animationTimer=setTimeout(e,0)}))},t.prototype.detectStackedButtons=function(){this.adapter.removeClass(Rp.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(Rp.STACKED),e!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=e)},t.prototype.toggleScrollableClasses=function(){this.adapter.removeClass(Rp.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(Rp.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))},t.prototype.toggleScrollDividerHeader=function(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(Rp.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(Rp.SCROLL_DIVIDER_HEADER):this.adapter.addClass(Rp.SCROLL_DIVIDER_HEADER)},t.prototype.toggleScrollDividerFooter=function(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(Rp.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(Rp.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(Rp.SCROLL_DIVIDER_FOOTER)},t}(Pe);const Pp=Mp;function Lp(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var r={get passive(){return t=!0,!1}},i=function(){};e.document.addEventListener("test",i,r),e.document.removeEventListener("test",i,r)}catch(e){t=!1}return t}(e)&&{passive:!0}}const Dp=document.$blockingElements;class $p extends Me{constructor(){super(...arguments),this.hideActions=!1,this.stacked=!1,this.heading="",this.scrimClickAction="close",this.escapeKeyAction="close",this.open=!1,this.defaultAction="close",this.actionAttribute="dialogAction",this.initialFocusAttribute="dialogInitialFocus",this.initialSupressDefaultPressSelector="",this.mdcFoundationClass=Pp,this.boundHandleClick=null,this.boundHandleKeydown=null,this.boundHandleDocumentKeydown=null}set suppressDefaultPressSelector(e){this.mdcFoundation?this.mdcFoundation.setSuppressDefaultPressSelector(e):this.initialSupressDefaultPressSelector=e}get suppressDefaultPressSelector(){return this.mdcFoundation?this.mdcFoundation.getSuppressDefaultPressSelector():this.initialSupressDefaultPressSelector}get primaryButton(){let e=this.primarySlot.assignedNodes();e=e.filter((e=>e instanceof HTMLElement));const t=e[0];return t||null}emitNotification(e,t){const r=new CustomEvent(e,{detail:t?{action:t}:{}});this.dispatchEvent(r)}getInitialFocusEl(){const e=`[${this.initialFocusAttribute}]`,t=this.querySelector(e);if(t)return t;const r=this.primarySlot.assignedNodes({flatten:!0}),i=this.searchNodeTreesForAttribute(r,this.initialFocusAttribute);if(i)return i;const n=this.secondarySlot.assignedNodes({flatten:!0}),o=this.searchNodeTreesForAttribute(n,this.initialFocusAttribute);if(o)return o;const s=this.contentSlot.assignedNodes({flatten:!0});return this.searchNodeTreesForAttribute(s,this.initialFocusAttribute)}searchNodeTreesForAttribute(e,t){for(const r of e)if(r instanceof HTMLElement){if(r.hasAttribute(t))return r;{const e=r.querySelector(`[${t}]`);if(e)return e}}return null}createAdapter(){return Object.assign(Object.assign({},Re(this.mdcRoot)),{addBodyClass:()=>document.body.style.overflow="hidden",removeBodyClass:()=>document.body.style.overflow="",areButtonsStacked:()=>this.stacked,clickDefaultButton:()=>{const e=this.primaryButton;e&&e.click()},eventTargetMatches:(e,t)=>!!e&&y(e,t),getActionFromEvent:e=>{if(!e.target)return"";const t=function(e,t){if(e.closest)return e.closest(t);for(var r=e;r;){if(y(r,t))return r;r=r.parentElement}return null}(e.target,`[${this.actionAttribute}]`);return t&&t.getAttribute(this.actionAttribute)},getInitialFocusEl:()=>this.getInitialFocusEl(),isContentScrollable:()=>{const e=this.contentElement;return!!e&&e.scrollHeight>e.offsetHeight},notifyClosed:e=>this.emitNotification("closed",e),notifyClosing:e=>{this.closingDueToDisconnect||(this.open=!1),this.emitNotification("closing",e)},notifyOpened:()=>this.emitNotification("opened"),notifyOpening:()=>{this.open=!0,this.emitNotification("opening")},reverseButtons:()=>{},releaseFocus:()=>{Dp.remove(this)},trapFocus:e=>{this.isConnected&&(Dp.push(this),e&&e.focus())},registerContentEventHandler:(e,t)=>{this.contentElement.addEventListener(e,t)},deregisterContentEventHandler:(e,t)=>{this.contentElement.removeEventListener(e,t)},isScrollableContentAtTop:()=>{const e=this.contentElement;return!!e&&0===e.scrollTop},isScrollableContentAtBottom:()=>{const e=this.contentElement;return!!e&&Math.ceil(e.scrollHeight-e.scrollTop)===e.clientHeight},registerWindowEventHandler:(e,t)=>{window.addEventListener(e,t,Lp())},deregisterWindowEventHandler:(e,t)=>{window.removeEventListener(e,t,Lp())}})}render(){const e={[Rp.STACKED]:this.stacked};let t=oe``;this.heading&&(t=this.renderHeading());const r={"mdc-dialog__actions":!this.hideActions};return oe`
    <div class="mdc-dialog ${Ge(e)}"
        role="alertdialog"
        aria-modal="true"
        aria-labelledby="title"
        aria-describedby="content">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface">
          ${t}
          <div id="content" class="mdc-dialog__content">
            <slot id="contentSlot"></slot>
          </div>
          <footer
              id="actions"
              class="${Ge(r)}">
            <span>
              <slot name="secondaryAction"></slot>
            </span>
            <span>
             <slot name="primaryAction"></slot>
            </span>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>`}renderHeading(){return oe`
      <h2 id="title" class="mdc-dialog__title">${this.heading}</h2>`}firstUpdated(){super.firstUpdated(),this.mdcFoundation.setAutoStackButtons(!0),this.initialSupressDefaultPressSelector?this.suppressDefaultPressSelector=this.initialSupressDefaultPressSelector:this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,"mwc-textarea","mwc-menu mwc-list-item","mwc-select mwc-list-item"].join(", "),this.boundHandleClick=this.mdcFoundation.handleClick.bind(this.mdcFoundation),this.boundHandleKeydown=this.mdcFoundation.handleKeydown.bind(this.mdcFoundation),this.boundHandleDocumentKeydown=this.mdcFoundation.handleDocumentKeydown.bind(this.mdcFoundation)}connectedCallback(){super.connectedCallback(),this.open&&this.mdcFoundation&&!this.mdcFoundation.isOpen()&&(this.setEventListeners(),this.mdcFoundation.open())}disconnectedCallback(){super.disconnectedCallback(),this.open&&this.mdcFoundation&&(this.removeEventListeners(),this.closingDueToDisconnect=!0,this.mdcFoundation.close(this.currentAction||this.defaultAction),this.closingDueToDisconnect=!1,this.currentAction=void 0,Dp.remove(this))}forceLayout(){this.mdcFoundation.layout()}focus(){const e=this.getInitialFocusEl();e&&e.focus()}blur(){if(!this.shadowRoot)return;const e=this.shadowRoot.activeElement;if(e)e instanceof HTMLElement&&e.blur();else{const e=this.getRootNode(),t=e instanceof Document?e.activeElement:null;t instanceof HTMLElement&&t.blur()}}setEventListeners(){this.boundHandleClick&&this.mdcRoot.addEventListener("click",this.boundHandleClick),this.boundHandleKeydown&&this.mdcRoot.addEventListener("keydown",this.boundHandleKeydown,Lp()),this.boundHandleDocumentKeydown&&document.addEventListener("keydown",this.boundHandleDocumentKeydown,Lp())}removeEventListeners(){this.boundHandleClick&&this.mdcRoot.removeEventListener("click",this.boundHandleClick),this.boundHandleKeydown&&this.mdcRoot.removeEventListener("keydown",this.boundHandleKeydown),this.boundHandleDocumentKeydown&&document.removeEventListener("keydown",this.boundHandleDocumentKeydown)}close(){this.open=!1}show(){this.open=!0}}s([g(".mdc-dialog")],$p.prototype,"mdcRoot",void 0),s([g('slot[name="primaryAction"]')],$p.prototype,"primarySlot",void 0),s([g('slot[name="secondaryAction"]')],$p.prototype,"secondarySlot",void 0),s([g("#contentSlot")],$p.prototype,"contentSlot",void 0),s([g(".mdc-dialog__content")],$p.prototype,"contentElement",void 0),s([g(".mdc-container")],$p.prototype,"conatinerElement",void 0),s([u({type:Boolean})],$p.prototype,"hideActions",void 0),s([u({type:Boolean}),eo((function(){this.forceLayout()}))],$p.prototype,"stacked",void 0),s([u({type:String})],$p.prototype,"heading",void 0),s([u({type:String}),eo((function(e){this.mdcFoundation.setScrimClickAction(e)}))],$p.prototype,"scrimClickAction",void 0),s([u({type:String}),eo((function(e){this.mdcFoundation.setEscapeKeyAction(e)}))],$p.prototype,"escapeKeyAction",void 0),s([u({type:Boolean,reflect:!0}),eo((function(e){this.mdcFoundation&&this.isConnected&&(e?(this.setEventListeners(),this.mdcFoundation.open()):(this.removeEventListeners(),this.mdcFoundation.close(this.currentAction||this.defaultAction),this.currentAction=void 0))}))],$p.prototype,"open",void 0),s([u()],$p.prototype,"defaultAction",void 0),s([u()],$p.prototype,"actionAttribute",void 0),s([u()],$p.prototype,"initialFocusAttribute",void 0);const Hp=E`.mdc-dialog .mdc-dialog__surface{background-color:#fff;background-color:var(--mdc-theme-surface, #fff)}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0,0,0,.32)}.mdc-dialog .mdc-dialog__surface-scrim{background-color:rgba(0,0,0,.32)}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87)}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6)}.mdc-dialog .mdc-dialog__close{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-dialog .mdc-dialog__close .mdc-icon-button__ripple::before,.mdc-dialog .mdc-dialog__close .mdc-icon-button__ripple::after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-dialog .mdc-dialog__close:hover .mdc-icon-button__ripple::before,.mdc-dialog .mdc-dialog__close.mdc-ripple-surface--hover .mdc-icon-button__ripple::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-dialog .mdc-dialog__close.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple::before,.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple::after{transition:opacity 150ms linear}.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-dialog .mdc-dialog__close.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions,.mdc-dialog.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:rgba(0,0,0,.12)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:1px solid rgba(0,0,0,.12);margin-bottom:0}.mdc-dialog.mdc-dialog-scroll-divider-header.mdc-dialog--fullscreen .mdc-dialog__header{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12)}.mdc-dialog .mdc-dialog__surface{border-radius:4px;border-radius:var(--mdc-shape-medium, 4px)}.mdc-dialog__surface{box-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0,0,0,.12)}.mdc-dialog__title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-headline6-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size, 1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height, 2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight, 500);letter-spacing:0.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing, 0.0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform, inherit)}.mdc-dialog__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-body1-font-size, 1rem);line-height:1.5rem;line-height:var(--mdc-typography-body1-line-height, 1.5rem);font-weight:400;font-weight:var(--mdc-typography-body1-font-weight, 400);letter-spacing:0.03125em;letter-spacing:var(--mdc-typography-body1-letter-spacing, 0.03125em);text-decoration:inherit;text-decoration:var(--mdc-typography-body1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body1-text-transform, inherit)}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:7;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(max-width: 600px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid transparent;display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid transparent}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid transparent}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1;z-index:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}#actions:not(.mdc-dialog__actions){display:none}.mdc-dialog__surface{box-shadow:var(--mdc-dialog-box-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}@media(min-width: 560px){.mdc-dialog .mdc-dialog__surface{max-width:560px;max-width:var(--mdc-dialog-max-width, 560px)}}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0, 0, 0, 0.32);background-color:var(--mdc-dialog-scrim-color, rgba(0, 0, 0, 0.32))}.mdc-dialog .mdc-dialog__title{color:rgba(0, 0, 0, 0.87);color:var(--mdc-dialog-heading-ink-color, rgba(0, 0, 0, 0.87))}.mdc-dialog .mdc-dialog__content{color:rgba(0, 0, 0, 0.6);color:var(--mdc-dialog-content-ink-color, rgba(0, 0, 0, 0.6))}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions{border-color:rgba(0, 0, 0, 0.12);border-color:var(--mdc-dialog-scroll-divider-color, rgba(0, 0, 0, 0.12))}.mdc-dialog .mdc-dialog__surface{min-width:280px;min-width:var(--mdc-dialog-min-width, 280px)}.mdc-dialog .mdc-dialog__surface{max-height:var(--mdc-dialog-max-height, calc(100% - 32px))}#actions ::slotted(*){margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] #actions ::slotted(*),#actions ::slotted(*[dir=rtl]){margin-left:0;margin-right:8px}[dir=rtl] #actions ::slotted(*),#actions ::slotted(*[dir=rtl]){text-align:left}.mdc-dialog--stacked #actions{flex-direction:column-reverse}.mdc-dialog--stacked #actions *:not(:last-child) ::slotted(*){flex-basis:.000000001px;margin-top:12px}`;let Fp=class extends $p{};Fp.styles=[Hp],Fp=s([d("mwc-dialog")],Fp);var Bp={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},jp={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},zp={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},Up=Bp.OPENING,Kp=Bp.OPEN,Wp=Bp.CLOSING,Vp=jp.REASON_ACTION,Gp=jp.REASON_DISMISS;const Zp=function(e){function t(r){var i=e.call(this,o(o({},t.defaultAdapter),r))||this;return i.opened=!1,i.animationFrame=0,i.animationTimer=0,i.autoDismissTimer=0,i.autoDismissTimeoutMs=zp.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,i.closeOnEscape=!0,i}return n(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Bp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return jp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return zp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(Up),this.adapter.removeClass(Kp),this.adapter.removeClass(Wp)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(Wp),this.adapter.addClass(Up),this.adapter.announce(),this.runNextAnimationFrame((function(){e.adapter.addClass(Kp),e.animationTimer=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd(),e.adapter.notifyOpened(),t!==zp.INDETERMINATE&&(e.autoDismissTimer=setTimeout((function(){e.close(Gp)}),t))}),zp.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(e),this.adapter.addClass(Bp.CLOSING),this.adapter.removeClass(Bp.OPEN),this.adapter.removeClass(Bp.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout((function(){t.handleAnimationTimerEnd(),t.adapter.notifyClosed(e)}),zp.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.opened},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},t.prototype.setTimeoutMs=function(e){var t=zp.MIN_AUTO_DISMISS_TIMEOUT_MS,r=zp.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(e===zp.INDETERMINATE||e<=r&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"–"+r+"\n        (or "+zp.INDETERMINATE+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(Gp)},t.prototype.handleActionButtonClick=function(e){this.close(Vp)},t.prototype.handleActionIconClick=function(e){this.close(Gp)},t.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Bp.OPENING),this.adapter.removeClass(Bp.CLOSING)},t.prototype.runNextAnimationFrame=function(e){var t=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((function(){t.animationFrame=0,clearTimeout(t.animationTimer),t.animationTimer=setTimeout(e,0)}))},t}(Pe),{I:qp}=ke,Yp=(e,t)=>{var r,i;const n=e._$AN;if(void 0===n)return!1;for(const e of n)null===(i=(r=e)._$AO)||void 0===i||i.call(r,t,!1),Yp(e,t);return!0},Jp=e=>{let t,r;do{if(void 0===(t=e._$AM))break;r=t._$AN,r.delete(e),e=t}while(0===(null==r?void 0:r.size))},Xp=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(void 0===r)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),tm(t)}};function Qp(e){void 0!==this._$AN?(Jp(this),this._$AM=e,Xp(this)):this._$AM=e}function em(e,t=!1,r=0){const i=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(i))for(let e=r;e<i.length;e++)Yp(i[e],!1),Jp(i[e]);else null!=i&&(Yp(i,!1),Jp(i));else Yp(this,e)}const tm=e=>{var t,r,i,n;e.type==Ke&&(null!==(t=(i=e)._$AP)&&void 0!==t||(i._$AP=em),null!==(r=(n=e)._$AQ)&&void 0!==r||(n._$AQ=Qp))};class rm extends Ve{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),Xp(this),this.isConnected=e._$AU}_$AO(e,t=!0){var r,i;e!==this.isConnected&&(this.isConnected=e,e?null===(r=this.reconnected)||void 0===r||r.call(this):null===(i=this.disconnected)||void 0===i||i.call(this)),t&&(Yp(this,e),Jp(this))}setValue(e){if((e=>void 0===e.strings)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const{ARIA_LIVE_DELAY_MS:im}=Zp.numbers;const nm=We(class extends rm{constructor(e){if(super(e),this.labelEl=null,this.timerId=null,this.previousPart=null,e.type!==Ke)throw new Error("AccessibleSnackbarLabel only supports child parts.")}update(e,[t,r]){var i;if(!r)return;if(null===this.labelEl){const r=document.createElement("div"),n=oe`<div class="mdc-snackbar__label" role="status" aria-live="polite"></div>`;Se(n,r);const o=r.firstElementChild;return o.textContent=t,null===(i=e.endNode)||void 0===i||i.parentNode.insertBefore(o,e.endNode),this.labelEl=o,o}const n=this.labelEl;n.setAttribute("aria-live","off"),n.textContent="";const o=document.createElement("span");return o.style.display="inline-block",o.style.width="0",o.style.height="1px",o.textContent=" ",n.appendChild(o),n.setAttribute("data-mdc-snackbar-label-text",t),null!==this.timerId&&clearTimeout(this.timerId),this.timerId=window.setTimeout((()=>{this.timerId=null,n.setAttribute("aria-live","polite"),n.removeAttribute("data-mdc-snackbar-label-text"),n.textContent=t,this.setValue(this.labelEl)}),im),n}render(e,t){return t?oe`
      <div class="mdc-snackbar__label" role="status" aria-live="polite">${e}</div>`:oe``}}),{OPENING_EVENT:om,OPENED_EVENT:sm,CLOSING_EVENT:am,CLOSED_EVENT:cm}=Zp.strings;class dm extends Me{constructor(){super(...arguments),this.mdcFoundationClass=Zp,this.open=!1,this.timeoutMs=5e3,this.closeOnEscape=!1,this.labelText="",this.stacked=!1,this.leading=!1,this.reason=""}render(){const e={"mdc-snackbar--stacked":this.stacked,"mdc-snackbar--leading":this.leading};return oe`
      <div class="mdc-snackbar ${Ge(e)}" @keydown="${this._handleKeydown}">
        <div class="mdc-snackbar__surface">
          ${nm(this.labelText,this.open)}
          <div class="mdc-snackbar__actions">
            <slot name="action" @click="${this._handleActionClick}"></slot>
            <slot name="dismiss" @click="${this._handleDismissClick}"></slot>
          </div>
        </div>
      </div>`}createAdapter(){return Object.assign(Object.assign({},Re(this.mdcRoot)),{announce:()=>{},notifyClosed:e=>{this.dispatchEvent(new CustomEvent(cm,{bubbles:!0,cancelable:!0,detail:{reason:e}}))},notifyClosing:e=>{this.open=!1,this.dispatchEvent(new CustomEvent(am,{bubbles:!0,cancelable:!0,detail:{reason:e}}))},notifyOpened:()=>{this.dispatchEvent(new CustomEvent(sm,{bubbles:!0,cancelable:!0}))},notifyOpening:()=>{this.open=!0,this.dispatchEvent(new CustomEvent(om,{bubbles:!0,cancelable:!0}))}})}show(){this.open=!0}close(e=""){this.reason=e,this.open=!1}firstUpdated(){super.firstUpdated(),this.open&&this.mdcFoundation.open()}_handleKeydown(e){this.mdcFoundation.handleKeyDown(e)}_handleActionClick(e){this.mdcFoundation.handleActionButtonClick(e)}_handleDismissClick(e){this.mdcFoundation.handleActionIconClick(e)}}s([g(".mdc-snackbar")],dm.prototype,"mdcRoot",void 0),s([g(".mdc-snackbar__label")],dm.prototype,"labelElement",void 0),s([u({type:Boolean,reflect:!0}),eo((function(e){this.mdcFoundation&&(e?this.mdcFoundation.open():(this.mdcFoundation.close(this.reason),this.reason=""))}))],dm.prototype,"open",void 0),s([eo((function(e){this.mdcFoundation.setTimeoutMs(e)})),u({type:Number})],dm.prototype,"timeoutMs",void 0),s([eo((function(e){this.mdcFoundation.setCloseOnEscape(e)})),u({type:Boolean})],dm.prototype,"closeOnEscape",void 0),s([u({type:String})],dm.prototype,"labelText",void 0),s([u({type:Boolean})],dm.prototype,"stacked",void 0),s([u({type:Boolean})],dm.prototype,"leading",void 0);const lm=E`.mdc-snackbar{z-index:8;margin:8px;display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar__surface{background-color:#333333}.mdc-snackbar__label{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mdc-snackbar__surface{min-width:100%}}.mdc-snackbar__surface{max-width:672px}.mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12)}.mdc-snackbar__surface{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar--leading{justify-content:flex-start}.mdc-snackbar--stacked .mdc-snackbar__label{padding-left:16px;padding-right:8px;padding-bottom:12px}[dir=rtl] .mdc-snackbar--stacked .mdc-snackbar__label,.mdc-snackbar--stacked .mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar--stacked .mdc-snackbar__surface{flex-direction:column;align-items:flex-start}.mdc-snackbar--stacked .mdc-snackbar__actions{align-self:flex-end;margin-bottom:8px}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto;transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1);transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-snackbar__label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-body2-font-size, 0.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:0.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, 0.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action:not(:disabled){color:#bb86fc}.mdc-snackbar__action .mdc-button__ripple::before,.mdc-snackbar__action .mdc-button__ripple::after{background-color:#bb86fc;background-color:var(--mdc-ripple-color, #bb86fc)}.mdc-snackbar__action:hover .mdc-button__ripple::before,.mdc-snackbar__action.mdc-ripple-surface--hover .mdc-button__ripple::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__action.mdc-ripple-upgraded--background-focused .mdc-button__ripple::before,.mdc-snackbar__action:not(.mdc-ripple-upgraded):focus .mdc-button__ripple::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__action:not(.mdc-ripple-upgraded) .mdc-button__ripple::after{transition:opacity 150ms linear}.mdc-snackbar__action:not(.mdc-ripple-upgraded):active .mdc-button__ripple::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss{color:rgba(255, 255, 255, 0.87)}.mdc-snackbar__dismiss .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss .mdc-icon-button__ripple::after{background-color:rgba(255, 255, 255, 0.87);background-color:var(--mdc-ripple-color, rgba(255, 255, 255, 0.87))}.mdc-snackbar__dismiss:hover .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss.mdc-ripple-surface--hover .mdc-icon-button__ripple::before{opacity:0.08;opacity:var(--mdc-ripple-hover-opacity, 0.08)}.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple::before,.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple::after{transition:opacity 150ms linear}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-snackbar__dismiss{width:36px;height:36px;padding:6px;font-size:18px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss .mdc-icon-button__focus-ring{display:none}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block;max-height:36px;max-width:36px}@media screen and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}}@media screen and (forced-colors: active)and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring::after,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring::after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}}@media screen and (forced-colors: active)and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring::after,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:36px;height:36px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{max-height:36px;max-width:36px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss .mdc-icon-button__touch{position:absolute;top:50%;height:36px;left:50%;width:36px;transform:translate(-50%, -50%)}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}slot[name=action]::slotted(mwc-button){--mdc-theme-primary: var( --mdc-snackbar-action-color, #bb86fc )}slot[name=dismiss]::slotted(mwc-icon-button){--mdc-icon-size: 18px;--mdc-icon-button-size: 36px;color:rgba(255, 255, 255, 0.87);margin-left:8px;margin-right:0}[dir=rtl] slot[name=dismiss]::slotted(mwc-icon-button),::slotted(mwc-icon-buttonslot[name=dismiss][dir=rtl]){margin-left:0;margin-right:8px}`;let hm=class extends dm{};hm.styles=[lm],hm=s([d("mwc-snackbar")],hm);const um=E`
  .mdc-snackbar {
    z-index: 8;
    margin: 8px;
    display: none;
    position: fixed;
    right: 0;
    bottom: 0;
    left: 0;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    pointer-events: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }

  .mdc-snackbar.is-warning > .mdc-snackbar__surface {
    background-color: #fdd;
    color: red;
  }

  .mdc-snackbar.is-warning * .mdc-snackbar__label {
    color: red;
  }

  .mdc-snackbar.is-warning * slot[name='dismiss']::slotted(mwc-icon-button) {
    color: red;
  }

  .mdc-snackbar__surface {
    background-color: #333333;
    min-width: 344px;
    max-width: 672px;
    box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),
      0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);
    border-radius: 4px;
    border-radius: var(--mdc-shape-small, 4px);
    padding-left: 0;
    padding-right: 8px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    box-sizing: border-box;
    transform: scale(0.8);
    opacity: 0;
  }

  .mdc-snackbar__label {
    color: rgba(255, 255, 255, 0.87);
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
    font-family: Roboto, sans-serif;
    font-family: var(
      --mdc-typography-body2-font-family,
      var(--mdc-typography-font-family, Roboto, sans-serif)
    );
    font-size: 0.875rem;
    font-size: var(--mdc-typography-body2-font-size, 0.875rem);
    line-height: 1.25rem;
    line-height: var(--mdc-typography-body2-line-height, 1.25rem);
    font-weight: 400;
    font-weight: var(--mdc-typography-body2-font-weight, 400);
    letter-spacing: 0.0178571429em;
    letter-spacing: var(--mdc-typography-body2-letter-spacing, 0.0178571429em);
    text-decoration: inherit;
    text-decoration: var(--mdc-typography-body2-text-decoration, inherit);
    text-transform: inherit;
    text-transform: var(--mdc-typography-body2-text-transform, inherit);
    padding-left: 16px;
    padding-right: 8px;
    width: 100%;
    flex-grow: 1;
    box-sizing: border-box;
    margin: 0;
    visibility: hidden;
    padding-top: 14px;
    padding-bottom: 14px;
  }

  @media (max-width: 480px), (max-width: 344px) {
    .mdc-snackbar__surface {
      min-width: 100%;
    }
  }

  .mdc-snackbar--opening,
  .mdc-snackbar--open,
  .mdc-snackbar--closing {
    display: flex;
  }
  .mdc-snackbar--open .mdc-snackbar__label,
  .mdc-snackbar--open .mdc-snackbar__actions {
    visibility: visible;
  }
  .mdc-snackbar--leading {
    justify-content: flex-start;
  }
  .mdc-snackbar--stacked .mdc-snackbar__label {
    padding-left: 16px;
    padding-right: 8px;
    padding-bottom: 12px;
  }
  [dir='rtl'] .mdc-snackbar--stacked .mdc-snackbar__label,
  .mdc-snackbar--stacked .mdc-snackbar__label[dir='rtl'] {
    padding-left: 8px;
    padding-right: 16px;
  }
  .mdc-snackbar--stacked .mdc-snackbar__surface {
    flex-direction: column;
    align-items: flex-start;
  }
  .mdc-snackbar--stacked .mdc-snackbar__actions {
    align-self: flex-end;
    margin-bottom: 8px;
  }

  .mdc-snackbar--open .mdc-snackbar__surface {
    transform: scale(1);
    opacity: 1;
    pointer-events: auto;
    transition: opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),
      transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1);
  }
  .mdc-snackbar--closing .mdc-snackbar__surface {
    transform: scale(1);
    transition: opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1);
  }

  .mdc-snackbar__label::before {
    display: inline;
    content: attr(data-mdc-snackbar-label-text);
  }
  .mdc-snackbar__actions {
    display: flex;
    flex-shrink: 0;
    align-items: center;
    box-sizing: border-box;
    visibility: hidden;
  }
  .mdc-snackbar__action:not(:disabled) {
    color: #bb86fc;
  }
  .mdc-snackbar__action::before,
  .mdc-snackbar__action::after {
    background-color: #bb86fc;
    background-color: var(--mdc-ripple-color, #bb86fc);
  }
  .mdc-snackbar__action:hover::before,
  .mdc-snackbar__action.mdc-ripple-surface--hover::before {
    opacity: 0.08;
    opacity: var(--mdc-ripple-hover-opacity, 0.08);
  }
  .mdc-snackbar__action.mdc-ripple-upgraded--background-focused::before,
  .mdc-snackbar__action:not(.mdc-ripple-upgraded):focus::before {
    transition-duration: 75ms;
    opacity: 0.24;
    opacity: var(--mdc-ripple-focus-opacity, 0.24);
  }
  .mdc-snackbar__action:not(.mdc-ripple-upgraded)::after {
    transition: opacity 150ms linear;
  }
  .mdc-snackbar__action:not(.mdc-ripple-upgraded):active::after {
    transition-duration: 75ms;
    opacity: 0.24;
    opacity: var(--mdc-ripple-press-opacity, 0.24);
  }
  .mdc-snackbar__action.mdc-ripple-upgraded {
    --mdc-ripple-fg-opacity: var(--mdc-ripple-press-opacity, 0.24);
  }
  .mdc-snackbar__dismiss {
    color: rgba(255, 255, 255, 0.87);
  }
  .mdc-snackbar__dismiss::before,
  .mdc-snackbar__dismiss::after {
    background-color: rgba(255, 255, 255, 0.87);
    background-color: var(--mdc-ripple-color, rgba(255, 255, 255, 0.87));
  }
  .mdc-snackbar__dismiss:hover::before,
  .mdc-snackbar__dismiss.mdc-ripple-surface--hover::before {
    opacity: 0.08;
    opacity: var(--mdc-ripple-hover-opacity, 0.08);
  }
  .mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused::before,
  .mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus::before {
    transition-duration: 75ms;
    opacity: 0.24;
    opacity: var(--mdc-ripple-focus-opacity, 0.24);
  }
  .mdc-snackbar__dismiss:not(.mdc-ripple-upgraded)::after {
    transition: opacity 150ms linear;
  }
  .mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active::after {
    transition-duration: 75ms;
    opacity: 0.24;
    opacity: var(--mdc-ripple-press-opacity, 0.24);
  }
  .mdc-snackbar__dismiss.mdc-ripple-upgraded {
    --mdc-ripple-fg-opacity: var(--mdc-ripple-press-opacity, 0.24);
  }
  .mdc-snackbar__dismiss.mdc-snackbar__dismiss {
    width: 36px;
    height: 36px;
    padding: 9px;
    font-size: 18px;
  }
  .mdc-snackbar__dismiss.mdc-snackbar__dismiss svg,
  .mdc-snackbar__dismiss.mdc-snackbar__dismiss img {
    width: 18px;
    height: 18px;
  }
  .mdc-snackbar__action + .mdc-snackbar__dismiss {
    margin-left: 8px;
    margin-right: 0;
  }
  [dir='rtl'] .mdc-snackbar__action + .mdc-snackbar__dismiss,
  .mdc-snackbar__action + .mdc-snackbar__dismiss[dir='rtl'] {
    margin-left: 0;
    margin-right: 8px;
  }
  slot[name='action']::slotted(mwc-button) {
    --mdc-theme-primary: var(--mdc-snackbar-action-color, #bb86fc);
  }
  slot[name='dismiss']::slotted(mwc-icon-button) {
    --mdc-icon-size: 18px;
    --mdc-icon-button-size: 36px;
    color: rgba(255, 255, 255, 0.87);
    margin-left: 8px;
    margin-right: 0;
  }
`;var pm=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let mm=class extends hm{constructor(){super(...arguments),this.open=!1,this.isWarning=!1,this.timeoutMs=5e3,this.closeOnEscape=!1,this.content=oe``,this.stacked=!1,this.leading=!1,this.reason=""}static get styles(){return[um]}render(){const e={"mdc-snackbar--stacked":this.stacked,"mdc-snackbar--leading":this.leading,"is-warning":this.isWarning};return oe` <div
      class="mdc-snackbar ${Ge(e)}"
      @keydown="${this.handleKeydown}"
    >
      <div class="mdc-snackbar__surface">
        <div class="mdc-snackbar__label" role="status">${this.content}</div>
        <div class="mdc-snackbar__actions">
          <slot name="action" @click="${this.handleActionClick}"></slot>
          <slot name="dismiss" @click="${this.handleDismissClick}"></slot>
        </div>
      </div>
    </div>`}show(){this.open=!0}close(e=""){this.reason=e,this.open=!1}firstUpdated(){super.firstUpdated(),this.open&&this.mdcFoundation.open()}handleKeydown(e){this.mdcFoundation.handleKeyDown(e)}handleActionClick(e){this.mdcFoundation.handleActionButtonClick(e)}handleDismissClick(e){this.mdcFoundation.handleActionIconClick(e)}};pm([g(".mdc-snackbar")],mm.prototype,"mdcRoot",void 0),pm([g(".mdc-snackbar__label")],mm.prototype,"labelElement",void 0),pm([u({type:Boolean,reflect:!0})],mm.prototype,"open",void 0),pm([u({type:Boolean})],mm.prototype,"isWarning",void 0),pm([u({type:Number})],mm.prototype,"timeoutMs",void 0),pm([u({type:Boolean})],mm.prototype,"closeOnEscape",void 0),pm([u({type:Object})],mm.prototype,"content",void 0),pm([u({type:Boolean})],mm.prototype,"stacked",void 0),pm([u({type:Boolean})],mm.prototype,"leading",void 0),mm=pm([d("wordcraft-snackbar")],mm);var fm=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class gm extends wn{constructor(e){super(),this.serviceProvider=e,this.messageBody="",this.messageHeader="",this.dialogs=new Map,this.snackbars=new Map,this.wasConfirmEventListenerAdded=!1,this.resolveConfirmDialog=()=>{},this.hasBeenWarnedNotToTrustTheBot=!1}initialize(){const{keyboardService:e}=this.serviceProvider;this.keyboardServiceHelper=e.makeHelper("dialogs")}get localStorageService(){return this.serviceProvider.localStorageService}get textEditorService(){return this.serviceProvider.textEditorService}registerDialog(e,t){this.dialogs.set(e,t)}registerSnackbar(e,t){this.snackbars.set(e,t)}openMessageDialog(e,t=""){this.messageBody=e;const r=this.dialogs.get("message-dialog");r instanceof Fp&&this.openDialog(r)}closeWelcomeDialog(){const e=this.dialogs.get("welcome-dialog");e instanceof Fp&&e.close()}openConfirmDialog(e){return fm(this,arguments,void 0,(function*(e,t=""){this.messageBody=e;const r=this.dialogs.get("confirm");return r instanceof Fp?(this.openDialog(r),this.wasConfirmEventListenerAdded||(r.addEventListener("closed",(e=>{"confirm"===e.detail.action?this.resolveConfirmDialog(!0):this.resolveConfirmDialog(!1),this.resolveConfirmDialog=()=>{}})),this.wasConfirmEventListenerAdded=!0),new Promise((e=>{this.resolveConfirmDialog=e}))):Promise.resolve(!1)}))}openWelcomeDialog(){const e=this.localStorageService.hasBeenWelcomed(),t=this.dialogs.get("welcome-dialog");if(t instanceof Fp){t.querySelector("wordcraft-welcome-dialog").hasBeenWelcomed=e,t.addEventListener("closed",(()=>{this.localStorageService.setHasBeenWelcomed(),this.openDoNotTrustTheBotSnackbar(),this.textEditorService.focus()})),this.openDialog(t)}}openDialog(e){e.open=!0,this.keyboardServiceHelper.registerKeyHandler("Escape",(()=>{e.close()})),e.addEventListener("closed",(()=>{this.keyboardServiceHelper.unregisterKeyHandlers()}))}getPendingSuggestionsMessage(){return oe`
      You can't edit your story with pending suggestions.<br />
      Please choose a suggestion from the sidebar, or hit cancel.
    `}getDoNotTrustTheBotMessage(){return oe`
      ⚠️ DO NOT BELIEVE THE BOT!<br />
      Any information it provides is likely to be made up.<br />
      It can say offensive and biased things, especially when provoked.
    `}openDoNotTrustTheBotSnackbar(){this.hasBeenWarnedNotToTrustTheBot||(this.openSnackbar("bot-warning-snackbar",this.getDoNotTrustTheBotMessage(),!0),this.hasBeenWarnedNotToTrustTheBot=!0)}openPendingChoiceSnackbar(){const e=this.getPendingSuggestionsMessage();this.openSnackbar("message-snackbar",e)}openErrorSnackbar(e){this.openSnackbar("error-snackbar",e,!0)}openSnackbar(e,t,r=!1){const i="string"==typeof t?oe`${t}`:t,n=this.snackbars.get(e);n instanceof mm&&(n.open=!1,n.isWarning=r,n.content=i,n.show())}}oi(gm,{messageBody:Xt,messageHeader:Xt});const bm="wordcraft-state",vm=bm+"@editor-snapshot",ym=bm+"@has-been-welcomed",_m=bm+"@log",xm=bm+"@meta-text",km=bm+"@starred-results",wm=bm+"@document-id",Sm=bm+"@saved-documents",Em=bm+"@saved-api-key";class Cm extends wn{clearDocumentState(){const e=[wm,vm,bm];for(const t of e)window.localStorage.removeItem(t)}clearAll(){const e=[bm,vm,_m,km,wm,Sm,Em];for(const t of e)window.localStorage.removeItem(t)}setEditorStateSnapshot(e){this.setState(vm,e)}setHasBeenWelcomed(e=!0){this.setState(ym,e)}hasBeenWelcomed(){return this.getData(ym,!1)}setLog(e){this.setState(_m,e)}setMetaText(e){this.setState(xm,e)}setStarredResults(e){this.setState(km,e)}setDocumentId(e){this.setState(wm,e)}getDocumentId(){return this.getState().documentId}setLastAPIKey(e){this.setState(Em,e)}getLastAPIKey(){return this.getState().lastAPIKey}loadDocuments(){const e=this.getData(Sm,{});return Object.keys(e).map((t=>e[t]))}deleteDocument(e){const t=this.getData(Sm,{});return delete t[e],this.setState(Sm,t),e}saveDocument(e,t){const r=t||os();e.id=r;const i=this.getData(Sm,{});return i[r]=e,this.setState(Sm,i),r}setState(e,t){const r=JSON.stringify(t);window.localStorage.setItem(e,r)}getData(e,t){const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}getState(){return{hasBeenWelcomed:this.getData(ym,!1),editor:this.getData(vm,null),meta:this.getData(xm,{}),starred:this.getData(km,[]),documentId:this.getData(wm,null),savedDocuments:this.getData(Sm,{}),lastAPIKey:this.getData(Em,null)}}}const Tm=E`#wordcraft-app {
  display: flex;
  flex-direction: row;
  height: 100vh;
  width: 100vw;
}

#sidebar-left {
  width: var(--sidebar-left-width);
  border-right: 1px solid #ddd;
  overflow: hidden;
  text-align: left;
  display: flex;
  flex-direction: column;

  font-size: 13px;
  color: var(--dark-gray);
}

#main-panel {
  flex: 1;
  overflow: auto;
  position: relative;
}

.main-panel-overlay {
  padding: 35px 50px;
  position: absolute;
  height: 100%;
  z-index: 12;
  background: white;
}

#sidebar-right {
  overflow: hidden;
  width: var(--sidebar-right-width);
  border-left: 1px solid #ddd;
  text-align: left;
}

.editor-overlay {
  position: absolute;
  background: white;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 999;
}

mwc-snackbar {
  z-index: 99;
}

.inline-icon {
  display: inline-block;
  vertical-align: bottom;
  margin-bottom: -2px;
}
`;var Am=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Rm=class extends sn{constructor(){super(...arguments),this.appService=bn.getService(En),this.dialogService=bn.getService(gm),this.documentStoreService=bn.getService(Tn),this.keyboardService=bn.getService(Oo),this.localStorageService=bn.getService(Cm)}static get styles(){return[ln,Tm]}registerDialog(e){const t=this.shadowRoot.getElementById(e);t&&this.dialogService.registerDialog(e,t)}registerSnackbar(e){const t=this.shadowRoot.getElementById(e);t&&this.dialogService.registerSnackbar(e,t)}firstUpdated(){this.registerDialog("message-dialog"),this.registerDialog("welcome-dialog"),this.registerDialog("confirm"),this.registerSnackbar("bot-warning-snackbar"),this.registerSnackbar("message-snackbar"),this.registerSnackbar("error-snackbar")}render(){return oe`
      <div id="wordcraft-app">
        ${this.renderContent()} ${this.renderDialogs()}
        ${this.renderSnackbars()}
      </div>
    `}renderContent(){if(!this.appService.isReady)return;const{lifeCycleState:e}=this.appService;return"ONBOARDING"===e?this.renderOnboarding():"INITIALIZING"===e?this.renderLoading():"EDITING"===e?this.renderApp():""}renderDialogs(){const e=Ye({marginLeft:"20px"});return oe`
      <mwc-dialog
        id="message-dialog"
        heading="${this.dialogService.messageHeader}"
        hideActions
      >
        ${this.dialogService.messageBody}
      </mwc-dialog>
      <mwc-dialog id="welcome-dialog" hideActions>
        <wordcraft-welcome-dialog
          .close=${()=>{this.dialogService.closeWelcomeDialog()}}
        ></wordcraft-welcome-dialog>
      </mwc-dialog>
      <mwc-dialog id="confirm">
        ${this.dialogService.messageBody}
        <button
          slot="primaryAction"
          dialogAction="confirm"
          style=${e}
        >
          OK
        </button>
        <button slot="secondaryAction" dialogAction="cancel">Cancel</button>
      </mwc-dialog>
    `}renderSnackbars(){return oe`
      <wordcraft-snackbar id="bot-warning-snackbar" leading>
        <mwc-icon-button icon="close" slot="dismiss"></mwc-icon-button>
      </wordcraft-snackbar>
      <wordcraft-snackbar id="message-snackbar" leading>
        <mwc-icon-button icon="close" slot="dismiss"></mwc-icon-button>
      </wordcraft-snackbar>
      <wordcraft-snackbar id="error-snackbar" leading>
        <mwc-icon-button icon="close" slot="dismiss"></mwc-icon-button>
      </wordcraft-snackbar>
    `}renderOnboarding(){return oe`<wordcraft-onboarding></wordcraft-onboarding>`}renderLoading(){return oe`<wordcraft-loading-screen></wordcraft-loading-screen> `}renderApp(){return oe`
      <div id="main-panel">${this.renderEditor()}</div>
      <div id="sidebar-right">
        <wordcraft-sidebar-right></wordcraft-sidebar-right>
      </div>
    `}renderEditor(){const e=this.keyboardService.makeHelper("textEditor");return oe`
      <wordcraft-text-editor
        ?showWordCount=${!0}
        placeholder=${"Once upon a time..."}
        .onInitialized=${()=>{this.localStorageService.hasBeenWelcomed()?this.dialogService.openDoNotTrustTheBotSnackbar():this.dialogService.openWelcomeDialog();const t=new Ao("s",!0);e.registerKeyHandler(t,(()=>{this.documentStoreService.saveDocument()})),this.documentStoreService.startAutoSave()}}
        .onDisconnect=${()=>{e.unregisterKeyHandlers(),this.documentStoreService.endAutoSave()}}
        .onDisabledOverlayClick=${()=>{this.dialogService.openPendingChoiceSnackbar()}}
      ></wordcraft-text-editor>
    `}};var Om,Im;Rm=Am([d("wordcraft-app")],Rm),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of r)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Om||(Om={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Im||(Im={}));const Nm=Om.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mm=e=>{switch(typeof e){case"undefined":return Nm.undefined;case"string":return Nm.string;case"number":return isNaN(e)?Nm.nan:Nm.number;case"boolean":return Nm.boolean;case"function":return Nm.function;case"bigint":return Nm.bigint;case"symbol":return Nm.symbol;case"object":return Array.isArray(e)?Nm.array:null===e?Nm.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Nm.promise:"undefined"!=typeof Map&&e instanceof Map?Nm.map:"undefined"!=typeof Set&&e instanceof Set?Nm.set:"undefined"!=typeof Date&&e instanceof Date?Nm.date:Nm.object;default:return Nm.unknown}},Pm=Om.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Lm extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){const r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof Lm))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Om.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Lm.create=e=>new Lm(e);const Dm=(e,t)=>{let r;switch(e.code){case Pm.invalid_type:r=e.received===Nm.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Pm.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Om.jsonStringifyReplacer)}`;break;case Pm.unrecognized_keys:r=`Unrecognized key(s) in object: ${Om.joinValues(e.keys,", ")}`;break;case Pm.invalid_union:r="Invalid input";break;case Pm.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Om.joinValues(e.options)}`;break;case Pm.invalid_enum_value:r=`Invalid enum value. Expected ${Om.joinValues(e.options)}, received '${e.received}'`;break;case Pm.invalid_arguments:r="Invalid function arguments";break;case Pm.invalid_return_type:r="Invalid function return type";break;case Pm.invalid_date:r="Invalid date";break;case Pm.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Om.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Pm.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Pm.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Pm.custom:r="Invalid input";break;case Pm.invalid_intersection_types:r="Intersection results could not be merged";break;case Pm.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Pm.not_finite:r="Number must be finite";break;default:r=t.defaultError,Om.assertNever(e)}return{message:r}};let $m=Dm;function Hm(){return $m}const Fm=e=>{const{data:t,path:r,errorMaps:i,issueData:n}=e,o=[...r,...n.path||[]],s={...n,path:o};if(void 0!==n.message)return{...n,path:o,message:n.message};let a="";const c=i.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(s,{data:t,defaultError:a}).message;return{...n,path:o,message:a}};function Bm(e,t){const r=Hm(),i=Fm({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Dm?void 0:Dm].filter((e=>!!e))});e.common.issues.push(i)}class jm{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if("aborted"===i.status)return zm;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,i=await e.value;r.push({key:t,value:i})}return jm.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:t,value:n}=i;if("aborted"===t.status)return zm;if("aborted"===n.status)return zm;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!i.alwaysSet||(r[t.value]=n.value)}return{status:e.value,value:r}}}const zm=Object.freeze({status:"aborted"}),Um=e=>({status:"dirty",value:e}),Km=e=>({status:"valid",value:e}),Wm=e=>"aborted"===e.status,Vm=e=>"dirty"===e.status,Gm=e=>"valid"===e.status,Zm=e=>"undefined"!=typeof Promise&&e instanceof Promise;function qm(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function Ym(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}var Jm,Xm,Qm;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Jm||(Jm={}));class ef{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tf=(e,t)=>{if(Gm(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Lm(e.common.issues);return this._error=t,this._error}}};function rf(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{var o,s;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:n.defaultError}:void 0===n.data?{message:null!==(o=null!=a?a:i)&&void 0!==o?o:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(s=null!=a?a:r)&&void 0!==s?s:n.defaultError}},description:n}}class nf{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Mm(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Mm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jm,ctx:{common:e.parent.common,data:e.data,parsedType:Mm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Zm(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mm(e)},n=this._parseSync({data:e,path:i.path,parent:i});return tf(i,n)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mm(e)},i=this._parse({data:e,path:r.path,parent:r}),n=await(Zm(i)?i:Promise.resolve(i));return tf(r,n)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const n=e(t),o=()=>i.addIssue({code:Pm.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(o(),!1))):!!n||(o(),!1)}))}refinement(e,t){return this._refinement(((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1)))}_refinement(e){return new Xf({schema:this,typeName:lg.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qf.create(this,this._def)}nullable(){return eg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mf.create(this,this._def)}promise(){return Jf.create(this,this._def)}or(e){return Df.create([this,e],this._def)}and(e){return Bf.create(this,e,this._def)}transform(e){return new Xf({...rf(this._def),schema:this,typeName:lg.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new tg({...rf(this._def),innerType:this,defaultValue:t,typeName:lg.ZodDefault})}brand(){return new og({typeName:lg.ZodBranded,type:this,...rf(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new rg({...rf(this._def),innerType:this,catchValue:t,typeName:lg.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return sg.create(this,e)}readonly(){return ag.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const of=/^c[^\s-]{8,}$/i,sf=/^[0-9a-z]+$/,af=/^[0-9A-HJKMNP-TV-Z]{26}$/,cf=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,df=/^[a-z0-9_-]{21}$/i,lf=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hf=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let uf;const pf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mf=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ff=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gf="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bf=new RegExp(`^${gf}$`);function vf(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function yf(e){let t=`${gf}T${vf(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}class _f extends nf{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Nm.string){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.string,received:t.parsedType}),zm}const t=new jm;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const i=e.data.length>o.value,n=e.data.length<o.value;(i||n)&&(r=this._getOrReturnCtx(e,r),i?Bm(r,{code:Pm.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):n&&Bm(r,{code:Pm.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)hf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"email",code:Pm.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)uf||(uf=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),uf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"emoji",code:Pm.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)cf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"uuid",code:Pm.invalid_string,message:o.message}),t.dirty());else if("nanoid"===o.kind)df.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"nanoid",code:Pm.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)of.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"cuid",code:Pm.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)sf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"cuid2",code:Pm.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)af.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"ulid",code:Pm.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),Bm(r,{validation:"url",code:Pm.invalid_string,message:o.message}),t.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"regex",code:Pm.invalid_string,message:o.message}),t.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty());else if("datetime"===o.kind){yf(o).test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:"datetime",message:o.message}),t.dirty())}else if("date"===o.kind){bf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:"date",message:o.message}),t.dirty())}else if("time"===o.kind){new RegExp(`^${vf(o)}$`).test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.invalid_string,validation:"time",message:o.message}),t.dirty())}else"duration"===o.kind?lf.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"duration",code:Pm.invalid_string,message:o.message}),t.dirty()):"ip"===o.kind?(i=e.data,("v4"!==(n=o.version)&&n||!pf.test(i))&&("v6"!==n&&n||!mf.test(i))&&(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"ip",code:Pm.invalid_string,message:o.message}),t.dirty())):"base64"===o.kind?ff.test(e.data)||(r=this._getOrReturnCtx(e,r),Bm(r,{validation:"base64",code:Pm.invalid_string,message:o.message}),t.dirty()):Om.assertNever(o);var i,n;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:Pm.invalid_string,...Jm.errToObj(r)})}_addCheck(e){return new _f({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Jm.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Jm.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Jm.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Jm.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Jm.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Jm.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Jm.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Jm.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Jm.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Jm.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...Jm.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Jm.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Jm.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Jm.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Jm.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Jm.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Jm.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Jm.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Jm.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Jm.errToObj(t)})}nonempty(e){return this.min(1,Jm.errToObj(e))}trim(){return new _f({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function xf(e,t){const r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}_f.create=e=>{var t;return new _f({checks:[],typeName:lg.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...rf(e)})};class kf extends nf{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Nm.number){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.number,received:t.parsedType}),zm}let t;const r=new jm;for(const i of this._def.checks)if("int"===i.kind)Om.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty());else if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty())}else"multipleOf"===i.kind?0!==xf(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.not_finite,message:i.message}),r.dirty()):Om.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Jm.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Jm.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Jm.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Jm.toString(t))}setLimit(e,t,r,i){return new kf({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Jm.toString(i)}]})}_addCheck(e){return new kf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Jm.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Jm.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Jm.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Jm.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Jm.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Jm.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Jm.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Jm.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Jm.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Om.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}kf.create=e=>new kf({checks:[],typeName:lg.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...rf(e)});class wf extends nf{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Nm.bigint){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.bigint,received:t.parsedType}),zm}let t;const r=new jm;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Bm(t,{code:Pm.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):Om.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Jm.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Jm.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Jm.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Jm.toString(t))}setLimit(e,t,r,i){return new wf({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Jm.toString(i)}]})}_addCheck(e){return new wf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Jm.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Jm.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Jm.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Jm.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Jm.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}wf.create=e=>{var t;return new wf({checks:[],typeName:lg.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...rf(e)})};class Sf extends nf{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Nm.boolean){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.boolean,received:t.parsedType}),zm}return Km(e.data)}}Sf.create=e=>new Sf({typeName:lg.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...rf(e)});class Ef extends nf{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Nm.date){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.date,received:t.parsedType}),zm}if(isNaN(e.data.getTime())){return Bm(this._getOrReturnCtx(e),{code:Pm.invalid_date}),zm}const t=new jm;let r;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),Bm(r,{code:Pm.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):Om.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ef({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Jm.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Jm.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ef.create=e=>new Ef({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:lg.ZodDate,...rf(e)});class Cf extends nf{_parse(e){if(this._getType(e)!==Nm.symbol){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.symbol,received:t.parsedType}),zm}return Km(e.data)}}Cf.create=e=>new Cf({typeName:lg.ZodSymbol,...rf(e)});class Tf extends nf{_parse(e){if(this._getType(e)!==Nm.undefined){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.undefined,received:t.parsedType}),zm}return Km(e.data)}}Tf.create=e=>new Tf({typeName:lg.ZodUndefined,...rf(e)});class Af extends nf{_parse(e){if(this._getType(e)!==Nm.null){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.null,received:t.parsedType}),zm}return Km(e.data)}}Af.create=e=>new Af({typeName:lg.ZodNull,...rf(e)});class Rf extends nf{constructor(){super(...arguments),this._any=!0}_parse(e){return Km(e.data)}}Rf.create=e=>new Rf({typeName:lg.ZodAny,...rf(e)});class Of extends nf{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Km(e.data)}}Of.create=e=>new Of({typeName:lg.ZodUnknown,...rf(e)});class If extends nf{_parse(e){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.never,received:t.parsedType}),zm}}If.create=e=>new If({typeName:lg.ZodNever,...rf(e)});class Nf extends nf{_parse(e){if(this._getType(e)!==Nm.undefined){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.void,received:t.parsedType}),zm}return Km(e.data)}}Nf.create=e=>new Nf({typeName:lg.ZodVoid,...rf(e)});class Mf extends nf{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==Nm.array)return Bm(t,{code:Pm.invalid_type,expected:Nm.array,received:t.parsedType}),zm;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&(Bm(t,{code:e?Pm.too_big:Pm.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(Bm(t,{code:Pm.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(Bm(t,{code:Pm.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>i.type._parseAsync(new ef(t,e,t.path,r))))).then((e=>jm.mergeArray(r,e)));const n=[...t.data].map(((e,r)=>i.type._parseSync(new ef(t,e,t.path,r))));return jm.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new Mf({...this._def,minLength:{value:e,message:Jm.toString(t)}})}max(e,t){return new Mf({...this._def,maxLength:{value:e,message:Jm.toString(t)}})}length(e,t){return new Mf({...this._def,exactLength:{value:e,message:Jm.toString(t)}})}nonempty(e){return this.min(1,e)}}function Pf(e){if(e instanceof Lf){const t={};for(const r in e.shape){const i=e.shape[r];t[r]=Qf.create(Pf(i))}return new Lf({...e._def,shape:()=>t})}return e instanceof Mf?new Mf({...e._def,type:Pf(e.element)}):e instanceof Qf?Qf.create(Pf(e.unwrap())):e instanceof eg?eg.create(Pf(e.unwrap())):e instanceof jf?jf.create(e.items.map((e=>Pf(e)))):e}Mf.create=(e,t)=>new Mf({type:e,minLength:null,maxLength:null,exactLength:null,typeName:lg.ZodArray,...rf(t)});class Lf extends nf{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Om.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Nm.object){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.object,received:t.parsedType}),zm}const{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:n}=this._getCached(),o=[];if(!(this._def.catchall instanceof If&&"strip"===this._def.unknownKeys))for(const e in r.data)n.includes(e)||o.push(e);const s=[];for(const e of n){const t=i[e],n=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new ef(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof If){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of o)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&(Bm(r,{code:Pm.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const i=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new ef(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const r=await t.key,i=await t.value;e.push({key:r,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>jm.mergeObjectSync(t,e))):jm.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return Jm.errToObj,new Lf({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,n,o,s;const a=null!==(o=null===(n=(i=this._def).errorMap)||void 0===n?void 0:n.call(i,t,r).message)&&void 0!==o?o:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=Jm.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new Lf({...this._def,unknownKeys:"strip"})}passthrough(){return new Lf({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lf({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lf({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lg.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Lf({...this._def,catchall:e})}pick(e){const t={};return Om.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new Lf({...this._def,shape:()=>t})}omit(e){const t={};return Om.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new Lf({...this._def,shape:()=>t})}deepPartial(){return Pf(this)}partial(e){const t={};return Om.objectKeys(this.shape).forEach((r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()})),new Lf({...this._def,shape:()=>t})}required(e){const t={};return Om.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Qf;)e=e._def.innerType;t[r]=e}})),new Lf({...this._def,shape:()=>t})}keyof(){return Zf(Om.objectKeys(this.shape))}}Lf.create=(e,t)=>new Lf({shape:()=>e,unknownKeys:"strip",catchall:If.create(),typeName:lg.ZodObject,...rf(t)}),Lf.strictCreate=(e,t)=>new Lf({shape:()=>e,unknownKeys:"strict",catchall:If.create(),typeName:lg.ZodObject,...rf(t)}),Lf.lazycreate=(e,t)=>new Lf({shape:e,unknownKeys:"strip",catchall:If.create(),typeName:lg.ZodObject,...rf(t)});class Df extends nf{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new Lm(e.ctx.common.issues)));return Bm(t,{code:Pm.invalid_union,unionErrors:r}),zm}));{let e;const i=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},o=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=i.map((e=>new Lm(e)));return Bm(t,{code:Pm.invalid_union,unionErrors:n}),zm}}get options(){return this._def.options}}Df.create=(e,t)=>new Df({options:e,typeName:lg.ZodUnion,...rf(t)});const $f=e=>e instanceof Vf?$f(e.schema):e instanceof Xf?$f(e.innerType()):e instanceof Gf?[e.value]:e instanceof qf?e.options:e instanceof Yf?Om.objectValues(e.enum):e instanceof tg?$f(e._def.innerType):e instanceof Tf?[void 0]:e instanceof Af?[null]:e instanceof Qf?[void 0,...$f(e.unwrap())]:e instanceof eg?[null,...$f(e.unwrap())]:e instanceof og||e instanceof ag?$f(e.unwrap()):e instanceof rg?$f(e._def.innerType):[];class Hf extends nf{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Nm.object)return Bm(t,{code:Pm.invalid_type,expected:Nm.object,received:t.parsedType}),zm;const r=this.discriminator,i=t.data[r],n=this.optionsMap.get(i);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(Bm(t,{code:Pm.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),zm)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const r of t){const t=$f(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(i.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);i.set(n,r)}}return new Hf({typeName:lg.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...rf(r)})}}function Ff(e,t){const r=Mm(e),i=Mm(t);if(e===t)return{valid:!0,data:e};if(r===Nm.object&&i===Nm.object){const r=Om.objectKeys(t),i=Om.objectKeys(e).filter((e=>-1!==r.indexOf(e))),n={...e,...t};for(const r of i){const i=Ff(e[r],t[r]);if(!i.valid)return{valid:!1};n[r]=i.data}return{valid:!0,data:n}}if(r===Nm.array&&i===Nm.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let i=0;i<e.length;i++){const n=Ff(e[i],t[i]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===Nm.date&&i===Nm.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Bf extends nf{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(Wm(e)||Wm(i))return zm;const n=Ff(e.value,i.value);return n.valid?((Vm(e)||Vm(i))&&t.dirty(),{status:t.value,value:n.data}):(Bm(r,{code:Pm.invalid_intersection_types}),zm)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Bf.create=(e,t,r)=>new Bf({left:e,right:t,typeName:lg.ZodIntersection,...rf(r)});class jf extends nf{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nm.array)return Bm(r,{code:Pm.invalid_type,expected:Nm.array,received:r.parsedType}),zm;if(r.data.length<this._def.items.length)return Bm(r,{code:Pm.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),zm;!this._def.rest&&r.data.length>this._def.items.length&&(Bm(r,{code:Pm.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new ef(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(i).then((e=>jm.mergeArray(t,e))):jm.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new jf({...this._def,rest:e})}}jf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jf({items:e,typeName:lg.ZodTuple,rest:null,...rf(t)})};class zf extends nf{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nm.object)return Bm(r,{code:Pm.invalid_type,expected:Nm.object,received:r.parsedType}),zm;const i=[],n=this._def.keyType,o=this._def.valueType;for(const e in r.data)i.push({key:n._parse(new ef(r,e,r.path,e)),value:o._parse(new ef(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?jm.mergeObjectAsync(t,i):jm.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new zf(t instanceof nf?{keyType:e,valueType:t,typeName:lg.ZodRecord,...rf(r)}:{keyType:_f.create(),valueType:e,typeName:lg.ZodRecord,...rf(t)})}}class Uf extends nf{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nm.map)return Bm(r,{code:Pm.invalid_type,expected:Nm.map,received:r.parsedType}),zm;const i=this._def.keyType,n=this._def.valueType,o=[...r.data.entries()].map((([e,t],o)=>({key:i._parse(new ef(r,e,r.path,[o,"key"])),value:n._parse(new ef(r,t,r.path,[o,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of o){const i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return zm;"dirty"!==i.status&&"dirty"!==n.status||t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of o){const i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return zm;"dirty"!==i.status&&"dirty"!==n.status||t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}Uf.create=(e,t,r)=>new Uf({valueType:t,keyType:e,typeName:lg.ZodMap,...rf(r)});class Kf extends nf{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nm.set)return Bm(r,{code:Pm.invalid_type,expected:Nm.set,received:r.parsedType}),zm;const i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&(Bm(r,{code:Pm.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&(Bm(r,{code:Pm.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const n=this._def.valueType;function o(e){const r=new Set;for(const i of e){if("aborted"===i.status)return zm;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}const s=[...r.data.values()].map(((e,t)=>n._parse(new ef(r,e,r.path,t))));return r.common.async?Promise.all(s).then((e=>o(e))):o(s)}min(e,t){return new Kf({...this._def,minSize:{value:e,message:Jm.toString(t)}})}max(e,t){return new Kf({...this._def,maxSize:{value:e,message:Jm.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Kf.create=(e,t)=>new Kf({valueType:e,minSize:null,maxSize:null,typeName:lg.ZodSet,...rf(t)});class Wf extends nf{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Nm.function)return Bm(t,{code:Pm.invalid_type,expected:Nm.function,received:t.parsedType}),zm;function r(e,r){return Fm({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hm(),Dm].filter((e=>!!e)),issueData:{code:Pm.invalid_arguments,argumentsError:r}})}function i(e,r){return Fm({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hm(),Dm].filter((e=>!!e)),issueData:{code:Pm.invalid_return_type,returnTypeError:r}})}const n={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Jf){const e=this;return Km((async function(...t){const s=new Lm([]),a=await e._def.args.parseAsync(t,n).catch((e=>{throw s.addIssue(r(t,e)),s})),c=await Reflect.apply(o,this,a);return await e._def.returns._def.type.parseAsync(c,n).catch((e=>{throw s.addIssue(i(c,e)),s}))}))}{const e=this;return Km((function(...t){const s=e._def.args.safeParse(t,n);if(!s.success)throw new Lm([r(t,s.error)]);const a=Reflect.apply(o,this,s.data),c=e._def.returns.safeParse(a,n);if(!c.success)throw new Lm([i(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Wf({...this._def,args:jf.create(e).rest(Of.create())})}returns(e){return new Wf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Wf({args:e||jf.create([]).rest(Of.create()),returns:t||Of.create(),typeName:lg.ZodFunction,...rf(r)})}}class Vf extends nf{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Vf.create=(e,t)=>new Vf({getter:e,typeName:lg.ZodLazy,...rf(t)});class Gf extends nf{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Bm(t,{received:t.data,code:Pm.invalid_literal,expected:this._def.value}),zm}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Zf(e,t){return new qf({values:e,typeName:lg.ZodEnum,...rf(t)})}Gf.create=(e,t)=>new Gf({value:e,typeName:lg.ZodLiteral,...rf(t)});class qf extends nf{constructor(){super(...arguments),Xm.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return Bm(t,{expected:Om.joinValues(r),received:t.parsedType,code:Pm.invalid_type}),zm}if(qm(this,Xm,"f")||Ym(this,Xm,new Set(this._def.values),"f"),!qm(this,Xm,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Bm(t,{received:t.data,code:Pm.invalid_enum_value,options:r}),zm}return Km(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return qf.create(e,{...this._def,...t})}exclude(e,t=this._def){return qf.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Xm=new WeakMap,qf.create=Zf;class Yf extends nf{constructor(){super(...arguments),Qm.set(this,void 0)}_parse(e){const t=Om.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Nm.string&&r.parsedType!==Nm.number){const e=Om.objectValues(t);return Bm(r,{expected:Om.joinValues(e),received:r.parsedType,code:Pm.invalid_type}),zm}if(qm(this,Qm,"f")||Ym(this,Qm,new Set(Om.getValidEnumValues(this._def.values)),"f"),!qm(this,Qm,"f").has(e.data)){const e=Om.objectValues(t);return Bm(r,{received:r.data,code:Pm.invalid_enum_value,options:e}),zm}return Km(e.data)}get enum(){return this._def.values}}Qm=new WeakMap,Yf.create=(e,t)=>new Yf({values:e,typeName:lg.ZodNativeEnum,...rf(t)});class Jf extends nf{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Nm.promise&&!1===t.common.async)return Bm(t,{code:Pm.invalid_type,expected:Nm.promise,received:t.parsedType}),zm;const r=t.parsedType===Nm.promise?t.data:Promise.resolve(t.data);return Km(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Jf.create=(e,t)=>new Jf({type:e,typeName:lg.ZodPromise,...rf(t)});class Xf extends nf{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lg.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{Bm(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){const e=i.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return zm;const i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?zm:"dirty"===i.status||"dirty"===t.value?Um(i.value):i}));{if("aborted"===t.value)return zm;const i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?zm:"dirty"===i.status||"dirty"===t.value?Um(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?zm:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?zm:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===i.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gm(e))return e;const o=i.transform(e.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Gm(e)?Promise.resolve(i.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e))}Om.assertNever(i)}}Xf.create=(e,t,r)=>new Xf({schema:e,typeName:lg.ZodEffects,effect:t,...rf(r)}),Xf.createWithPreprocess=(e,t,r)=>new Xf({schema:t,effect:{type:"preprocess",transform:e},typeName:lg.ZodEffects,...rf(r)});class Qf extends nf{_parse(e){return this._getType(e)===Nm.undefined?Km(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qf.create=(e,t)=>new Qf({innerType:e,typeName:lg.ZodOptional,...rf(t)});class eg extends nf{_parse(e){return this._getType(e)===Nm.null?Km(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eg.create=(e,t)=>new eg({innerType:e,typeName:lg.ZodNullable,...rf(t)});class tg extends nf{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Nm.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tg.create=(e,t)=>new tg({innerType:e,typeName:lg.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...rf(t)});class rg extends nf{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zm(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Lm(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new Lm(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rg.create=(e,t)=>new rg({innerType:e,typeName:lg.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...rf(t)});class ig extends nf{_parse(e){if(this._getType(e)!==Nm.nan){const t=this._getOrReturnCtx(e);return Bm(t,{code:Pm.invalid_type,expected:Nm.nan,received:t.parsedType}),zm}return{status:"valid",value:e.data}}}ig.create=e=>new ig({typeName:lg.ZodNaN,...rf(e)});const ng=Symbol("zod_brand");class og extends nf{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class sg extends nf{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?zm:"dirty"===e.status?(t.dirty(),Um(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?zm:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new sg({in:e,out:t,typeName:lg.ZodPipeline})}}class ag extends nf{_parse(e){const t=this._def.innerType._parse(e),r=e=>(Gm(e)&&(e.value=Object.freeze(e.value)),e);return Zm(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function cg(e,t={},r){return e?Rf.create().superRefine(((i,n)=>{var o,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,a=null===(s=null!==(o=e.fatal)&&void 0!==o?o:r)||void 0===s||s,c="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...c,fatal:a})}})):Rf.create()}ag.create=(e,t)=>new ag({innerType:e,typeName:lg.ZodReadonly,...rf(t)});const dg={object:Lf.lazycreate};var lg;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(lg||(lg={}));const hg=_f.create,ug=kf.create,pg=ig.create,mg=wf.create,fg=Sf.create,gg=Ef.create,bg=Cf.create,vg=Tf.create,yg=Af.create,_g=Rf.create,xg=Of.create,kg=If.create,wg=Nf.create,Sg=Mf.create,Eg=Lf.create,Cg=Lf.strictCreate,Tg=Df.create,Ag=Hf.create,Rg=Bf.create,Og=jf.create,Ig=zf.create,Ng=Uf.create,Mg=Kf.create,Pg=Wf.create,Lg=Vf.create,Dg=Gf.create,$g=qf.create,Hg=Yf.create,Fg=Jf.create,Bg=Xf.create,jg=Qf.create,zg=eg.create,Ug=Xf.createWithPreprocess,Kg=sg.create,Wg={string:e=>_f.create({...e,coerce:!0}),number:e=>kf.create({...e,coerce:!0}),boolean:e=>Sf.create({...e,coerce:!0}),bigint:e=>wf.create({...e,coerce:!0}),date:e=>Ef.create({...e,coerce:!0})},Vg=zm;var Gg=Object.freeze({__proto__:null,defaultErrorMap:Dm,setErrorMap:function(e){$m=e},getErrorMap:Hm,makeIssue:Fm,EMPTY_PATH:[],addIssueToContext:Bm,ParseStatus:jm,INVALID:zm,DIRTY:Um,OK:Km,isAborted:Wm,isDirty:Vm,isValid:Gm,isAsync:Zm,get util(){return Om},get objectUtil(){return Im},ZodParsedType:Nm,getParsedType:Mm,ZodType:nf,datetimeRegex:yf,ZodString:_f,ZodNumber:kf,ZodBigInt:wf,ZodBoolean:Sf,ZodDate:Ef,ZodSymbol:Cf,ZodUndefined:Tf,ZodNull:Af,ZodAny:Rf,ZodUnknown:Of,ZodNever:If,ZodVoid:Nf,ZodArray:Mf,ZodObject:Lf,ZodUnion:Df,ZodDiscriminatedUnion:Hf,ZodIntersection:Bf,ZodTuple:jf,ZodRecord:zf,ZodMap:Uf,ZodSet:Kf,ZodFunction:Wf,ZodLazy:Vf,ZodLiteral:Gf,ZodEnum:qf,ZodNativeEnum:Yf,ZodPromise:Jf,ZodEffects:Xf,ZodTransformer:Xf,ZodOptional:Qf,ZodNullable:eg,ZodDefault:tg,ZodCatch:rg,ZodNaN:ig,BRAND:ng,ZodBranded:og,ZodPipeline:sg,ZodReadonly:ag,custom:cg,Schema:nf,ZodSchema:nf,late:dg,get ZodFirstPartyTypeKind(){return lg},coerce:Wg,any:_g,array:Sg,bigint:mg,boolean:fg,date:gg,discriminatedUnion:Ag,effect:Bg,enum:$g,function:Pg,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>cg((t=>t instanceof e),t),intersection:Rg,lazy:Lg,literal:Dg,map:Ng,nan:pg,nativeEnum:Hg,never:kg,null:yg,nullable:zg,number:ug,object:Eg,oboolean:()=>fg().optional(),onumber:()=>ug().optional(),optional:jg,ostring:()=>hg().optional(),pipeline:Kg,preprocess:Ug,promise:Fg,record:Ig,set:Mg,strictObject:Cg,string:hg,symbol:bg,transformer:Bg,tuple:Og,undefined:vg,union:Tg,unknown:xg,void:wg,NEVER:Vg,ZodIssueCode:Pm,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Lm});const Zg=Gg.object({input:Gg.string(),target:Gg.string()}),qg=Gg.object({text:Gg.string(),toElaborate:Gg.string(),target:Gg.string()}),Yg=Gg.object({fullText:Gg.string()}),Jg=Gg.object({prefix:Gg.string(),instruction:Gg.string(),text:Gg.string(),target:Gg.string()}),Xg=Gg.object({fullText:Gg.string(),targetSentenceIndex:Gg.number(),target:Gg.string()}),Qg=Gg.object({text:Gg.string(),question:Gg.string(),target:Gg.string()}),eb=Gg.object({topic:Gg.string(),target:Gg.string()}),tb=Gg.object({fullText:Gg.string(),targetSentenceIndex:Gg.number()}),rb=Gg.object({pre:Gg.string(),toReplace:Gg.string(),post:Gg.string(),targets:Gg.array(Gg.string())}),ib=Gg.object({fullText:Gg.string(),targetSentenceIndex:Gg.number(),targetSentenceCharacterOffset:Gg.number()}),nb=Gg.object({pre:Gg.string(),toRewrite:Gg.string(),post:Gg.string(),nWords:Gg.string(),howToRewrite:Gg.string(),target:Gg.string()}),ob=Gg.object({pre:Gg.string(),toRewrite:Gg.string(),post:Gg.string(),howToRewrite:Gg.string(),target:Gg.string()}),sb=Gg.object({toRewrite:Gg.string(),target:Gg.string()}),ab=Gg.object({text:Gg.string(),sizes:Gg.object({text:sb,sentence:sb,phrase:sb,word:sb})}),cb=JSON.parse('[{"input":"A young boy was sitting on the sidewalk.","target":"He was holding a lantern and looking ahead up the road."},{"input":"The preacher took a long breath, and let it out","target":"slowly through his nose. \\"It wasn\'t long ago,\\" he said, \\"that those boys would\'ve been dead and buried."},{"input":"The leaves had begun to change to a deep","target":"auburn. A single, golden leaf had floated to the ground; caught in the sudden windstorm. The day had seemed so serene and peaceful just moments before."},{"input":"The clock chimed again,","target":"bringing her back to reality. The sound had become a constant companion since she had arrived that morning, a welcome companion in an empty house."}]'),db=JSON.parse('[{"text":"The long shadow of the tree crept up the sidewalk","toElaborate":"the tree","target":"It was an old oak tree on the main street of a small town, the branches spread as large as the sky."},{"text":"The car came bouncing down the hill and came to an abrupt stop in my driveway","toElaborate":"the car","target":"It was an old, old Model-T Ford, with brass fittings, and no doors"},{"text":"My pencil sits on top of the desk, left there since ‌the events‌ of last Saturday","toElaborate":"last Saturday","target":"It was one of those Saturdays that starts off like any other but you have the feeling that something is about to stir. You wake up with the same amount of enthusiasm but you get up from bed a little slower than usual. You know this is going to be a busy day"},{"text":"She wasn\'t really upset about what had happened at the lab the other day; she was never one to dwell on mistakes.","toElaborate":"what had happened","target":"She had accidentally left the microorganisms alone for far too long. The lab, or what was left of it, was now filled with a strong aroma of their slime-- they had devoured all the metal, wood, and plastic they could find"}]'),lb=JSON.parse('[{"fullText":"There once was a man named Kentucky, who could play the guitar like nobody\'s business. He loved to play the guitar so that he could hear the guitar sing along to him, to hear the guitar\'s melodic hum. Kentucky was a lonely man living in a lonely house in the middle of nowhere with only his favorite guitar to keep him company. Now this guitar had been owned by many-a-man, and all of them had come to the same fate. They played the guitar until the guitar played them."},{"fullText":"A secretary went about her daily work, while her company was being relocated from Chicago to New York City. It was tough, but she remained adaptable throughout the process."},{"fullText":"The old man was laying on his deathbed, the only thing he could hear was his own heartbeat inside his ear. He knew he had an hour left to live, and he was so filled with despair. \\"I have no regrets, for I have led a good life.\\" However, in the next moment, a nurse entered the room, and he quickly said to her, \\"One regret, now that I have time to think on it. I wish I had talked less and listened more.\\" Before dying, the man decided to have one more conversation with his children, his wife and his friends."},{"fullText":"A small group of explorers landed in China, and were amazed by the beautiful, sparkling buildings. They wondered how such a beautiful country could ever be as scary as they had heard. It was at night, and the explorers were deep in the heart of the forbidden city, their flashlights not strong enough to reach the bottom of the narrow, dark hallways. Suddenly, a terrifying sound echoed through the halls."},{"fullText":"There was once a fairy living in a datacenter. It was a place filled with lights and noise, and the fairy loved it. The fairy lived on a mountain of Ethernet cables. She liked the way they glittered in the fluorescent artificial light that filled the room. The noise from the constant chatter of the servers, like a babbling brook, lulled her to sleep."}]'),hb=JSON.parse('[{"prefix":"Story:","instruction":"Describe the car.","text":"The car came bouncing down the hill and came to an abrupt stop in my driveway.","target":"It was an old, old Model-T Ford, with brass fittings, and no doors"},{"prefix":"Text:","instruction":"Rewrite the text to be about France.","text":"next to the path","target":"next to la Siene"},{"prefix":"Story:","instruction":"Tell me what comes next.","text":"The preacher took a long breath, and let it out","target":"slowly through his nose. \\"It wasn\'t long ago,\\" he said, \\"that those boys would\'ve been dead and buried."},{"prefix":"Text:","instruction":"Rewrite the text to include the word \\"snow\\":","text":"against the tree","target":"against the snow-covered bark of the tree"},{"prefix":"Story:","instruction":"Tell me what comes next.","text":"A young boy was sitting on the sidewalk.","target":"He was holding a lantern and looking ahead up the road."},{"prefix":"Story:","instruction":"Describe last Saturday.","text":"My pencil sits on top of the desk, left there since the events of last Saturday.","target":"It was one of those Saturdays that starts off like any other but you have the feeling that something is about to stir. You wake up with the same amount of enthusiasm but you get up from bed a little slower than usual. You know this is going to be a busy day"},{"prefix":"Story:","instruction":"Describe what had happened:","text":"She wasn\'t really upset about what had happened at the lab the other day; she was never one to dwell on mistakes.","target":"She had accidentally left the microorganisms alone for far too long. The lab, or what was left of it, was now filled with a strong aroma of their slime-- they had devoured all the metal, wood, and plastic they could find"},{"prefix":"Text:","instruction":"Rewrite the text to be about clowns.","text":"The man stood outside the grocery store, ringing the bell.","target":"The man stood outside the circus, holding a bunch of balloons."},{"prefix":"Story:","instruction":"Tell me what comes next.","text":"The clock chimed again,","target":"bringing her back to reality. The sound had become a constant companion since she had arrived that morning, a welcome companion in an empty house."},{"prefix":"Story:","instruction":"Describe the tree.","text":"The long shadow of the tree crept up the sidewalk","target":"It was an old oak tree on the main street of a small town, the branches spread as large as the sky."}]'),ub=JSON.parse('[{"fullText":"There once was a man named Kentucky, who could play the guitar like nobody\'s business. He loved to play the guitar so that he could hear the guitar sing along to him, to hear the guitar\'s melodic hum. Kentucky was a lonely man living in a lonely house in the middle of nowhere with only his favorite guitar to keep him company. Now this guitar had been owned by many-a-man, and all of them had come to the same fate. They played the guitar until the guitar played them.","targetSentenceIndex":1,"target":"to play the guitar so that he could hear the guitar sing along to him, "},{"fullText":"A secretary went about her daily work, while her company was being relocated from Chicago to New York City. It was tough, but she remained adaptable throughout the process.","targetSentenceIndex":0,"target":"from Chicago to New York City"},{"fullText":"The old man was laying on his deathbed, the only thing he could hear was his own heartbeat inside his ear. He knew he had an hour left to live, and he was so filled with despair. \\"I have no regrets, for I have led a good life.\\" However, in the next moment, a nurse entered the room, and he quickly said to her, \\"One regret, now that I have time to think on it. I wish I had talked less and listened more.\\" Before dying, the man decided to have one more conversation with his children, his wife and his friends.","targetSentenceIndex":0,"target":"on his deathbed, the only thing he "},{"fullText":"A small group of explorers landed in China, and were amazed by the beautiful, sparkling buildings. They wondered how such a beautiful country could ever be as scary as they had heard. It was at night, and the explorers were deep in the heart of the forbidden city, their flashlights not strong enough to reach the bottom of the narrow, dark hallways. Suddenly, a terrifying sound echoed through the halls.","targetSentenceIndex":0,"target":"It was at night, and"},{"fullText":"There was once a fairy living in a datacenter. It was a place filled with lights and noise, and the fairy loved it. The fairy lived on a mountain of Ethernet cables. She liked the way they glittered in the fluorescent artificial light that filled the room. The noise from the constant chatter of the servers, like a babbling brook, lulled her to sleep.","targetSentenceIndex":3,"target":"fluorescent artificial"}]'),pb=JSON.parse('[{"text":"A long time ago, in the beginning of time, beautiful crystalline frog people inhabited the earth. Their king, the crystal king, had mysteriously disappeared on a trip to the sea.","question":"What were the frog people like?","target":"Tell me more about the frog people."},{"text":"The green knight rode atop his majestic, beautiful horse, across fields of pure green. In his palm was a magical, sparkling golden sword.","question":"What happened next?","target":"Tell me what happened next."},{"text":"Ninja schools are where the ninjas are trained for their missions. Some are trained in the forests and snowy mountains and others are given the ultimate training in the hottest palace in the land.","question":"What were the ninjas like?","target":"Tell me about the ninjas"},{"text":"The witch doctor had a large pile of magic stones. All the magic stones had a power - healing magic, shapeshifting, seeing into the past.","question":"What did the witch doctor do with them?","target":"Tell me what the witch doctor did with them."},{"text":"The desert sun beat down on the sand, and tiny bits of sand flew with every step. The two young travelers trudged onward. They were tired, but they knew they had to go forward.","question":"What were the two travelers like?","target":"Tell me more about the two travelers."},{"text":"A prince and princess from the future set out in search of the mythical land of the unicorns. They had heard tale of magical unicorn dust that could heal any wound.","question":"What was their journey like?","target":"Tell me what their journey was like."},{"text":"A giant monster was chasing after a woman and yelling at her to get away. The woman ran, knowing that she was in horrible danger.","question":"Why was the monster chasing her?","target":"Tell me why the monster was chasing her."}]'),mb=JSON.parse('[{"topic":"A space monkey needs to escape from his dying planet.","target":"It was a cold, dark night on an unknown planet. In a field, a male monkey was pacing back and forth. He had been trying to figure something out, but nothing seemed to be working. He didn\'t have much time left."},{"topic":"A medieval romance where a group of colorful knights do battle.","target":"The green knight rode atop his majestic, beautiful horse, across fields of pure green. In his palm was a magical, sparkling golden sword."},{"topic":"An old man with a magical box tries to solve a mystery as his memories gradually fade away.","target":"The old man decided that he should look inside the box, and in the box there was a key. The old man couldn’t quite remember why he had a key, but he knew the key was important."},{"topic":"A coven of witches have taken up residence outside of a quiet mountain town, but they\'re not interested in witchcraft, they\'re interested in making hip-hop.","target":"An evil looking tree was growing off in the distance with no leaves and long, pointy branches. It was a sickly green and was swaying eerily without the wind."},{"topic":"After an ancient sea-worn bottle washes up on the shores of Tripoli, a group of rag-tag pirates open it up to find a map leading to a magical treasure.","target":"A group of pirates set out to sea in search of a magical treasure - a long, sparkling blue necklace called the night\'s eye."}]'),fb=JSON.parse('[{"fullText":"There once was a man named Kentucky, who could play the guitar like nobody\'s business. He loved to play the guitar so that he could hear the guitar sing along to him, to hear the guitar\'s melodic hum. Kentucky was a lonely man living in a lonely house in the middle of nowhere with only his favorite guitar to keep him company. Now this guitar had been owned by many-a-man, and all of them had come to the same fate. They played the guitar until the guitar played them.","targetSentenceIndex":1},{"fullText":"The old man was laying on his deathbed, the only thing he could hear was his own heartbeat inside his ear. He knew he had an hour left to live, and he was so filled with despair. \\"I have no regrets, for I have led a good life.\\" However, in the next moment, a nurse entered the room, and he quickly said to her, \\"One regret, now that I have time to think on it. I wish I had talked less and listened more.\\" Before dying, the man decided to have one more conversation with his children, his wife and his friends.","targetSentenceIndex":5},{"fullText":"A small group of explorers landed in China, and were amazed by the beautiful, sparkling buildings. They wondered how such a beautiful country could ever be as scary as they had heard. It was at night, and the explorers were deep in the heart of the forbidden city, their flashlights not strong enough to reach the bottom of the narrow, dark hallways. Suddenly, a terrifying sound echoed through the halls.","targetSentenceIndex":3},{"fullText":"There was once a fairy living in a datacenter. It was a place filled with lights and noise, and the fairy loved it. The fairy lived on a mountain of Ethernet cables. She liked the way they glittered in the fluorescent artificial light that filled the room. The noise from the constant chatter of the servers, like a babbling brook, lulled her to sleep.","targetSentenceIndex":2}]'),gb=JSON.parse('[{"pre":"An elderly man was sitting alone on a dark path. The man looked down at his feet, and realized ","toReplace":"he was holding a bright red box made of pine","targets":["something","something incredible","he was holding a bright red box made of pine","he was holding a bright red box made of pine, but he had no idea where it came from.","he was holding a bright red box made of pine, but he had no idea where it came from."],"post":". It was a plain pine box and looked as if it had been there for a long time. The man was afraid to look inside the box."},{"pre":"The mantle was cluttered with objects: ","toReplace":"picture frames showing grandchildren and long-ago weddings, knickknacks collected from all over the world, ","targets":["knickknacks","picture frames showing grandchildren","picture frames showing grandchildren and long-ago weddings, knickknacks collected from all over the world, ","picture frames showing grandchildren and long-ago weddings, knickknacks collected from all over the world, intricate decorative figurines","picture frames showing grandchildren and long-ago weddings, knickknacks collected from all over the world, intricate decorative figurines"],"post":"and more than one vase of dried flowers. The bejeweled lamp was at the very back, nearly invisible."},{"pre":"\\"We have to leave now!\\" I shouted. ","toReplace":"\\"The zombies are going to break through any moment, and then we\'ll all be goners.\\" ","targets":["\\"Hurry!\\"","\\"Let\'s get out of here!\\"","\\"The zombies are going to break through any moment, and then we\'ll all be goners.\\" ","\\"The zombies are going to break through any moment, and then we\'ll all be goners! We\'ve got to hurry!\\" ","\\"The zombies are going to break through any moment, and then we\'ll all be goners! We\'ve got to hurry!\\" "],"post":"The only way out was up. We climbed flight after flight. The sound of the monsters banging on the door below became more distant but no less threatening."},{"pre":"The sun was shining, and little gusts of wind brought through the window ","toReplace":"the faint scents of honeysuckle and freshly turned soil. It was a ","targets":["sweet scents. It was a","the faint scent of huneysuckle. It was a","the faint scents of honeysuckle and freshly turned soil. It was a ","the faint scents of honeysuckle, newly cut grass, and freshly turned soil. It was a ","the faint scents of honeysuckle, newly cut grass, and freshly turned soil. It was a "],"post":"shocking contrast from the stale city smells she had grown used to."},{"pre":"I was minding my business at the park, when I was approached by a little girl who was crying because she had lost ","toReplace":"her cat, which she had just received for her birthday. She did not want her parents to know she\'d already lost him. I\'m a good person ","targets":["her cat.","her new kitten.","her cat, which she had just received for her birthday.","her cat, which she had just received for her birthday. She did not want her parents to know she\'d already lost him. I\'m a good person ","her cat, which she had just received for her birthday. She did not want her parents to know she\'d already lost him. I\'m a good person "],"post":"so of course I helped search."},{"pre":"It was a cold night, and a storm was raging out at sea. A lightning bolt lit up the sky, briefly illuminating the lighthouse ","toReplace":"and the young man peering hesitantly over the sheer cliff. Before the next peal of thunder he jumped. At first he ","targets":["from above.","in a sharp silhouette.","and the young man peering hesitantly over the cliff. Before the next bolt he jumped. At first he ","and the young man peering hesitantly over the sheer cliff. Before the next peal of thunder he jumped. At first he ","and the young man peering hesitantly over the sheer cliff. Before the next peal of thunder he jumped. At first he "],"post":"plummeted but just before reaching the churning water, he disappeared in a poof of purple flame!"},{"pre":"The magician pulled out of his pocket ","toReplace":"a scarlet handkerchief ","targets":["a rabbit","a scarlet handkerchief ","a multicolored silken handkerchief, covered in polka dots - ","a multicolored silken handkerchief, woven from the finest shimmering fabric and covered in polka dots - ","a multicolored silken handkerchief, woven from the finest shimmering fabric and covered in polka dots - "],"post":" and then a second one and a third. He didn\'t stop until soon the ground was covered with them."}]'),bb=JSON.parse('[{"fullText":"There once was a man named Kentucky, who could play the guitar like nobody\'s business. He loved to play the guitar so that he could hear the guitar sing along to him, to hear the guitar\'s melodic hum. Kentucky was a lonely man living in a lonely house in the middle of nowhere with only his favorite guitar to keep him company. Now this guitar had been owned by many-a-man, and all of them had come to the same fate. They played the guitar until the guitar played them.","targetSentenceIndex":1,"targetSentenceCharacterOffset":39},{"fullText":"A secretary went about her daily work, while her company was being relocated from Chicago to New York City. It was tough, but she remained adaptable throughout the process.","targetSentenceIndex":0,"targetSentenceCharacterOffset":39},{"fullText":"The old man was laying on his deathbed, the only thing he could hear was his own heartbeat inside his ear. He knew he had an hour left to live, and he was so filled with despair. \\"I have no regrets, for I have led a good life.\\" However, in the next moment, a nurse entered the room, and he quickly said to her, \\"One regret, now that I have time to think on it. I wish I had talked less and listened more.\\" Before dying, the man decided to have one more conversation with his children, his wife and his friends.","targetSentenceIndex":1,"targetSentenceCharacterOffset":15},{"fullText":"It was at night, and the explorers were deep in the heart of the forbidden city, their flashlights not strong enough to reach the bottom of the narrow, dark hallways. Suddenly, a terrifying sound echoed through the halls.","targetSentenceIndex":0,"targetSentenceCharacterOffset":81},{"fullText":"There was once a fairy living in a datacenter. It was a place filled with lights and noise, and the fairy loved it. The fairy lived on a mountain of Ethernet cables. She liked the way they glittered in the fluorescent artificial light that filled the room. The noise from the constant chatter of the servers, like a babbling brook, lulled her to sleep.","targetSentenceIndex":2,"targetSentenceCharacterOffset":21}]'),vb=JSON.parse('[{"pre":"Once upon a time there was an old man, standing all alone. The man looked down at his feet, and realized ","toRewrite":"he was standing next to a box","post":". It was a plain pine box and looked as if it had been there for a long time. The man was afraid to look inside the box.","nWords":"about ten words","howToRewrite":"to include the word \'red\'","target":"he was holding a bright red box made of pine"},{"pre":"An elderly man was sitting alone on a dark path. The darkness turned to light as a figure ran up to him. The figure was holding a sword. The older man recognized the young man as ","toRewrite":"a dear friend, who he hadn\'t seen in some time","post":". The young man said he had had the strangest dream.","nWords":"two words","howToRewrite":"to be about family","target":"his son"},{"pre":"A traveling salesman was walking along a country road. He stumbled upon a little girl who was crying because she had lost ","toRewrite":"her doll","post":". The salesman decided to help the little girl find it. The man and the little girl began their journey together and as night fell they stumbled upon a small church.","nWords":"a few words","howToRewrite":"to be like a disney movie","target":"her glass slipper"},{"pre":"An oddly dressed gnome was wandering through the forest. He stumbled upon a little girl who was crying because she had lost ","toRewrite":"her doll","post":". The gnome decided to help the little girl find it, so he and the little girl began their journey together. As night fell they stumbled upon a small church.","nWords":"ten words","howToRewrite":"to be about a cat","target":"her cat, which she had just received for her birthday"},{"pre":"It was a cold night, and a storm was raging out sea. A lightning bolt lit up the sky, illuminating the warlock as he stood. With a swift movement he pulled a ","toRewrite":"small notebook","post":" out of his jacket and then stood in silence.","nWords":"one word","howToRewrite":"to be more intense","target":"dagger"}]'),yb=JSON.parse('[{"pre":"An elderly man was sitting alone on a dark path. ","toRewrite":"The man looked down at his feet, and realized he was standing next to a box.","post":" It was a plain pine box and looked as if it had been there for a long time. The man was afraid to look inside the box.","howToRewrite":"to be more evocative","target":"The man nearly gasped as he peered down at his feet, suddenly realizing he was standing next to a mysterious box."},{"pre":"An elderly man was sitting alone on a dark path. The darkness turned to light as a figure ran up to him. ","toRewrite":"The figure was holding a sword.","post":" The older man recognized the young man as a dear friend, who he hadn\'t seen in some time. The young man said he had had the strangest dream.","howToRewrite":"to use more descriptive language","target":"The shadowy figure held in his hand a shining sword that glimmered in the darkness."},{"pre":"There once was a man named Kentucky, who could play the guitar like nobody\'s business.","toRewrite":"He loved to play the guitar so that he could hear the guitar sing along to him, to hear the guitar\'s melodic hum.","post":"Kentucky was a lonely man living in a lonely house in the middle of nowhere with only his favorite guitar to keep him company. Now this guitar had been owned by many-a-man, and all of them had come to the same fate. They played the guitar until the guitar played them.","howToRewrite":"to be more melancholy","target":"He loved playing sad songs on his weathered guitar, so he could drown out his loneliness with the guitar\'s melodic hum."},{"pre":"A small group of explorers landed in China, and were amazed by the beautiful, sparkling buildings. They wondered how such a beautiful country could ever be as scary as they had heard. It was at night, and the explorers were deep in the heart of the forbidden city, their flashlights not strong enough to reach the bottom of the narrow, dark hallways.","toRewrite":"Suddenly, a terrifying sound echoed through the halls.","post":"","howToRewrite":"to use more interesting words","target":"Out of nowhere, a thunderous cacophony reverberated through the halls."}]'),_b=JSON.parse('[{"text":"A long time ago, in the beginning of time, beautiful crystalline frog people inhabited the earth. Their king, the crystal king, had mysteriously disappeared on a trip to the sea.","sizes":{"text":{"toRewrite":"Their king, the crystal king","target":"to be more interesting"},"sentence":{"toRewrite":"Their king, the crystal king, had mysteriously disappeared on a trip to the sea.","target":"to be more interesting"},"phrase":{"toRewrite":"the crystal king","target":"to be more interesting"},"word":{"toRewrite":"crystal","target":"to be more interesting"}}},{"text":"The green knight rode atop his majestic, beautiful horse, across fields of pure green. In his palm was a magical, sparkling golden sword.","sizes":{"text":{"toRewrite":"The green knight rode atop his majestic, beautiful horse","target":"to be more descriptive"},"sentence":{"toRewrite":"The green knight rode atop his majestic, beautiful horse, across fields of pure green.","target":"to be more descriptive"},"phrase":{"toRewrite":"fields of pure green","target":"to be more descriptive"},"word":{"toRewrite":"horse","target":"to be more descriptive"}}},{"text":"Ninja schools are where the ninjas are trained for their missions. Some are trained in the forests and snowy mountains and others are given the ultimate training in the hottest palace in the land.","sizes":{"text":{"toRewrite":"Some are trained in the forests and snowy mountains and others are given the ultimate training in the hottest palace in the land.","target":"to be shorter"},"sentence":{"toRewrite":"Some are trained in the forests and snowy mountains and others are given the ultimate training in the hottest palace in the land.","target":"to be shorter"},"phrase":{"toRewrite":"Some are trained in the forests and snowy mountains","target":"to be shorter"},"word":{"toRewrite":"hottest","target":"to use a more descriptive word"}}},{"text":"The witch doctor had a large pile of magic stones. All the magic stones had a power - healing magic, shapeshifting, seeing into the past.","sizes":{"text":{"toRewrite":"a large pile of magic stones.","target":"to be much longer"},"sentence":{"toRewrite":"The witch doctor had a large pile of magic stones.","target":"to be much longer"},"phrase":{"toRewrite":"The witch doctor","target":"to be much longer"},"word":{"toRewrite":"magic","target":"to use a few interesting words"}}},{"text":"The desert sun beat down on the sand, and tiny bits of sand flew with every step. The two young travelers trudged onward. They were tired, but they knew they had to go forward.","sizes":{"text":{"toRewrite":"They were tired, but they knew they had to go forward.","target":"to be more dramatic"},"sentence":{"toRewrite":"They were tired, but they knew they had to go forward.","target":"to be more dramatic"},"phrase":{"toRewrite":"They were tired","target":"to be more dramatic"},"word":{"toRewrite":"tired","target":"to be more dramatic"}}},{"text":"A prince and princess from the future set out in search of the mythical land of the unicorns. They had heard tales of magical unicorn dust that could heal any wound.","sizes":{"text":{"toRewrite":"magical unicorn dust","target":"to use more unique descriptions"},"sentence":{"toRewrite":"They had heard tales of magical unicorn dust that could heal any wound.","target":"to use more unique descriptions"},"phrase":{"toRewrite":"magical unicorn dust","target":"to use more unique descriptions"},"word":{"toRewrite":"tales","target":"to use more fanciful word"}}},{"text":"A giant monster was chasing after a woman and yelling at her to get away. The woman ran, knowing that she was in horrible danger.","sizes":{"text":{"toRewrite":"A giant monster was chasing after a woman and yelling","target":"to be more humorous"},"sentence":{"toRewrite":"A giant monster was chasing after a woman and yelling at her to get away.","target":"to be more humorous"},"phrase":{"toRewrite":"yelling at her to get away.","target":"to be more humorous"},"word":{"toRewrite":"monster","target":"to be more humorous"}}}]');class xb{constructor(e){this.exampleData=e}getExampleData(){return[...this.exampleData]}}const kb={availableOperations:[]};class wb extends wn{constructor(e){super(),this.serviceProvider=e}get featureFlagsService(){return this.serviceProvider.featureFlagsService}getConfigObject(){const e=window.wordcraftConfig,t=Object.keys(kb).reduce(((e,t)=>{const r=this.featureFlagsService.getFeature(t);return null!=r&&(e[t]=((e,t)=>"availableOperations"===e?t.split(","):t)(t,r)),e}),{});return Object.assign(Object.assign(Object.assign({},kb),e),t)}get availableOperations(){return this.getConfigObject().availableOperations}}class Sb extends wn{initialize(e){this.context=e}getContext(){return this.context}}class Eb extends wn{constructor(e){super(),this.serviceProvider=e,this.selectedText="",this.serializedRange={head:[0,0],tail:[0,0],direction:1}}get sentencesService(){return this.serviceProvider.sentencesService}get textEditorService(){return this.serviceProvider.textEditorService}get isCursorCollapsed(){const{head:e,tail:t}=this.serializedRange;return e[0]===t[0]&&e[1]===t[1]}get isCursorSelection(){return!this.isCursorCollapsed}get isCursorInOneSection(){const{head:e,tail:t}=this.serializedRange;return e[0]===t[0]}get isCursorInMiddle(){const{isCursorCollapsed:e,isCurrentSectionEmpty:t,isCursorAtEndOfSection:r,isCursorAtStartOfSection:i}=this;return!(!e||t)&&(!i&&!r)}get isCursorAtEndOfText(){const{currentSectionIndex:e,isCursorAtEndOfSection:t}=this,r=this.textEditorService.getParagraphs().length;return t&&r-1===e}get isCurrentSectionEmpty(){const e=this.serializedRange.head[0];return 0===this.textEditorService.getParagraphs()[e].length}get isCursorAtEndOfSection(){return this.isCursorCollapsed&&this.sentencesService.isLastCursorSpan}get isCursorAtStartOfSection(){return this.isCursorCollapsed&&this.sentencesService.isFirstCursorSpan}get currentSectionIndex(){if(this.isCursorCollapsed){const{serializedRange:e}=this,[t]=e.head;return t}return-1}get cursorOffset(){return this.isCursorCollapsed?this.serializedRange.head[1]:0}getOffsetFromSerializedPosition(e){const t=this.textEditorService.getParagraphs(),[r,i]=e;let n=0;for(let e=0;e<r;e++)n+=t[e].length+1;return n+=i,n}getOffsetRange(){const{head:e,tail:t}=this.serializedRange;return{start:this.getOffsetFromSerializedPosition(e),end:this.getOffsetFromSerializedPosition(t)}}setSerializedRange(e){this.serializedRange=e}getSerializedRange(){return this.serializedRange}getMobiledocRange(){const{serializedRange:e}=this;return e?this.makeMobiledocRangeFromSerialized(e):qc.blankRange()}setRangeFromMobiledoc(e){this.serializedRange=e?this.textEditorService.makeSerializedRangeFromMobileDoc(e):{head:[0,0],tail:[0,0],direction:1}}makeMobiledocRangeFromSerialized(e){if(!e)return qc.blankRange();const t=this.textEditorService.getEditor();try{const{head:r,tail:i,direction:n}=e,[o,s]=r,[a,c]=i,d=rp(t.post,o),l=rp(t.post,a),h=d.toPosition(s),u=l.toPosition(c),p=h.toRange(u);return p.direction=n,p}catch(e){return console.error(e),qc.blankRange()}}getPreAndPostPositionText(e){const t=new qc(e,e);return this.getPreAndPostSelectionText(t)}getPreAndPostSelectionText(e){const t=this.textEditorService.getPlainText(),r=this.textEditorService.getParagraphs();let i=t.length,n=i;if(null!==e){if(!e.head||!e.tail)return["",""];const t=e.head.section,o=e.tail.section,s=tp(t.post,t),a=tp(o.post,o);i=0;for(let e=0;e<s;e++)i+=r[e].length+1;i+=e.head.offset,n=0;for(let e=0;e<a;e++)n+=r[e].length+1;n+=e.tail.offset}return[t.slice(0,i),t.slice(n)]}}oi(Eb,{currentSectionIndex:nr,cursorOffset:nr,isCursorAtEndOfSection:nr,isCursorAtStartOfSection:nr,isCurrentSectionEmpty:nr,isCursorInOneSection:nr,isCursorInMiddle:nr,isCursorAtEndOfText:nr,selectedText:Xt,serializedRange:Xt});const Cb=["availableOperations"];class Tb extends wn{constructor(){super(...arguments),this.featureMap=new $i}isValidUrlParam(e){return Cb.includes(e)}isFeatureEnabled(e){return!!this.featureMap.get(e)}setFeature(e,t){this.featureMap.set(e,t)}getFeature(e){return this.featureMap.get(e)}}class Ab extends wn{constructor(e){super(),this.serviceProvider=e,this.titleControl=new es({prefix:"title",description:"",value:"",placeholder:"e.g. The Necklace"}),this.outlineControl=new ts({prefix:"plot points",description:"",id:"outline-textarea",value:"",placeholder:"e.g.\n- woman borrows necklace \n- woman loses necklace"}),ri((()=>({title:this.titleControl.value,outline:this.outlineControl.value})),(e=>{this.localStorageService.setMetaText(e)}))}get localStorageService(){return this.serviceProvider.localStorageService}initializeFromLocalStorage(e){if(null!=e.meta){const t=e.meta;this.titleControl.value=t.title||"",this.outlineControl.value=t.outline||""}}getMetaText(){return{title:this.titleControl.value,outline:this.outlineControl.value}}}class Rb extends wn{constructor(e){super(),this.serviceProvider=e,this.urlParams=new URLSearchParams(window.location.search)}get featureFlagsService(){return this.serviceProvider.featureFlagsService}initialize(){this.parseFeatureFlags()}getUrlParam(e){return this.urlParams.get(e)}hasUrlParam(e){return this.urlParams.has(e)}updateUrlParam(e,t){this.urlParams.set(e,t),this.updateHistory()}deleteUrlParam(e){this.urlParams.delete(e),this.updateHistory()}parseFeatureFlags(){for(const e of this.urlParams.entries()){const[t,r]=e;this.featureFlagsService.isValidUrlParam(t)&&this.featureFlagsService.setFeature(t,r)}}updateHistory(){const e=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+this.urlParams.toString();window.history.pushState({path:e},"",e)}}class Ob extends wn{constructor(e){super(),this.serviceProvider=e,this.paragraphData=[],this.initialized=!1}get cursorService(){return this.serviceProvider.cursorService}get textEditorService(){return this.serviceProvider.textEditorService}get currentSentence(){return this.cursorSpan&&this.isCursorWithinSentence?this.cursorSpan.span.text:""}get currentSentenceSerializedRange(){if(!this.isCursorWithinSentence)return null;const e=this.cursorService.currentSectionIndex;if(!this.cursorSpan)return null;const{start:t,end:r}=this.cursorSpan.span;return{head:[e,t],tail:[e,r],direction:1}}get currentSentenceIndex(){if(!this.isCursorWithinSentence)return-1;const e=this.getParagraphDataAtCursor();if(null==e)return-1;let t=0;for(const r of e.sentenceSpans){if(this.cursorSpan&&this.cursorSpan.span===r)return t;r instanceof Ts&&(t+=1)}return-1}getSentenceBeforeCursor(){const e=this.getParagraphDataAtCursor();if(null==e)return"";let t="";for(const r of e.sentenceSpans){if(this.cursorSpan&&this.cursorSpan.span===r)return t;r instanceof Ts&&(t=r.text)}return""}get cursorSpan(){const e=this.getParagraphDataAtCursor();if(!e)return null;const t=this.cursorService.cursorOffset,{sentenceSpans:r}=e;return Os(r,t)}get isLastCursorSpan(){const{cursorSpan:e}=this;if(null==e)return!1;const t=this.getParagraphDataAtCursor();return null!=t&&e.index===t.sentenceSpans.length-1}get isFirstCursorSpan(){const{cursorSpan:e}=this;return null!=e&&0===e.index}get isCursorWithinSentence(){const{cursorSpan:e}=this;return null!=e&&e.span instanceof Ts}get isCursorBetweenSentences(){return!this.isCursorWithinSentence&&!this.isLastCursorSpan&&!this.isFirstCursorSpan}get nextSentenceOffset(){const{serializedRange:e}=this.cursorService;if(this.isCursorWithinSentence&&null!=this.cursorSpan){const{span:e}=this.cursorSpan;return e.end}return e.head[1]}getNextSentenceRange(){const e=this.nextSentenceOffset,t=this.cursorService.currentSectionIndex,r={head:[t,e],tail:[t,e],direction:1};return this.cursorService.makeMobiledocRangeFromSerialized(r)}getCurrentSentenceRange(){const{currentSentenceSerializedRange:e}=this;return this.cursorService.makeMobiledocRangeFromSerialized(e)}initialize(){this.processText(),!0!==this.initialized&&(this.textEditorService.onUpdate((()=>{this.processText()})),this.initialized=!0)}getSentencesForSection(e){return Es(this.textEditorService.getParagraphs()[e])}stringEquals(e,t){return e.length===t.length&&e===t}getParagraphDataAtIndex(e){return e<=this.paragraphData.length-1?this.paragraphData[e]:void 0}getParagraphDataAtCursor(){const{serializedRange:e,isCursorCollapsed:t}=this.cursorService;if(!e)return null;if(!t)return null;const[r]=e.head;return this.getParagraphDataAtIndex(r)||null}processText(){const e=this.textEditorService.getParagraphs();this.paragraphData=e.map(((e,t)=>{const r=this.getParagraphDataAtIndex(t);if(!r||!this.stringEquals(r.text,e)){return{sentenceSpans:Rs(e),text:e}}return r}))}highlightCurrentSentence(){const{isCursorCollapsed:e,serializedRange:t}=this.cursorService,{isCursorWithinSentence:r}=this;if(this.textEditorService.clearCurrentSentenceHighlight(),e&&r){if(!this.currentSentenceSerializedRange)return;const{head:e,tail:r}=this.currentSentenceSerializedRange,[i,n]=e,[,o]=r,s={head:[i,n],tail:[i,o],direction:t.direction},a=this.cursorService.makeMobiledocRangeFromSerialized(s);this.textEditorService.setCurrentSentenceHighlight(a)}const i=this.cursorService.makeMobiledocRangeFromSerialized(t);this.textEditorService.setCursorRange(i)}}oi(Ob,{cursorSpan:nr,currentSentence:nr,currentSentenceIndex:nr,currentSentenceSerializedRange:nr,nextSentenceOffset:nr,paragraphData:Xt.shallow});class Ib extends wn{constructor(e){super(),this.serviceProvider=e,this.errorId=0,this.errorEvents=new Map}get dialogService(){return this.serviceProvider.dialogService}get errorMessages(){return[...this.errorEvents.values()]}get hasError(){return this.errorMessages.length>0}get errorMessage(){return`${this.errorMessages.join("\n")}. See console for more details)`}addError(e,t=!0){const r=this.errorId;this.errorEvents.set(r,e),console.error(e),this.dialogService.openErrorSnackbar(e),t&&(window.setTimeout((()=>{this.clearError(r)}),5e3),this.errorId+=1)}clearError(e){this.errorEvents.delete(e)}}oi(Ib,{errorEvents:Xt,errorMessage:nr,errorMessages:nr,hasError:nr});var Nb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Mb(e,t){function r(t){return`${e.getStoryPrefix()} ${e.wrap(t)}\nContinue the story:  `}return function(i){return Nb(this,void 0,void 0,(function*(){const n=function(){const i=t.getExampleData("CONTINUE");let n=e.getPromptPreamble();return i.forEach((({input:t,target:i})=>{const o=r(t);n+=`${o} ${e.wrap(i)}\n\n`})),n}(),o=n+r(i.text);return e.query(o)}))}}var Pb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Lb(e,t){function r(t,r){const i=`Describe "${r}" in more detail.`;return`${e.getStoryPrefix()} ${e.wrap(t)}\n${i}`}return function(i){return Pb(this,void 0,void 0,(function*(){const{text:n,toElaborate:o}=i,s=function(){const i=t.getExampleData("ELABORATE");let n=e.getPromptPreamble();return i.forEach((({text:t,toElaborate:i,target:o})=>{const s=r(t,i);n+=`${s} ${e.wrap(o)}\n\n`})),n}(),a=s+r(n,o);return e.query(a)}))}}var Db=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function $b(e,t){function r(t){return`${e.getStoryPrefix()} ${`${e.getBlank()} ${t}`}\nTell me the first sentence that fills in the blank: `}return function(i){return Db(this,void 0,void 0,(function*(){const n=function(){const i=t.getExampleData("FIRST_SENTENCE");let n=e.getPromptPreamble();for(let t=0;t<i.length;t++){const o=i[t],{fullText:s}=o,a=Es(s),[c,...d]=a;n+=`${r(d.join(" "))} ${e.wrap(c)}\n\n`}return n}(),o=n+r(i.text);return(yield e.query(o)).map((e=>{const t=e.text.trim();return Object.assign(Object.assign({},e),{text:t})})).filter((e=>!i.text.includes(e.text)))}))}}var Hb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Fb(e,t){return function(r){return Hb(this,void 0,void 0,(function*(){const{text:i,instruction:n}=r,o=function(){const r=vn(t.getExampleData("FREEFORM")).slice(0,4);let i=e.getPromptPreamble();return r.forEach((t=>{const r=t.prefix,n=t.instruction,{text:o,target:s}=t;i+=`${r} ${e.wrap(o)}\n${n} ${e.wrap(s)}\n\n`})),i}(),s=function(t,r){return`${e.getStoryPrefix()} ${t}\n${r}`}(i,n),a=o+s;return e.query(a)}))}}var Bb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function jb(e,t){function r(t,r,i,n){const o=e.getBlank(),s=`${t} ${o} ${r}`,a=`${i} ${o} ${n}`,c=e.getStoryPrefix(),d=`Sentence with blank: ${e.wrap(a)}\nSentence with blank filled in:`;return`${c} ${e.wrap(s)}\n${d}`}return function(i){return Bb(this,void 0,void 0,(function*(){console.log("generate within sentence prompt");let{pre:n,post:o,beginningOfSentence:s,endOfSentence:a}=i;const c=function(){const i=t.getExampleData("GENERATE_WITHIN_SENTENCE");let n=e.getPromptPreamble();const o=vn(i);for(let t=0;t<o.length;t++){const i=o[t],{fullText:s,targetSentenceIndex:a,target:c}=i;let d="",l="";const h=Es(s),u=h[a],p=u.indexOf(c),m=p+c.length,f=u.substring(0,p),g=u.substring(m);d+=h.slice(0,a).reduce(((e,t)=>e+(t+" ")),"");const b=h[a];d+=b.substring(0,p),l+=b.substring(m)+" ",l+=h.slice(a+1).reduce(((e,t)=>e+(t+" ")),""),n+=`${r(d,l,f,g)} ${e.wrap(u)}\n\n`}return n}(),d=c+r(n,o,s,a),l=yield e.query(d);s=_n(s),a=_n(a);const h=yn(a);return l.map((e=>{const t=_n(Es(e.text)[0]);return Object.assign(Object.assign({},e),{text:t})})).filter((e=>e.text.indexOf(s)>=0)).map((e=>{const t=yn(e.text.replace(s,"")+" "),r=yn(t.replace(h,""));return Object.assign(Object.assign({},e),{text:r})})).filter((e=>!Ss(e.text)))}))}}var zb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Ub(e,t){function r(t){return`${e.getStoryPrefix()} ${e.wrap(t)}\nNext prompt:`}return function(i){return zb(this,void 0,void 0,(function*(){const n=t.getExampleData("META_PROMPT"),o=function(t){let i=e.getPromptPreamble();return t.forEach((({text:t,target:n})=>{const o=r(t);i+=`${o} ${e.wrap(n)}\n\n`})),i}(n);let s=i.text.trim();(function(e){for(const t of e){const{target:e}=t;if(_s(e))return!0}return!1})(n)&&!_s(s)&&(s+=".");const a=o+r(s);return e.query(a)}))}}var Kb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Wb(e,t){function r(t,r,i){const n=e.getStoryPrefix(),o=e.getBlank();if(r&&t){const s=`${t} ${o} ${r}`;return`${n} ${e.wrap(s)}\n${`Sentence that comes after ${e.wrap(i)}:`}`}if(t){return`${n} ${e.wrap(t)}\n${"Next sentence:"}`}return`${n} ${e.wrap(r)}\n${"First sentence"}`}return function(i){return Kb(this,void 0,void 0,(function*(){console.log("next sentence prompt");const{pre:n,post:o,previousSentence:s}=i,a=function(){const i=t.getExampleData("NEXT_SENTENCE");let n=e.getPromptPreamble();for(let t=0;t<i.length;t++){const o=i[t],{fullText:s,targetSentenceIndex:a}=o,c=Es(s),d=c.slice(0,a).reduce(((e,t)=>e+t+" "),""),l=c.slice(a+1).reduce(((e,t)=>e+t+" "),""),h=c[a-1]||"",u=c[a];n+=`${r(d,l,h)} ${e.wrap(u)}\n\n`}return n}(),c=a+r(n,o,s);return(yield e.query(c)).map((e=>{const t=e.text.trim().replace(s.trim(),"");return Object.assign(Object.assign({},e),{text:t})})).filter((e=>!`${n} ${o}`.includes(e.text)))}))}}var Vb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Gb(e,t){function r(t){const r="Tell me a new beginning of a story: ";return""===t.trim()?r:`Here's a story topic: ${e.wrap(t)}\n${r}`}return function(i){return Vb(this,void 0,void 0,(function*(){const{topic:n}=i,o=function(){const i=t.getExampleData("NEW_STORY");let n=e.getPromptPreamble();return i.forEach((t=>{const{topic:i,target:o}=t,s=r(i);n+=`${s} ${e.wrap(o)}\n\n`})),n}(),s=o+r(n);return e.query(s)}))}}var Zb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function qb(e){const t=_a.findIndex((t=>e<=t.max))||0;return{text:_a[t],index:t}}function Yb(e,t){function r(t,r,i,n){const o=`${t} ${n} ${r}`,s=Es(t).length-1,a=Es(o)[s],c=qb(i).text,d=e.getStoryPrefix(),l=`Sentence with blank: ${e.wrap(a)}\nFill in the blank with ${c.text}, and make sure it's new and interesting.`;return`${d} ${e.wrap(o)}\n${l}`}return function(i){return Zb(this,void 0,void 0,(function*(){console.log("replace prompt");const{pre:n,post:o,nWords:s}=i,a=function(t,i){const n=e.getBlank();let o=e.getPromptPreamble();return t.forEach((({pre:t,targets:s,post:a})=>{const c=s[qb(i).index],d=r(t,a,i,n);o+=`${d} ${e.wrap(c)}\n\n`})),o}(t.getExampleData("REPLACE"),s),c=a+r(n,o,s,e.getBlank());return e.query(c)}))}}var Jb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function Xb(e,t){function r(t,r,i){const n=e.getBlank(),o=`${t} ${n} ${r}`,s=`${i} ${n}.`;return`${e.getStoryPrefix()} ${e.wrap(o)} ${`Sentence with blank: ${e.wrap(s)}\nSentence with blank filled in:`}`}return function(i){return Jb(this,void 0,void 0,(function*(){console.log("rewrite end of sentence prompt");const{pre:n,post:o,beginningOfSentence:s}=i,a=function(){const i=t.getExampleData("REWRITE_END_OF_SENTENCE");let n=e.getPromptPreamble();for(let t=0;t<i.length;t++){const o=i[t],{fullText:s,targetSentenceIndex:a,targetSentenceCharacterOffset:c}=o,d=Es(s);let l="",h="";const u=d[a].substring(0,c);l+=d.slice(0,a).reduce(((e,t)=>e+(t+" ")),"");const p=c,m=d[a],f=m.length-1;l+=m.substring(0,p),h+=m.substring(f),h+=d.slice(a+1).reduce(((e,t)=>e+(t+" ")),"");const g=d[a];n+=`${r(l,h,u)} ${e.wrap(g)}\n\n`}return n}(),c=a+r(n,o,s);return(yield e.query(c)).filter((e=>0===e.text.indexOf(s))).map((e=>({text:Es(e.text)[0].replace(s,"")+" ",uuid:e.uuid})))}))}}var Qb=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function ev(e,t){function r(t){const{pre:r,post:i,toRewrite:n,howToRewrite:o,nWords:s}=t,a=1===n.split(" ").length?"word":"phrase",c=function(t,r){return`${t}${e.getBlank()}${r}`}(r,i),d=e.getStoryPrefix(),l=`The ${a} to be rewritten that fills in the blank: `,h=function(e,t,r){return`The ${1===e.split(" ").length?"word":"phrase"} rewritten ${t?` with ${t} `:""}${r?`${r}`:""}: `}(n,s,o);return`${d} ${e.wrap(c)}\n${l} ${e.wrap(n)}\n${h}`}return function(i){return Qb(this,void 0,void 0,(function*(){console.log("rewrite selection prompt");const{pre:n,post:o,toRewrite:s,howToRewrite:a}=i,c=function(){const i=vn(t.getExampleData("REWRITE_SELECTION"));let n=e.getPromptPreamble();for(let t=0;t<i.length;t++){const o=i[t];n+=`${r(o)} ${e.wrap(o.target)}\n\n`}return n}(),d=c+r({pre:n,post:o,toRewrite:s,howToRewrite:a,nWords:""});return e.query(d)}))}}var tv=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function rv(e,t){function r(t,r,i,n){const o=function(t,r){return`${t}${e.getBlank()}${r}`}(t,r),s=`Rewrite this sentence to ${n}, only rewriting this specific sentence and nothing more:`;return`${e.getStoryPrefix()} ${e.wrap(o)}\nSentence in the blank: ${e.wrap(i)}\n${s}`}return function(i){return tv(this,void 0,void 0,(function*(){console.log("rewrite sentence");const{pre:n,post:o,toRewrite:s,howToRewrite:a}=i,c=function(){const i=t.getExampleData("REWRITE_SENTENCE");let n=e.getPromptPreamble();const o=vn(i);for(let t=0;t<o.length;t++){const i=o[t],{pre:s,post:a,toRewrite:c,howToRewrite:d,target:l}=i;n+=`${r(s,a,c,d)} ${e.wrap(l)}\n\n`}return n}(),d=c+r(n,o,s,a);return e.query(d)}))}}var iv=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function nv(e,t){function r(t,r){return`${`${e.getStoryPrefix()} ${e.wrap(t)}\nHere's the sentence to rewrite:  ${e.wrap(r)}`}\nHere's a suggested way to rewrite: `}return function(i){return iv(this,void 0,void 0,(function*(){const{text:n,toRewrite:o,textType:s}=i,a=function(i){const n=t.getExampleData("SUGGEST_REWRITE");let o=e.getPromptPreamble();return n.forEach((({text:t,sizes:n})=>{const{target:s,toRewrite:a}=n[i],c=r(t,a);o+=`${c} ${e.wrap(s)}\n\n`})),o}(s),c=a+r(n,o),d=yield e.query(c,{},!1);return e.parseResults(d)}))}}var ov=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class sv{constructor(e){this.serviceProvider=e,this.makePromptHandler=this.makePromptHandler.bind(this)}wrap(e){return e}getBlank(){return""}insertBlank(e,t){return`${e}${this.getBlank()}${t}`}get contextService(){return this.serviceProvider.contextService}get statusService(){return this.serviceProvider.statusService}get context(){return this.contextService.getContext()}makePromptHandler(e){const t=e(this,this.context);return function(e){return ov(this,void 0,void 0,(function*(){return ga(yield t(e))}))}}parseResults(e){return e}query(e){throw new Error("Not yet implemented")}continue(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}elaborate(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}firstSentence(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}freeform(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}generateWithinSentence(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}metaPrompt(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}nextSentence(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}newStory(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}refine(){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}replace(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}rewriteEndOfSentence(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}rewriteSelection(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}rewriteSentence(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}suggestRewrite(e){return ov(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}}var av=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const cv="{",dv="}",lv="____";var hv=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class uv{constructor(e){this.serviceProvider=e}get contextService(){return this.serviceProvider.contextService}get statusService(){return this.serviceProvider.statusService}get context(){return this.contextService.getContext()}query(e){return hv(this,void 0,void 0,(function*(){throw new Error("Not yet implemented")}))}}var pv=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};bn.initialize((function(e){return{get appService(){return e.getService(En)},get chatService(){return e.getService(Fa)},get configService(){return e.getService(wb)},get contextService(){return e.getService(Sb)},get cursorService(){return e.getService(Eb)},get dialogService(){return e.getService(gm)},get documentStoreService(){return e.getService(Tn)},get featureFlagsService(){return e.getService(Tb)},get initializationService(){return e.getService(gp)},get keyboardService(){return e.getService(Oo)},get localStorageService(){return e.getService(Cm)},get metaTextService(){return e.getService(Ab)},get modelService(){return e.getService(bp)},get operationsService(){return e.getService(La)},get routeService(){return e.getService(Rb)},get sentencesService(){return e.getService(Ob)},get starredResultsService(){return e.getService(Ya)},get statusService(){return e.getService(Ib)},get textEditorService(){return e.getService(ap)}}}));const mv=bn.getService(gp),fv=new class{constructor(){this.examples=new Map,this.registerExamples("CONTINUE",Zg,cb),this.registerExamples("ELABORATE",qg,db),this.registerExamples("FIRST_SENTENCE",Yg,lb),this.registerExamples("FREEFORM",Jg,hb),this.registerExamples("GENERATE_WITHIN_SENTENCE",Xg,ub),this.registerExamples("META_PROMPT",Qg,pb),this.registerExamples("NEW_STORY",eb,mb),this.registerExamples("NEXT_SENTENCE",tb,fb),this.registerExamples("REPLACE",rb,gb),this.registerExamples("REWRITE_END_OF_SENTENCE",ib,bb),this.registerExamples("REWRITE_SELECTION",nb,vb),this.registerExamples("REWRITE_SENTENCE",ob,yb),this.registerExamples("SUGGEST_REWRITE",ab,_b)}registerExamples(e,t,r){try{const i=Gg.array(t).parse(r);class n extends xb{}const o=new n(i);this.examples.set(e,o)}catch(t){console.error(`Error registering JSON examples for ${e}`);for(const e in t.issues){const r=t.issues[e],i=r.path.slice(1).join("."),n=`Example index ${e}: expected type "${r.expected}" at exampe.${i}, received "${r.received}"`;console.error(n)}}}getExampleData(e){if(!this.examples.has(e))throw new Error(`No examples registered for operation (${e})`);return this.examples.get(e).getExampleData()}get documentType(){return"story"}};mv.initialize(fv);bn.getService(La).registerOperations(Qs,ta,ia,aa,da,ha,fa,wa,Ta,Ia,Ma);const gv=bn.getService(bp);gv.useModel(class extends sv{constructor(e){super(e),this.continue=this.makePromptHandler(Mb),this.elaborate=this.makePromptHandler(Lb),this.firstSentence=this.makePromptHandler($b),this.freeform=this.makePromptHandler(Fb),this.generateWithinSentence=this.makePromptHandler(jb),this.metaPrompt=this.makePromptHandler(Ub),this.nextSentence=this.makePromptHandler(Wb),this.newStory=this.makePromptHandler(Gb),this.replace=this.makePromptHandler(Yb),this.rewriteEndOfSentence=this.makePromptHandler(Xb),this.rewriteSelection=this.makePromptHandler(ev),this.rewriteSentence=this.makePromptHandler(rv),this.suggestRewrite=this.makePromptHandler(nv)}getBlank(){return lv}getStoryPrefix(){return"Story: "}getPromptPreamble(){return"I am an expert writing assistant, and can expertly write and edit stories.\n\n"}wrap(e){return`${cv}${e}${dv}`}insertBlank(e,t){return`${e}${lv}${t}`}addNewlines(...e){return e.join("\n")}parseResults(e,t="",r=!0){const i=e.map((e=>{if(t&&(e.text=e.text.replace(t,"")),r){const t=function(e,t,r){const i=new RegExp(`(?<=${t})(.*?)(?=${r})`,"s"),n=e.match(i);return n?n[0]:null}(e.text,cv,dv)||"";return Object.assign(Object.assign({},e),{text:t})}{let t=e.text.trim();return i=t,ys.includes(i.slice(0,1))&&(t=t.slice(1)),Object.assign(Object.assign({},e),{text:t})}var i})).filter((e=>{const t=!!e.text,r=(i=e.text,!ya.some((e=>i.includes(e))));var i;return t&&r}));return ga(i)}query(e){return av(this,arguments,void 0,(function*(e,t={},r=!0){e=e+"\nGenerate 5 responses. Each response must start with: "+"{ and end with: "+dv,console.log("🚀 prompt text: ",e);const i=yield function(e,t){return $n(this,void 0,void 0,(function*(){(t=Object.assign({},zn,t)).generationConfig.maxOutputTokens=1024;const r=Fn.getGenerativeModel({model:"gemini-pro",genConfig:t,safetySettings:jn}),i=yield r.generateContent(e);return(yield i.response).text()}))}(e,t);console.log("🚀 model results: ",i);const n=function(e,t,r){const i=new RegExp(`(?<=${t})(.*?)(?=${r})`,"gms"),n=e.match(i),o=[];for(const e of n)o.push("{"+e+"}");return o}(i,cv,dv),o=ba(n);return r?this.parseResults(o,e):o}))}}),gv.useDialogModel(class extends uv{constructor(e){super(e)}query(e){return pv(this,arguments,void 0,(function*(e,t={}){console.log("🚀 DialogParams: ",JSON.stringify(e));const r=yield function(e,t){return $n(this,void 0,void 0,(function*(){(t=Object.assign({},zn,t)).generationConfig.temperature=.7,t.generationConfig.candidateCount=1;const r=Fn.getGenerativeModel({model:"gemini-pro",genConfig:t,safetySettings:jn}),i=e.messages.length-1,n=e.messages[i].content,o=function(e){const t=[];for(let r=1;r<e.messages.length-1;r++)t.push({role:e.messages[r].author,parts:e.messages[r].content});return t}(e);console.log("history (object):\n",o);const s=r.startChat(o),a=yield s.sendMessage(n);return(yield a.response).text()}))}(e,t);console.log("🚀 model results: ",r);return ba(r.length?[r]:[])}))}}),window.addEventListener("load",(()=>{const e=new Rm;document.body.appendChild(e)}))},303:()=>{var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!=typeof window){var r=Array.prototype.slice,i=Element.prototype.matches||Element.prototype.msMatchesSelector,n=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),o=function(){function o(e,r){t(this,o),this._inertManager=r,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return e(o,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(e){this._unmanageNode(e.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(e){var t=this;d(e,(function(e){return t._visitNode(e)}));var r=document.activeElement;if(!document.body.contains(e)){for(var i=e,n=void 0;i;){if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE){n=i;break}i=i.parentNode}n&&(r=n.activeElement)}e.contains(r)&&(r.blur(),r===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e;t!==this._rootElement&&t.hasAttribute("inert")&&this._adoptInertRoot(t),(i.call(t,n)||t.hasAttribute("tabindex"))&&this._manageNode(t)}}},{key:"_manageNode",value:function(e){var t=this._inertManager.register(e,this);this._managedNodes.add(t)}},{key:"_unmanageNode",value:function(e){var t=this._inertManager.deregister(e,this);t&&this._managedNodes.delete(t)}},{key:"_unmanageSubtree",value:function(e){var t=this;d(e,(function(e){return t._unmanageNode(e)}))}},{key:"_adoptInertRoot",value:function(e){var t=this._inertManager.getInertRoot(e);t||(this._inertManager.setInert(e,!0),t=this._inertManager.getInertRoot(e)),t.managedNodes.forEach((function(e){this._manageNode(e.node)}),this)}},{key:"_onMutation",value:function(e,t){e.forEach((function(e){var t=e.target;if("childList"===e.type)r.call(e.addedNodes).forEach((function(e){this._makeSubtreeUnfocusable(e)}),this),r.call(e.removedNodes).forEach((function(e){this._unmanageSubtree(e)}),this);else if("attributes"===e.type)if("tabindex"===e.attributeName)this._manageNode(t);else if(t!==this._rootElement&&"inert"===e.attributeName&&t.hasAttribute("inert")){this._adoptInertRoot(t);var i=this._inertManager.getInertRoot(t);this._managedNodes.forEach((function(e){t.contains(e.node)&&i._manageNode(e.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(e){this._savedAriaHidden=e},get:function(){return this._savedAriaHidden}}]),o}(),s=function(){function r(e,i){t(this,r),this._node=e,this._overrodeFocusMethod=!1,this._inertRoots=new Set([i]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return e(r,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var e=this._node;null!==this._savedTabIndex?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var e=this.node;if(i.call(e,n)){if(-1===e.tabIndex&&this.hasSavedTabIndex)return;e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)}else e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.add(e)}},{key:"removeInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.delete(e),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(e){this._throwIfDestroyed(),this._savedTabIndex=e},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),r}(),a=function(){function n(e){if(t(this,n),!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(e.head||e.body||e.documentElement),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return e(n,[{key:"setInert",value:function(e,t){if(t){if(this._inertRoots.has(e))return;var r=new o(e,this);if(e.setAttribute("inert",""),this._inertRoots.set(e,r),!this._document.body.contains(e))for(var i=e.parentNode;i;)11===i.nodeType&&l(i),i=i.parentNode}else{if(!this._inertRoots.has(e))return;this._inertRoots.get(e).destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}},{key:"getInertRoot",value:function(e){return this._inertRoots.get(e)}},{key:"register",value:function(e,t){var r=this._managedNodes.get(e);return void 0!==r?r.addInertRoot(t):r=new s(e,t),this._managedNodes.set(e,r),r}},{key:"deregister",value:function(e,t){var r=this._managedNodes.get(e);return r?(r.removeInertRoot(t),r.destroyed&&this._managedNodes.delete(e),r):null}},{key:"_onDocumentLoaded",value:function(){r.call(this._document.querySelectorAll("[inert]")).forEach((function(e){this.setInert(e,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(e,t){var n=this;e.forEach((function(e){switch(e.type){case"childList":r.call(e.addedNodes).forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=r.call(e.querySelectorAll("[inert]"));i.call(e,"[inert]")&&t.unshift(e),t.forEach((function(e){this.setInert(e,!0)}),n)}}),n);break;case"attributes":if("inert"!==e.attributeName)return;var t=e.target,o=t.hasAttribute("inert");n.setInert(t,o)}}),this)}}]),n}();if(!HTMLElement.prototype.hasOwnProperty("inert")){var c=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){c.setInert(this,e)}})}}function d(e,t,r){if(e.nodeType==Node.ELEMENT_NODE){var i=e;t&&t(i);var n=i.shadowRoot;if(n)return void d(n,t,n);if("content"==i.localName){for(var o=i,s=o.getDistributedNodes?o.getDistributedNodes():[],a=0;a<s.length;a++)d(s[a],t,r);return}if("slot"==i.localName){for(var c=i,l=c.assignedNodes?c.assignedNodes({flatten:!0}):[],h=0;h<l.length;h++)d(l[h],t,r);return}}for(var u=e.firstChild;null!=u;)d(u,t,r),u=u.nextSibling}function l(e){if(!e.querySelector("style#inert-style, link#inert-style")){var t=document.createElement("style");t.setAttribute("id","inert-style"),t.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",e.appendChild(t)}}}()}},e=>{var t;t=74,e(e.s=t)}]);